(window.webpackJsonp=window.webpackJsonp||[]).push([[148],{514:function(a,e,n){"use strict";n.r(e);var s=n(8),t=Object(s.a)({},(function(){var a=this,e=a._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("p",[a._v("[toc]")]),a._v(" "),e("h2",{attrs:{id:"如何创建告警插件以及告警组"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如何创建告警插件以及告警组"}},[a._v("#")]),a._v(" 如何创建告警插件以及告警组")]),a._v(" "),e("p",[a._v("用户需要创建告警实例，在创建告警实例时，需要选择告警策略，有三个选项，成功发、失败发，以及成功和失败都发。在执行完工作流或任务时，如果触发告警，调用告警实例发送方法会进行逻辑判断，将告警实例与任务状态进行匹配，匹配则执行该告警实例发送逻辑，不匹配则过滤。创建完告警实例后，需要同告警组进行关联，一个告警组可以使用多个告警实例。 告警模块支持场景如下：")]),a._v(" "),e("p",[e("img",{attrs:{src:"https://s2.loli.net/2023/04/26/QZLoTtdNS7JOCcR.png",alt:"img"}})]),a._v(" "),e("p",[a._v("使用步骤如下：")]),a._v(" "),e("p",[a._v("首先需要进入到安全中心，选择告警组管理，然后点击左侧的告警实例管理，然后创建一个告警实例，然后选择对应的告警插件，填写相关告警参数。")]),a._v(" "),e("p",[a._v("然后选择告警组管理，创建告警组，选择相应的告警实例即可。")]),a._v(" "),e("p",[e("img",{attrs:{src:"https://s2.loli.net/2023/04/26/UGIKx3eYz8QWMXL.png",alt:"image-20230325115159106"}})]),a._v(" "),e("p",[e("img",{attrs:{src:"https://s2.loli.net/2023/04/26/dBzk5RwDltuFqcE.png",alt:"image-20230325115416760"}})]),a._v(" "),e("p",[e("img",{attrs:{src:"https://s2.loli.net/2023/04/26/8qX1tADh7R3VamK.png",alt:"image-20230325122532494"}})]),a._v(" "),e("h2",{attrs:{id:"在执行时配置告警组"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#在执行时配置告警组"}},[a._v("#")]),a._v(" 在执行时配置告警组")]),a._v(" "),e("p",[a._v("配置"),e("code",[a._v("通知策略")]),a._v("和"),e("code",[a._v("告警组")]),a._v("，并执行")]),a._v(" "),e("p",[e("img",{attrs:{src:"https://s2.loli.net/2023/04/26/dlBWXP3DiTsw8Q6.png",alt:"image-20230325121811539"}})]),a._v(" "),e("p",[a._v("通知策略设置为成功或失败都发，这样方便测试，执行后会收到邮件通知。")]),a._v(" "),e("p",[e("img",{attrs:{src:"https://s2.loli.net/2023/04/26/t7E9YzOb3U2KQnA.png",alt:"image-20230325123006320"}})]),a._v(" "),e("p",[a._v("如果没有发送成功可以在部署"),e("code",[a._v("alert-server")]),a._v("的机器上查看日志")]),a._v(" "),e("p",[a._v("具体日志目录"),e("code",[a._v("dolphinscheduler/alert-server/logs")])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("[ERROR] 2023-03-25 04:19:46.357 +0000 org.apache.dolphinscheduler.plugin.alert.email.MailSender:[400] - Send email to [xxxx@qq.com] failed\norg.apache.commons.mail.EmailException: Sending the email to the following server failed : smtp.qq.com:465\n        at org.apache.commons.mail.Email.sendMimeMessage(Email.java:1469)\n        at org.apache.commons.mail.Email.send(Email.java:1496)\n        at org.apache.dolphinscheduler.plugin.alert.email.MailSender.getStringObjectMap(MailSender.java:372)\n        at org.apache.dolphinscheduler.plugin.alert.email.MailSender.sendMails(MailSender.java:187)\n        at org.apache.dolphinscheduler.plugin.alert.email.MailSender.sendMails(MailSender.java:141)\n        at org.apache.dolphinscheduler.plugin.alert.email.EmailAlertChannel.process(EmailAlertChannel.java:42)\n        at org.apache.dolphinscheduler.alert.AlertSenderService.alertResultHandler(AlertSenderService.java:257)\n        at org.apache.dolphinscheduler.alert.AlertSenderService.send(AlertSenderService.java:114)\n        at org.apache.dolphinscheduler.alert.AlertSenderService.run(AlertSenderService.java:81)\nCaused by: javax.mail.MessagingException: Could not connect to SMTP host: smtp.qq.com, port: 465, response: -1\n        at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:2197)\n        at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:740)\n        at javax.mail.Service.connect(Service.java:388)\n        at javax.mail.Service.connect(Service.java:246)\n        at javax.mail.Service.connect(Service.java:195)\n        at javax.mail.Transport.send0(Transport.java:254)\n        at javax.mail.Transport.send(Transport.java:124)\n        at org.apache.commons.mail.Email.sendMimeMessage(Email.java:1459)\n        ... 8 common frames omitted\n[INFO] 2023-03-25 04:19:46.364 +0000 org.apache.dolphinscheduler.plugin.alert.email.EmailAlertChannel:[61] - alert send error : alert send error.\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br"),e("span",{staticClass:"line-number"},[a._v("14")]),e("br"),e("span",{staticClass:"line-number"},[a._v("15")]),e("br"),e("span",{staticClass:"line-number"},[a._v("16")]),e("br"),e("span",{staticClass:"line-number"},[a._v("17")]),e("br"),e("span",{staticClass:"line-number"},[a._v("18")]),e("br"),e("span",{staticClass:"line-number"},[a._v("19")]),e("br"),e("span",{staticClass:"line-number"},[a._v("20")]),e("br"),e("span",{staticClass:"line-number"},[a._v("21")]),e("br"),e("span",{staticClass:"line-number"},[a._v("22")]),e("br")])])])}),[],!1,null,null,null);e.default=t.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{419:function(s,t,a){"use strict";a.r(t);var e=a(8),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("[toc]")]),s._v(" "),t("h1",{attrs:{id:"nps指南-简便稳定的内网穿透神器-开源免费"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nps指南-简便稳定的内网穿透神器-开源免费"}},[s._v("#")]),s._v(" NPS指南：简便稳定的内网穿透神器，开源免费！")]),s._v(" "),t("p",[s._v("NPS在"),t("strong",[s._v("GitHub 30k Stars")]),s._v("，是一款轻量级、高性能、功能强大的"),t("strong",[s._v("内网穿透")]),s._v("代理服务器。"),t("strong",[s._v("支持Linux、Windows、Mac系统")]),s._v("。")]),s._v(" "),t("p",[s._v("目前支持"),t("strong",[s._v("tcp、udp流量转发")]),s._v("，可支持任何"),t("strong",[s._v("tcp、udp")]),s._v("上层协议（访问内网网站、本地支付接口调试、ssh访问、远程桌面，内网dns解析等等……），此外还"),t("strong",[s._v("支持内网http代理、内网socks5代理")]),s._v("、"),t("strong",[s._v("p2p等")]),s._v("，并带有功能强大的web管理端。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2024/09/18/fSHjXRkAi8mZwLG.png",alt:"image-20240918145527340"}})]),s._v(" "),t("h2",{attrs:{id:"各种模式下nps的应用场景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#各种模式下nps的应用场景"}},[s._v("#")]),s._v(" 各种模式下NPS的应用场景")]),s._v(" "),t("p",[s._v("NPS有多种模式可以用，下面是各模式的应用场景")]),s._v(" "),t("ol",[t("li",[t("strong",[s._v("域名代理模式")]),s._v("：适用于微信公众号开发、小程序开发等场景。")]),s._v(" "),t("li",[t("strong",[s._v("TCP代理模式")]),s._v("：适用于通过外网使用SSH连接内网机器，或进行云服务器与内网服务器端口的映射。")]),s._v(" "),t("li",[t("strong",[s._v("UDP代理模式")]),s._v("：适用于非内网环境下使用内网DNS，或通过UDP协议访问内网设备的场景。")]),s._v(" "),t("li",[t("strong",[s._v("HTTP代理模式")]),s._v("：适用于在外网使用HTTP代理访问内网网站的需求。")]),s._v(" "),t("li",[t("strong",[s._v("SOCKS5代理模式")]),s._v("：适用于搭建内网穿透服务，如同VPN一样在外网访问内网资源或设备。")])]),s._v(" "),t("h2",{attrs:{id:"优势和特点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#优势和特点"}},[s._v("#")]),s._v(" 优势和特点")]),s._v(" "),t("ul",[t("li",[s._v("协议支持全面，兼容几乎所有常用协议，例如tcp、udp、http(s)、socks5、p2p、http代理...")]),s._v(" "),t("li",[s._v("全平台兼容(linux、windows、macos、群辉等)，支持一键安装为系统服务")]),s._v(" "),t("li",[s._v("控制全面，同时支持服务端和客户端控制")]),s._v(" "),t("li",[s._v("https集成，支持将后端代理和web服务转成https，同时支持多证书")]),s._v(" "),t("li",[s._v("操作简单，只需简单的配置即可在web ui上完成其余操作")]),s._v(" "),t("li",[s._v("展示信息全面，流量、系统信息、即时带宽、客户端版本等")]),s._v(" "),t("li",[s._v("扩展功能强大，该有的都有了（缓存、压缩、加密、流量限制、带宽限制、端口复用等等）")]),s._v(" "),t("li",[s._v("域名解析具备自定义header、404页面配置、host修改、站点保护、URL路由、泛解析等功能")]),s._v(" "),t("li",[s._v("服务端支持多用户和用户注册功能")])]),s._v(" "),t("h2",{attrs:{id:"官方说明文档"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#官方说明文档"}},[s._v("#")]),s._v(" 官方说明文档")]),s._v(" "),t("p",[s._v("说明文档：https://ehang-io.github.io/nps/#/use")]),s._v(" "),t("p",[s._v("源码地址：https://github.com/ehang-io/nps")]),s._v(" "),t("h2",{attrs:{id:"下载服务端安装包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载服务端安装包"}},[s._v("#")]),s._v(" 下载服务端安装包")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://github.com/ehang-io/nps/releases/download/v0.26.10/linux_amd64_server.tar.gz\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("解压")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-zxvf")]),s._v(" linux_amd64_server.tar.gz\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"安装nps"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装nps"}},[s._v("#")]),s._v(" 安装NPS")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("./nps install\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("安装完成后nps会到系统变量中,安装后的配置文件"),t("code",[s._v("/etc/nps/conf/nps.conf")])]),s._v(" "),t("ul",[t("li",[s._v("默认端口")])]),s._v(" "),t("p",[s._v("nps默认配置文件使用了80，443，8080，8024端口")]),s._v(" "),t("p",[s._v("80与443端口为域名解析模式默认端口")]),s._v(" "),t("p",[s._v("8080为web管理访问端口")]),s._v(" "),t("p",[s._v("8024为网桥端口，用于客户端与服务器通信")]),s._v(" "),t("h3",{attrs:{id:"配置文件参数说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置文件参数说明"}},[s._v("#")]),s._v(" 配置文件参数说明")]),s._v(" "),t("p",[s._v("可以根据个人需要动态调整参数，"),t("code",[s._v("/etc/nps/conf/nps.conf")]),s._v("配置参数说明：")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("名称")]),s._v(" "),t("th",[s._v("含义")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("web_port")]),s._v(" "),t("td",[s._v("web管理端口")])]),s._v(" "),t("tr",[t("td",[s._v("web_password")]),s._v(" "),t("td",[s._v("web界面管理密码")])]),s._v(" "),t("tr",[t("td",[s._v("web_username")]),s._v(" "),t("td",[s._v("web界面管理账号")])]),s._v(" "),t("tr",[t("td",[s._v("web_base_url")]),s._v(" "),t("td",[s._v("web管理主路径,用于将web管理置于代理子路径后面")])]),s._v(" "),t("tr",[t("td",[s._v("bridge_port")]),s._v(" "),t("td",[s._v("服务端客户端通信端口")])]),s._v(" "),t("tr",[t("td",[s._v("https_proxy_port")]),s._v(" "),t("td",[s._v("域名代理https代理监听端口")])]),s._v(" "),t("tr",[t("td",[s._v("http_proxy_port")]),s._v(" "),t("td",[s._v("域名代理http代理监听端口")])]),s._v(" "),t("tr",[t("td",[s._v("auth_key")]),s._v(" "),t("td",[s._v("web api密钥")])]),s._v(" "),t("tr",[t("td",[s._v("bridge_type")]),s._v(" "),t("td",[s._v("客户端与服务端连接方式kcp或tcp")])]),s._v(" "),t("tr",[t("td",[s._v("public_vkey")]),s._v(" "),t("td",[s._v("客户端以配置文件模式启动时的密钥，设置为空表示关闭客户端配置文件连接模式")])]),s._v(" "),t("tr",[t("td",[s._v("ip_limit")]),s._v(" "),t("td",[s._v("是否限制ip访问，true或false或忽略")])]),s._v(" "),t("tr",[t("td",[s._v("flow_store_interval")]),s._v(" "),t("td",[s._v("服务端流量数据持久化间隔，单位分钟，忽略表示不持久化")])]),s._v(" "),t("tr",[t("td",[s._v("log_level")]),s._v(" "),t("td",[s._v("日志输出级别")])]),s._v(" "),t("tr",[t("td",[s._v("auth_crypt_key")]),s._v(" "),t("td",[s._v("获取服务端authKey时的aes加密密钥，16位")])]),s._v(" "),t("tr",[t("td",[s._v("p2p_ip")]),s._v(" "),t("td",[s._v("服务端Ip，使用p2p模式必填")])]),s._v(" "),t("tr",[t("td",[s._v("p2p_port")]),s._v(" "),t("td",[s._v("p2p模式开启的udp端口")])]),s._v(" "),t("tr",[t("td",[s._v("pprof_ip")]),s._v(" "),t("td",[s._v("debug pprof 服务端ip")])]),s._v(" "),t("tr",[t("td",[s._v("pprof_port")]),s._v(" "),t("td",[s._v("debug pprof 端口")])]),s._v(" "),t("tr",[t("td",[s._v("disconnect_timeout")]),s._v(" "),t("td",[s._v("客户端连接超时，单位 5s，默认值 60，即 300s = 5mins")])])])]),s._v(" "),t("h3",{attrs:{id:"启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[s._v("#")]),s._v(" 启动")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("./nps start\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("strong",[s._v("如果发现没有启动成功，可以查看日志(Windows日志文件位于当前运行目录下，linux和darwin位于/var/log/nps.log)")])]),s._v(" "),t("ul",[t("li",[s._v("访问服务端ip:web服务端口（默认为8080）")]),s._v(" "),t("li",[s._v("使用用户名和密码登陆（默认admin/123，正式使用一定要更改）")]),s._v(" "),t("li",[s._v("创建客户端")])]),s._v(" "),t("h3",{attrs:{id:"服务端配置文件重载-目前支持功能不多"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#服务端配置文件重载-目前支持功能不多"}},[s._v("#")]),s._v(" 服务端配置文件重载（目前支持功能不多）")]),s._v(" "),t("p",[s._v("对于linux、darwin")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" nps reload\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("对于windows")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v(" nps.exe reload\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("strong",[s._v("说明：")]),s._v(" 仅支持部分配置重载，例如"),t("code",[s._v("allow_user_login")]),s._v(" "),t("code",[s._v("auth_crypt_key")]),s._v(" "),t("code",[s._v("auth_key")]),s._v(" "),t("code",[s._v("web_username")]),s._v(" "),t("code",[s._v("web_password")]),s._v(" 等，未来将支持更多")]),s._v(" "),t("h3",{attrs:{id:"服务端停止或重启"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#服务端停止或重启"}},[s._v("#")]),s._v(" 服务端停止或重启")]),s._v(" "),t("p",[s._v("对于linux、darwin")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" nps stop"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("restart\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("对于windows")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v(" nps.exe stop"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("restart\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"客户端应用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#客户端应用"}},[s._v("#")]),s._v(" 客户端应用")]),s._v(" "),t("h3",{attrs:{id:"先在网站中创建客户端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#先在网站中创建客户端"}},[s._v("#")]),s._v(" 先在网站中创建客户端")]),s._v(" "),t("p",[s._v("这里可以自己设置，也可以全部使用默认")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2024/09/18/9PSALXEygz6K87q.png",alt:"image-20240918144343904"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2023/10/08/25Up9LzRrZTVWi1.png",alt:"image-20230918102942267"}})]),s._v(" "),t("p",[s._v("新增成功后在页面可以看到客户端列表。此时我们创建完可以看到连接状态为离线，接下来我们注册客户端就可以。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2023/11/27/DdqF5p1t9uW4aZJ.png",alt:"image-20231117151037609"}})]),s._v(" "),t("h3",{attrs:{id:"centos"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#centos"}},[s._v("#")]),s._v(" CentOS")]),s._v(" "),t("h4",{attrs:{id:"下载客户端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载客户端"}},[s._v("#")]),s._v(" 下载客户端")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("wget -b https://github.com/ehang-io/nps/releases/download/v0.26.10/linux_amd64_client.tar.gz\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("解压")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v(" tar -zxvf linux_amd64_client.tar.gz \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"方法一-客户端无配置文件启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方法一-客户端无配置文件启动"}},[s._v("#")]),s._v(" 方法一：客户端无配置文件启动")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v(" ./npc "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-server")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${您服务器的IP地址}")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${bridge_port}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-vkey")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${vkey}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[t("p",[t("code",[s._v("${您服务器的IP地址}")]),s._v(" 是您要连接的 NPS 服务器的公网 IP 地址。")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("${bridge_port}")]),s._v(" 是 NPS 服务器的通信端口，通常在服务器端的配置中定义。")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("-vkey=${vkey}")]),s._v(": 指定 NPS 客户端的验证密钥。这是服务器和客户端进行通信时的身份验证信息，必须与服务器的配置匹配。取Web页面中显示的密钥")])])]),s._v(" "),t("h4",{attrs:{id:"方法二-配置文件启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方法二-配置文件启动"}},[s._v("#")]),s._v(" 方法二：配置文件启动")]),s._v(" "),t("p",[s._v("这里用Tcp模式举例，填写配置文件")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[common]\n# 填写登录后首页显示的客户端连接端口\n# 也就是：\n# ${您服务器的IP地址} 是您要连接的 NPS 服务器的公网 IP 地址。\n# ${bridge_port} 是 NPS 服务器的通信端口，通常在服务器端的配置中定义。\nserver_addr=${您服务器的IP地址}:${bridge_port}\nconn_type=tcp\n# vkey填写上面的验证密钥\nvkey=xxxxx\n# 断线重连\nauto_reconnection=true\n\n[tcp]\n# 模式\nmode=tcp\n# 需要转发的地址\ntarget_addr=127.0.0.1:8080\n# NPS对外提供的服务端口\nserver_port=18888\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("p",[s._v("说明：")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("项")]),s._v(" "),t("th",[s._v("含义")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("mode")]),s._v(" "),t("td",[s._v("tcp")])]),s._v(" "),t("tr",[t("td",[s._v("server_port")]),s._v(" "),t("td",[s._v("在服务端的代理端口")])]),s._v(" "),t("tr",[t("td",[s._v("tartget_addr")]),s._v(" "),t("td",[s._v("内网目标")])])])]),s._v(" "),t("p",[t("strong",[s._v("启动")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" ./npc "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-config")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("conf/npc.conf "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[I] [npc.go:231]  the version of client is 0.26.10, the core version of client is 0.26.0\n[I] [control.go:97]  Loading configuration file conf/npc.conf successfully\n[N] [control.go:174]  web access login username:user password:xxx\n[I] [client.go:72]  Successful connection with server xxx:18888\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("此时通过我们公网的地址进行访问就可以了。")]),s._v(" "),t("h3",{attrs:{id:"windows客户端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#windows客户端"}},[s._v("#")]),s._v(" Windows客户端")]),s._v(" "),t("h4",{attrs:{id:"下载windows客户端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载windows客户端"}},[s._v("#")]),s._v(" 下载Windows客户端")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/ehang-io/nps/releases/download/v0.26.10/windows_amd64_client.tar.gz",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/ehang-io/nps/releases/download/v0.26.10/windows_amd64_client.tar.gz"),t("OutboundLink")],1)]),s._v(" "),t("h4",{attrs:{id:"新建客户端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#新建客户端"}},[s._v("#")]),s._v(" 新建客户端")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2023/10/08/E5byum4fzlOgKei.png",alt:"image-20230918143844276"}})]),s._v(" "),t("p",[s._v("填写"),t("code",[s._v("唯一验证密钥")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2023/10/08/5XSazkwUgWYxf8F.png",alt:"image-20230918143938877"}})]),s._v(" "),t("p",[t("code",[s._v("TCP隧道配置")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2023/10/08/IMKPE5JrRyabzCv.png",alt:"image-20230918112044103"}})]),s._v(" "),t("p",[s._v("配置TCP隧道模式")]),s._v(" "),t("p",[t("code",[s._v("npc.conf")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[common]\nserver_addr=${你的服务器公网IP地址}:${bridge_port}\nconn_type=tcp\nvkey=puiskdnf!ofa2\nauto_reconnection=true\nmax_conn=1000\ncrypt=false\ncompress=false\ndisconnect_timeout=60\n\n\n[tcp]\nmode=tcp\ntarget_addr=3389\nserver_port=28085\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("p",[s._v("直接双击"),t("code",[s._v("npc.exe")]),s._v("会自动读取"),t("code",[s._v("conf/npc.conf")]),s._v("配置文件")]),s._v(" "),t("p",[s._v("windows启动配置")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("./npc.exe -server=${你的服务器公网IP地址}:${bridge_port} -vkey=xxx -config=C:\\Users\\Admin\\Desktop\\windows_amd64_client\\conf\\npc.conf\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("通过远程连接连接Windows服务器即可")]),s._v(" "),t("h4",{attrs:{id:"配置windows开机自动启动远程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置windows开机自动启动远程"}},[s._v("#")]),s._v(" 配置Windows开机自动启动远程")]),s._v(" "),t("p",[s._v("创建启动脚本"),t("code",[s._v("start-npc.bat")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('# 这一段是后台运行的命令\n@echo off\nif "%1" == "h" goto begin\nmshta vbscript:createobject("wscript.shell").run("%~nx0 h",0)(window.close)&&exit\n:begin\n\n# 这一段是启动\ncd C:\\Users\\Admin\\Desktop\\windows_amd64_client\n.\\npc.exe -server=${你的服务器公网IP地址}:28083 -vkey=puiskdnf!ofa2 -config=C:\\Users\\Admin\\Desktop\\windows_amd64_client\\conf\\npc.conf\npause\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("blockquote",[t("p",[s._v("主要两个步骤：")]),s._v(" "),t("ol",[t("li",[s._v("进入npc目录")]),s._v(" "),t("li",[s._v("启动npc.exe并制定配置文件路径")])])]),s._v(" "),t("p",[s._v("在电脑"),t("code",[s._v("运行")]),s._v("中输入"),t("code",[s._v("shell:startup")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2023/10/08/6aYto5JySTlxIE9.png",alt:"image-20230918154723262"}})]),s._v(" "),t("p",[s._v("自动打开这个目录")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2023/10/08/efPW3LUcutMq9Vy.png",alt:"image-20230918154446610"}})]),s._v(" "),t("p",[s._v("将"),t("code",[s._v("start-npc.bat")]),s._v("文件或者"),t("code",[s._v("start-npc.bat")]),s._v("文件的快捷方式，拖入这个目录下，就完成了开机自动启动配置。")]),s._v(" "),t("h3",{attrs:{id:"mac-客户端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mac-客户端"}},[s._v("#")]),s._v(" Mac 客户端")]),s._v(" "),t("p",[s._v("下载地址：https://github.com/ehang-io/nps/releases/download/v0.26.10/darwin_amd64_client.tar.gz")]),s._v(" "),t("p",[s._v("其他步骤与Linux相同")]),s._v(" "),t("h3",{attrs:{id:""}},[t("a",{staticClass:"header-anchor",attrs:{href:"#"}},[s._v("#")])])])}),[],!1,null,null,null);t.default=n.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[178],{545:function(s,a,t){"use strict";t.r(a);var e=t(8),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"提升性能-elasticsearch-线程池的详细介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#提升性能-elasticsearch-线程池的详细介绍"}},[s._v("#")]),s._v(" 提升性能：Elasticsearch 线程池的详细介绍")]),s._v(" "),a("p",[s._v("Elasticsearch使用多个线程池（thread pool）来管理内存消耗和处理并发请求。这些线程池负责不同类型的任务，通过线程和队列的配置来平衡系统的资源使用和性能。在队列中，挂起的请求可以暂时被保存而不是直接丢弃，从而减少因系统资源不足而导致的请求失败。")]),s._v(" "),a("p",[s._v("文章详细介绍了各类线程池的配置方法及其对应的场景，通过优化线程池，特别是在高并发环境下，能够减少请求失败，提升整体系统的稳定性和响应速度。")]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_1-线程池概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-线程池概述"}},[s._v("#")]),s._v(" 1. 线程池概述")]),s._v(" "),a("p",[s._v("线程池是Elasticsearch中用于处理不同类型任务的核心机制。每个节点都有多个线程池，负责处理不同类型的操作。这些线程池的类型和配置可以显著影响Elasticsearch集群的性能和资源使用。")]),s._v(" "),a("h3",{attrs:{id:"主要线程池概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#主要线程池概述"}},[s._v("#")]),s._v(" 主要线程池概述")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("Generic 线程池")]),s._v("：用于处理通用的后台任务，如节点发现等操作，具备动态扩展能力。")]),s._v(" "),a("li",[a("strong",[s._v("Index 线程池")]),s._v("：负责文档的索引和删除操作，配置固定数量的线程。")]),s._v(" "),a("li",[a("strong",[s._v("Search 线程池")]),s._v("：专门处理搜索、计数和建议操作，确保高效的搜索性能。")]),s._v(" "),a("li",[a("strong",[s._v("Get 线程池")]),s._v("：用于处理单个文档的获取请求，处理高频查询操作。")]),s._v(" "),a("li",[a("strong",[s._v("Bulk 线程池")]),s._v("：处理批量索引、更新和删除请求，优化批量操作的并发处理。")]),s._v(" "),a("li",[a("strong",[s._v("Snapshot 线程池")]),s._v("：用于创建和恢复快照操作，具备动态调整线程数的能力。")]),s._v(" "),a("li",[a("strong",[s._v("Warmer 线程池")]),s._v("：负责分段预热操作，确保新分段在被查询前已准备就绪。")]),s._v(" "),a("li",[a("strong",[s._v("Refresh 线程池")]),s._v("：执行索引刷新操作，将新数据从内存持久化到磁盘。")]),s._v(" "),a("li",[a("strong",[s._v("Listener 线程池")]),s._v("：用于 Java 客户端异步操作监听，确保监听操作独立于主线程池执行。")])]),s._v(" "),a("h3",{attrs:{id:"_1-1-线程池的作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-线程池的作用"}},[s._v("#")]),s._v(" 1.1 线程池的作用")]),s._v(" "),a("p",[s._v("Elasticsearch中的每个线程池都有其特定的用途，例如：")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("Generic")]),s._v(" 线程池负责后台操作，例如节点发现、定时任务。")]),s._v(" "),a("li",[a("strong",[s._v("Search")]),s._v(" 线程池主要用于搜索、建议等操作。")]),s._v(" "),a("li",[a("strong",[s._v("Write")]),s._v(" 线程池用于处理索引、删除、更新文档等操作。")])]),s._v(" "),a("p",[s._v("合理配置这些线程池能够有效管理系统资源并优化性能。")]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-线程池的详细介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-线程池的详细介绍"}},[s._v("#")]),s._v(" 2. 线程池的详细介绍")]),s._v(" "),a("p",[s._v("Elasticsearch中的线程池在处理并发操作、优化资源使用和提高性能方面起着至关重要的作用。下面将详细介绍 "),a("code",[s._v("generic")]),s._v("、"),a("code",[s._v("index")]),s._v("、"),a("code",[s._v("search")]),s._v("、"),a("code",[s._v("get")]),s._v("、"),a("code",[s._v("bulk")]),s._v("、"),a("code",[s._v("snapshot")]),s._v("、"),a("code",[s._v("warmer")]),s._v("、"),a("code",[s._v("refresh")]),s._v(" 和 "),a("code",[s._v("listener")]),s._v(" 这些常见线程池的用途和配置。")]),s._v(" "),a("p",[a("strong",[s._v("说明：")]),s._v(" "),a("code",[s._v("${node.processors}")]),s._v(" 为 "),a("code",[s._v("node.processors: 2")]),s._v(" 设置的值。")]),s._v(" "),a("p",[s._v("系统会自动检测处理器的数量，并基于它自动设置线程池设置。在某些情况下，覆盖检测到的处理器数量可能很有用。这可以通过显式设置 node.processors 设置来完成。")]),s._v(" "),a("h3",{attrs:{id:"查看配置方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看配置方法"}},[s._v("#")]),s._v(" 查看配置方法")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("GET _nodes/thread_pool\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2024/10/09/UYh7fJQ3oOtqbA2.png",alt:"image-20241009173510275"}})]),s._v(" "),a("h3",{attrs:{id:"generic线程池"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#generic线程池"}},[s._v("#")]),s._v(" generic线程池")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("用途")]),s._v("：用于通用操作，如后台节点发现、一些周期性任务等。")]),s._v(" "),a("li",[a("strong",[s._v("线程池类型")]),s._v("："),a("code",[s._v("scaling")])]),s._v(" "),a("li",[a("strong",[s._v("说明")]),s._v("：线程数可以根据需求动态扩展。")])]),s._v(" "),a("h4",{attrs:{id:"配置方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置方法"}},[s._v("#")]),s._v(" 配置方法")]),s._v(" "),a("p",[s._v("在"),a("code",[s._v("elasticsearch.yml")]),s._v("配置文件中添加以下内容：")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.generic.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" scaling\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.generic.core")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.generic.max")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.generic.keep_alive")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 30s\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"search线程池"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#search线程池"}},[s._v("#")]),s._v(" search线程池")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("用途")]),s._v("：用于处理搜索、计数、推荐等操作。")]),s._v(" "),a("li",[a("strong",[s._v("线程池类型")]),s._v("："),a("code",[s._v("fixed_auto_queue_size")])]),s._v(" "),a("li",[a("strong",[s._v("大小")]),s._v("："),a("code",[s._v("int((${node.processors} * 3) / 2) + 1")])]),s._v(" "),a("li",[a("strong",[s._v("初始队列大小")]),s._v("：1000")]),s._v(" "),a("li",[a("strong",[s._v("说明")]),s._v("：该线程池的大小默认是根据系统处理器的数量自动计算的。")])]),s._v(" "),a("h4",{attrs:{id:"配置方法-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置方法-2"}},[s._v("#")]),s._v(" 配置方法")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.search.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" fixed_auto_queue_size\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.search.size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.search.queue_size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"search-throttled线程池"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#search-throttled线程池"}},[s._v("#")]),s._v(" search_throttled线程池")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("用途")]),s._v("：用于处理搜索受限索引上的操作，如"),a("code",[s._v("count/search/suggest/get")]),s._v("。")]),s._v(" "),a("li",[a("strong",[s._v("线程池类型")]),s._v("："),a("code",[s._v("fixed_auto_queue_size")])]),s._v(" "),a("li",[a("strong",[s._v("大小")]),s._v("：1")]),s._v(" "),a("li",[a("strong",[s._v("初始队列大小")]),s._v("：100")]),s._v(" "),a("li",[a("strong",[s._v("说明")]),s._v("：由于受限索引通常不会有大量的并发操作，因此此线程池配置为单线程。")])]),s._v(" "),a("h4",{attrs:{id:"配置方法-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置方法-3"}},[s._v("#")]),s._v(" 配置方法")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.search_throttled.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" fixed_auto_queue_size\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.search_throttled.size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.search_throttled.queue_size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"get线程池"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#get线程池"}},[s._v("#")]),s._v(" get线程池")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("用途")]),s._v("：处理获取文档的操作。")]),s._v(" "),a("li",[a("strong",[s._v("线程池类型")]),s._v("："),a("code",[s._v("fixed")])]),s._v(" "),a("li",[a("strong",[s._v("大小")]),s._v("：等于分配的处理器数。")]),s._v(" "),a("li",[a("strong",[s._v("队列大小")]),s._v("：1000")]),s._v(" "),a("li",[a("strong",[s._v("说明")]),s._v("：此线程池用于检索单个文档的操作。")])]),s._v(" "),a("h4",{attrs:{id:"配置方法-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置方法-4"}},[s._v("#")]),s._v(" 配置方法")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.get.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" fixed\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.get.size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.get.queue_size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"analyze线程池"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#analyze线程池"}},[s._v("#")]),s._v(" analyze线程池")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("用途")]),s._v("：用于分析请求，如文本分词和分析操作。")]),s._v(" "),a("li",[a("strong",[s._v("线程池类型")]),s._v("："),a("code",[s._v("fixed")])]),s._v(" "),a("li",[a("strong",[s._v("大小")]),s._v("：1")]),s._v(" "),a("li",[a("strong",[s._v("队列大小")]),s._v("：16")]),s._v(" "),a("li",[a("strong",[s._v("说明")]),s._v("：分析操作通常是短期操作，因此此线程池的配置较小。")])]),s._v(" "),a("h4",{attrs:{id:"配置方法-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置方法-5"}},[s._v("#")]),s._v(" 配置方法")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.analyze.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" fixed\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.analyze.size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.analyze.queue_size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"write线程池"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#write线程池"}},[s._v("#")]),s._v(" write线程池")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("用途")]),s._v("：用于处理单文档索引、删除、更新以及批量请求。")]),s._v(" "),a("li",[a("strong",[s._v("线程池类型")]),s._v("："),a("code",[s._v("fixed")])]),s._v(" "),a("li",[a("strong",[s._v("大小")]),s._v("：等于分配的处理器数。")]),s._v(" "),a("li",[a("strong",[s._v("队列大小")]),s._v("：10000")]),s._v(" "),a("li",[a("strong",[s._v("说明")]),s._v("：此线程池负责所有与写入相关的操作，队列较大，以处理潜在的大量写入请求。")])]),s._v(" "),a("h4",{attrs:{id:"配置方法-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置方法-6"}},[s._v("#")]),s._v(" 配置方法")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.write.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" fixed\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.write.size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.write.queue_size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10000")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"snapshot线程池"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#snapshot线程池"}},[s._v("#")]),s._v(" snapshot线程池")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("用途")]),s._v("：用于快照和恢复操作。")]),s._v(" "),a("li",[a("strong",[s._v("线程池类型")]),s._v("："),a("code",[s._v("scaling")])]),s._v(" "),a("li",[a("strong",[s._v("保活时间")]),s._v("：5分钟")]),s._v(" "),a("li",[a("strong",[s._v("最大线程池大小")]),s._v("："),a("code",[s._v("min(5, (${node.processors}) / 2)")])]),s._v(" "),a("li",[a("strong",[s._v("说明")]),s._v("：快照和恢复操作通常是后台操作，因此使用扩展线程池来根据负载动态调整。")])]),s._v(" "),a("h4",{attrs:{id:"配置方法-7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置方法-7"}},[s._v("#")]),s._v(" 配置方法")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.snapshot.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" scaling\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.snapshot.keep_alive")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 5m\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.snapshot.max")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"snapshot-meta线程池"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#snapshot-meta线程池"}},[s._v("#")]),s._v(" snapshot_meta线程池")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("用途")]),s._v("：用于快照库元数据的读取操作。")]),s._v(" "),a("li",[a("strong",[s._v("线程池类型")]),s._v("："),a("code",[s._v("scaling")])]),s._v(" "),a("li",[a("strong",[s._v("保活时间")]),s._v("：5分钟")]),s._v(" "),a("li",[a("strong",[s._v("最大线程池大小")]),s._v("："),a("code",[s._v("min(50, (${node.processors} * 3))")])])]),s._v(" "),a("h4",{attrs:{id:"配置方法-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置方法-8"}},[s._v("#")]),s._v(" 配置方法")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.snapshot_meta.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" scaling\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.snapshot_meta.keep_alive")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 5m\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.snapshot_meta.max")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"warmer线程池"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#warmer线程池"}},[s._v("#")]),s._v(" warmer线程池")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("用途")]),s._v("：用于段预热操作。")]),s._v(" "),a("li",[a("strong",[s._v("线程池类型")]),s._v("："),a("code",[s._v("scaling")])]),s._v(" "),a("li",[a("strong",[s._v("保活时间")]),s._v("：5分钟")]),s._v(" "),a("li",[a("strong",[s._v("最大线程池大小")]),s._v("："),a("code",[s._v("min(5, (${node.processors}) / 2)")])]),s._v(" "),a("li",[a("strong",[s._v("说明")]),s._v("：当新段写入时，Elasticsearch通过预热操作优化性能。")])]),s._v(" "),a("h4",{attrs:{id:"配置方法-9"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置方法-9"}},[s._v("#")]),s._v(" 配置方法")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.warmer.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" scaling\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.warmer.keep_alive")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 5m\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.warmer.max")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"refresh线程池"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#refresh线程池"}},[s._v("#")]),s._v(" refresh线程池")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("用途")]),s._v("：用于刷新操作，确保数据能够及时搜索到。")]),s._v(" "),a("li",[a("strong",[s._v("线程池类型")]),s._v("："),a("code",[s._v("scaling")])]),s._v(" "),a("li",[a("strong",[s._v("保活时间")]),s._v("：5分钟")]),s._v(" "),a("li",[a("strong",[s._v("最大线程池大小")]),s._v("："),a("code",[s._v("min(10, (${node.processors}) / 2)")])]),s._v(" "),a("li",[a("strong",[s._v("说明")]),s._v("：刷新操作可以在后台执行，并随着负载的变化进行扩展。")])]),s._v(" "),a("h4",{attrs:{id:"配置方法-10"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置方法-10"}},[s._v("#")]),s._v(" 配置方法")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.refresh.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" scaling\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.refresh.keep_alive")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 5m\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.refresh.max")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"listener线程池"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#listener线程池"}},[s._v("#")]),s._v(" listener线程池")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("用途")]),s._v("：主要用于Java客户端在监听器设置为"),a("code",[s._v("true")]),s._v("时执行操作。")]),s._v(" "),a("li",[a("strong",[s._v("线程池类型")]),s._v("："),a("code",[s._v("scaling")])]),s._v(" "),a("li",[a("strong",[s._v("最大线程池大小")]),s._v("："),a("code",[s._v("min(10, (${node.processors}) / 2)")])]),s._v(" "),a("li",[a("strong",[s._v("说明")]),s._v("：此线程池处理来自客户端的操作监听，确保操作结果能够及时返回给客户端。")])]),s._v(" "),a("h4",{attrs:{id:"配置方法-11"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置方法-11"}},[s._v("#")]),s._v(" 配置方法")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.listener.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" scaling\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.listener.max")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"fetch-shard-started线程池"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fetch-shard-started线程池"}},[s._v("#")]),s._v(" fetch_shard_started线程池")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("用途")]),s._v("：用于列出分片状态。")]),s._v(" "),a("li",[a("strong",[s._v("线程池类型")]),s._v("："),a("code",[s._v("scaling")])]),s._v(" "),a("li",[a("strong",[s._v("保活时间")]),s._v("：5分钟")]),s._v(" "),a("li",[a("strong",[s._v("最大线程池大小")]),s._v("：2 * 分配的处理器数。")]),s._v(" "),a("li",[a("strong",[s._v("说明")]),s._v("：用于处理分片恢复过程中列出分片状态的操作。")])]),s._v(" "),a("h4",{attrs:{id:"配置方法-12"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置方法-12"}},[s._v("#")]),s._v(" 配置方法")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.fetch_shard_started.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" scaling\nthread_pool.fetch\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("_shard_started.keep_alive")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 5m\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.fetch_shard_started.max")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"fetch-shard-store线程池"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fetch-shard-store线程池"}},[s._v("#")]),s._v(" fetch_shard_store线程池")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("用途")]),s._v("：用于处理分片存储列表操作。")]),s._v(" "),a("li",[a("strong",[s._v("线程池类型")]),s._v("："),a("code",[s._v("scaling")])]),s._v(" "),a("li",[a("strong",[s._v("保活时间")]),s._v("：5分钟")]),s._v(" "),a("li",[a("strong",[s._v("最大线程池大小")]),s._v("：2 * 分配的处理器数。")]),s._v(" "),a("li",[a("strong",[s._v("说明")]),s._v("：处理从分片存储中获取数据的操作。")])]),s._v(" "),a("h4",{attrs:{id:"配置方法-13"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置方法-13"}},[s._v("#")]),s._v(" 配置方法")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.fetch_shard_store.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" scaling\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.fetch_shard_store.keep_alive")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 5m\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.fetch_shard_store.max")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"flush线程池"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#flush线程池"}},[s._v("#")]),s._v(" flush线程池")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("用途")]),s._v("：用于定期将内存中的数据写入磁盘。")]),s._v(" "),a("li",[a("strong",[s._v("线程池类型")]),s._v("："),a("code",[s._v("scaling")])]),s._v(" "),a("li",[a("strong",[s._v("保活时间")]),s._v("：5分钟")]),s._v(" "),a("li",[a("strong",[s._v("最大线程池大小")]),s._v("："),a("code",[s._v("min(10, (${node.processors}))")])]),s._v(" "),a("li",[a("strong",[s._v("说明")]),s._v("：定期刷新操作确保Elasticsearch的数据一致性与持久性。")])]),s._v(" "),a("h4",{attrs:{id:"配置方法-14"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置方法-14"}},[s._v("#")]),s._v(" 配置方法")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.flush.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" scaling\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.flush.keep_alive")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 5m\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.flush.max")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"force-merge线程池"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#force-merge线程池"}},[s._v("#")]),s._v(" force_merge线程池")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("用途")]),s._v("：用于段合并操作。")]),s._v(" "),a("li",[a("strong",[s._v("线程池类型")]),s._v("："),a("code",[s._v("fixed")])]),s._v(" "),a("li",[a("strong",[s._v("大小")]),s._v("：1")]),s._v(" "),a("li",[a("strong",[s._v("队列大小")]),s._v("："),a("code",[s._v("Integer.MAX_VALUE")])]),s._v(" "),a("li",[a("strong",[s._v("说明")]),s._v("：段合并是资源密集型操作，因此强制合并操作被限制为单线程。")])]),s._v(" "),a("h4",{attrs:{id:"配置方法-15"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置方法-15"}},[s._v("#")]),s._v(" 配置方法")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.force_merge.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" fixed\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.force_merge.size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.force_merge.queue_size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("-1")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"management线程池"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#management线程池"}},[s._v("#")]),s._v(" management线程池")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("用途")]),s._v("：处理集群的后台管理任务，如集群状态更新。")]),s._v(" "),a("li",[a("strong",[s._v("线程池类型")]),s._v("："),a("code",[s._v("scaling")])]),s._v(" "),a("li",[a("strong",[s._v("最大线程池大小")]),s._v("：5")]),s._v(" "),a("li",[a("strong",[s._v("说明")]),s._v("：用于处理集群管理任务，确保集群状态和任务分发的稳定性。")])]),s._v(" "),a("h4",{attrs:{id:"配置方法-16"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置方法-16"}},[s._v("#")]),s._v(" 配置方法")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.management.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" scaling\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.management.max")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"system-read线程池"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#system-read线程池"}},[s._v("#")]),s._v(" system_read线程池")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("用途")]),s._v("：用于处理系统级别的读取请求。")]),s._v(" "),a("li",[a("strong",[s._v("线程池类型")]),s._v("："),a("code",[s._v("fixed_auto_queue_size")])]),s._v(" "),a("li",[a("strong",[s._v("大小")]),s._v("：2")]),s._v(" "),a("li",[a("strong",[s._v("说明")]),s._v("：专门为系统级别的读取操作优化，队列大小根据负载动态调整。")])]),s._v(" "),a("h4",{attrs:{id:"配置方法-17"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置方法-17"}},[s._v("#")]),s._v(" 配置方法")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.system_read.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" fixed_auto_queue_size\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.system_read.size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"system-write线程池"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#system-write线程池"}},[s._v("#")]),s._v(" system_write线程池")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("用途")]),s._v("：用于处理系统级别的写入请求。")]),s._v(" "),a("li",[a("strong",[s._v("线程池类型")]),s._v("："),a("code",[s._v("fixed_auto_queue_size")])]),s._v(" "),a("li",[a("strong",[s._v("大小")]),s._v("：2")]),s._v(" "),a("li",[a("strong",[s._v("说明")]),s._v("：类似"),a("code",[s._v("system_read")]),s._v("，专注于处理系统写入操作。")])]),s._v(" "),a("h4",{attrs:{id:"配置方法-18"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置方法-18"}},[s._v("#")]),s._v(" 配置方法")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.system_write.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" fixed_auto_queue_size\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.system_write.size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"system-critical-read线程池"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#system-critical-read线程池"}},[s._v("#")]),s._v(" system_critical_read线程池")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("用途")]),s._v("：处理关键的系统级别读取操作。")]),s._v(" "),a("li",[a("strong",[s._v("线程池类型")]),s._v("："),a("code",[s._v("fixed_auto_queue_size")])]),s._v(" "),a("li",[a("strong",[s._v("大小")]),s._v("：1")]),s._v(" "),a("li",[a("strong",[s._v("说明")]),s._v("：为关键系统操作设计，确保读取操作能在高负载情况下得到优先处理。")])]),s._v(" "),a("h4",{attrs:{id:"配置方法-19"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置方法-19"}},[s._v("#")]),s._v(" 配置方法")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.system_critical_read.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" fixed_auto_queue_size\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.system_critical_read.size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"system-critical-write线程池"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#system-critical-write线程池"}},[s._v("#")]),s._v(" system_critical_write线程池")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("用途")]),s._v("：处理关键的系统级别写入操作。")]),s._v(" "),a("li",[a("strong",[s._v("线程池类型")]),s._v("："),a("code",[s._v("fixed_auto_queue_size")])]),s._v(" "),a("li",[a("strong",[s._v("大小")]),s._v("：1")]),s._v(" "),a("li",[a("strong",[s._v("说明")]),s._v("：同样针对关键系统操作，确保写入操作的顺利进行。")])]),s._v(" "),a("h4",{attrs:{id:"配置方法-20"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置方法-20"}},[s._v("#")]),s._v(" 配置方法")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.system_critical_write.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" fixed_auto_queue_size\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.system_critical_write.size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"watcher线程池"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#watcher线程池"}},[s._v("#")]),s._v(" watcher线程池")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("用途")]),s._v("：处理Watchers任务，通常用于监控任务。")]),s._v(" "),a("li",[a("strong",[s._v("线程池类型")]),s._v("："),a("code",[s._v("scaling")])]),s._v(" "),a("li",[a("strong",[s._v("保活时间")]),s._v("：5分钟")]),s._v(" "),a("li",[a("strong",[s._v("最大线程池大小")]),s._v("：1")]),s._v(" "),a("li",[a("strong",[s._v("说明")]),s._v("：Elasticsearch的监控和报警框架Watcher依赖此线程池进行触发和处理。")])]),s._v(" "),a("h4",{attrs:{id:"配置方法-21"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置方法-21"}},[s._v("#")]),s._v(" 配置方法")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.watcher.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" scaling\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.watcher.keep_alive")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 5m\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool.watcher.max")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("hr"),s._v(" "),a("h2",{attrs:{id:"_3-线程池类型和参数配置方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-线程池类型和参数配置方法"}},[s._v("#")]),s._v(" 3. 线程池类型和参数配置方法")]),s._v(" "),a("p",[s._v("Elasticsearch支持不同类型的线程池，适用于不同场景和工作负载。")]),s._v(" "),a("h3",{attrs:{id:"_3-1-固定大小线程池-fixed"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-固定大小线程池-fixed"}},[s._v("#")]),s._v(" 3.1 固定大小线程池（fixed）")]),s._v(" "),a("p",[s._v("固定大小线程池用于处理请求，线程池大小固定，且有一个（可选的）有界队列用于处理无法立即执行的挂起请求。")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("size")]),s._v("：控制线程池中的线程数量。")]),s._v(" "),a("li",[a("strong",[s._v("queue_size")]),s._v("：控制挂起请求队列的大小，默认为"),a("code",[s._v("-1")]),s._v("表示无界。当请求到达且队列已满时，系统会中止请求。")])]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("write")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("queue_size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"_3-2-固定自动队列大小线程池-fixed-auto-queue-size"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-固定自动队列大小线程池-fixed-auto-queue-size"}},[s._v("#")]),s._v(" 3.2 固定自动队列大小线程池（fixed_auto_queue_size）")]),s._v(" "),a("p",[s._v("该类型线程池类似于固定大小线程池，但挂起请求队列的大小会根据Little's Law的计算动态调整。随着处理的请求数量增加，队列大小可能会调整。")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("size")]),s._v("：线程池大小。")]),s._v(" "),a("li",[a("strong",[s._v("queue_size")]),s._v("：初始队列大小。")]),s._v(" "),a("li",[a("strong",[s._v("min_queue_size")]),s._v("：队列的最小大小。")]),s._v(" "),a("li",[a("strong",[s._v("max_queue_size")]),s._v("：队列的最大大小。")]),s._v(" "),a("li",[a("strong",[s._v("auto_queue_frame_size")]),s._v("：控制在调整队列之前需要完成的操作数量。")]),s._v(" "),a("li",[a("strong",[s._v("target_response_time")]),s._v("：目标响应时间，用于动态调整队列大小。")])]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("search")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("queue_size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("min_queue_size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("max_queue_size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("auto_queue_frame_size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("target_response_time")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 1s\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"_3-3-动态扩展线程池-scaling"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-动态扩展线程池-scaling"}},[s._v("#")]),s._v(" 3.3 动态扩展线程池（scaling）")]),s._v(" "),a("p",[s._v("动态扩展线程池会根据工作负载动态调整线程数量。线程池的线程数量在"),a("code",[s._v("core")]),s._v("（核心线程数）和"),a("code",[s._v("max")]),s._v("（最大线程数）之间浮动。")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("core")]),s._v("：线程池的最小线程数。")]),s._v(" "),a("li",[a("strong",[s._v("max")]),s._v("：线程池的最大线程数。")]),s._v(" "),a("li",[a("strong",[s._v("keep_alive")]),s._v("：线程在无工作负载时保持活动的时间。")])]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("thread_pool")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("warmer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("core")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("max")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("keep_alive")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 2m\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("hr"),s._v(" "),a("h2",{attrs:{id:"_4-分配处理器设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-分配处理器设置"}},[s._v("#")]),s._v(" 4. 分配处理器设置")]),s._v(" "),a("p",[s._v("线程池的大小通常是基于系统中分配的处理器数量决定的，合理配置处理器可以显著提升性能。")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("node.processors")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("通过设置 "),a("code",[s._v("node.processors")]),s._v(" 参数，用户可以限制分配给线程池的处理器数量。")]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_5-修改线程池配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-修改线程池配置"}},[s._v("#")]),s._v(" 5. 修改线程池配置")]),s._v(" "),a("p",[s._v("可以通过 "),a("code",[s._v("elasticsearch.yml")]),s._v(" 文件或动态更新API来调整线程池的配置。例如，动态更新索引线程池的配置：")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[s._v("PUT /_cluster/settings\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"persistent"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"thread_pool.index.size"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"thread_pool.index.queue_size"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("hr"),s._v(" "),a("h2",{attrs:{id:"_6-总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-总结"}},[s._v("#")]),s._v(" 6. 总结")]),s._v(" "),a("p",[s._v("Elasticsearch中的线程池机制极大地提高了系统的资源利用率和性能。通过合理配置各类线程池，用户能够根据自己的使用场景来优化集群的运行效率。在高并发环境下，优化线程池的配置尤其重要，能够有效地避免系统过载并减少请求失败的情况。")]),s._v(" "),a("p",[a("strong",[s._v("注：")])]),s._v(" "),a("p",[s._v("本文档介绍版本为：7.14 ，其他版本可能会有所不同。具体可以参考官方文档：https://www.elastic.co/guide/en/elasticsearch/reference/7.14/modules-threadpool.html")])])}),[],!1,null,null,null);a.default=r.exports}}]);
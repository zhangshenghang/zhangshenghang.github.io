(window.webpackJsonp=window.webpackJsonp||[]).push([[144],{509:function(s,a,e){"use strict";e.r(a);var t=e(8),r=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("[toc]")]),s._v(" "),a("h1",{attrs:{id:"关于apache-dolphinscheduler"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关于apache-dolphinscheduler"}},[s._v("#")]),s._v(" 关于Apache DolphinScheduler")]),s._v(" "),a("h2",{attrs:{id:"简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[s._v("#")]),s._v(" 简介")]),s._v(" "),a("p",[s._v("Apache DolphinScheduler 是一个分布式易扩展的可视化DAG工作流任务调度开源系统。适用于企业级场景，提供了一个可视化操作任务、工作流和全生命周期数据处理过程的解决方案。")]),s._v(" "),a("p",[s._v("Apache DolphinScheduler 旨在解决复杂的大数据任务依赖关系，并为应用程序提供数据和各种 OPS 编排中的关系。 解决数据研发ETL依赖错综复杂，无法监控任务健康状态的问题。 DolphinScheduler 以 DAG（Directed Acyclic Graph，DAG）流式方式组装任务，可以及时监控任务的执行状态，支持重试、指定节点恢复失败、暂停、恢复、终止任务等操作。")]),s._v(" "),a("h2",{attrs:{id:"特性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#特性"}},[s._v("#")]),s._v(" 特性")]),s._v(" "),a("h3",{attrs:{id:"简单易用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简单易用"}},[s._v("#")]),s._v(" 简单易用")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("可视化 DAG")]),s._v(": 用户友好的，通过拖拽定义工作流的，运行时控制工具")]),s._v(" "),a("li",[a("strong",[s._v("模块化操作")]),s._v(": 模块化有助于轻松定制和维护。")])]),s._v(" "),a("h3",{attrs:{id:"丰富的使用场景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#丰富的使用场景"}},[s._v("#")]),s._v(" 丰富的使用场景")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("支持多种任务类型")]),s._v(": 支持Shell、MR、Spark、SQL等10余种任务类型，支持跨语言，易于扩展")]),s._v(" "),a("li",[a("strong",[s._v("丰富的工作流操作")]),s._v(": 工作流程可以定时、暂停、恢复和停止，便于维护和控制全局和本地参数。")])]),s._v(" "),a("h3",{attrs:{id:"high-reliability"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#high-reliability"}},[s._v("#")]),s._v(" High Reliability")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("高可靠性")]),s._v(": 去中心化设计，确保稳定性。 原生 HA 任务队列支持，提供过载容错能力。 DolphinScheduler 能提供高度稳健的环境。")])]),s._v(" "),a("h3",{attrs:{id:"high-scalability"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#high-scalability"}},[s._v("#")]),s._v(" High Scalability")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("高扩展性")]),s._v(": 支持多租户和在线资源管理。支持每天10万个数据任务的稳定运行。")])]),s._v(" "),a("h2",{attrs:{id:"软硬件环境建议配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#软硬件环境建议配置"}},[s._v("#")]),s._v(" 软硬件环境建议配置")]),s._v(" "),a("p",[s._v("DolphinScheduler 作为一款开源分布式工作流任务调度系统，可以很好地部署和运行在 Intel 架构服务器及主流虚拟化环境下，并支持主流的Linux操作系统环境")]),s._v(" "),a("h3",{attrs:{id:"_1-linux-操作系统版本要求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-linux-操作系统版本要求"}},[s._v("#")]),s._v(" 1. Linux 操作系统版本要求")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[s._v("操作系统")]),s._v(" "),a("th",{staticStyle:{"text-align":"center"}},[s._v("版本")])])]),s._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("Red Hat Enterprise Linux")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("7.0 及以上")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("CentOS")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("7.0 及以上")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("Oracle Enterprise Linux")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("7.0 及以上")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[s._v("Ubuntu LTS")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("16.04 及以上")])])])]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("注意：")]),s._v(" 以上 Linux 操作系统可运行在物理服务器以及 VMware、KVM、XEN 主流虚拟化环境上")])]),s._v(" "),a("h3",{attrs:{id:"_2-服务器建议配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-服务器建议配置"}},[s._v("#")]),s._v(" 2. 服务器建议配置")]),s._v(" "),a("p",[s._v("DolphinScheduler 支持运行在 Intel x86-64 架构的 64 位通用硬件服务器平台。对生产环境的服务器硬件配置有以下建议：")]),s._v(" "),a("h4",{attrs:{id:"生产环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生产环境"}},[s._v("#")]),s._v(" 生产环境")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[a("strong",[s._v("CPU")])]),s._v(" "),a("th",[a("strong",[s._v("内存")])]),s._v(" "),a("th",[a("strong",[s._v("硬盘类型")])]),s._v(" "),a("th",[a("strong",[s._v("网络")])]),s._v(" "),a("th",[a("strong",[s._v("实例数量")])])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("4核+")]),s._v(" "),a("td",[s._v("8 GB+")]),s._v(" "),a("td",[s._v("SAS")]),s._v(" "),a("td",[s._v("千兆网卡")]),s._v(" "),a("td",[s._v("1+")])])])]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("注意：")])]),s._v(" "),a("ul",[a("li",[s._v("以上建议配置为部署 DolphinScheduler 的最低配置，生产环境强烈推荐使用更高的配置")]),s._v(" "),a("li",[s._v("硬盘大小配置建议 50GB+ ，系统盘和数据盘分开")])])]),s._v(" "),a("h3",{attrs:{id:"_3-网络要求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-网络要求"}},[s._v("#")]),s._v(" 3. 网络要求")]),s._v(" "),a("p",[s._v("DolphinScheduler正常运行提供如下的网络端口配置：")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("组件")]),s._v(" "),a("th",[s._v("默认端口")]),s._v(" "),a("th",[s._v("说明")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("MasterServer")]),s._v(" "),a("td",[s._v("5678")]),s._v(" "),a("td",[s._v("非通信端口，只需本机端口不冲突即可")])]),s._v(" "),a("tr",[a("td",[s._v("WorkerServer")]),s._v(" "),a("td",[s._v("1234")]),s._v(" "),a("td",[s._v("非通信端口，只需本机端口不冲突即可")])]),s._v(" "),a("tr",[a("td",[s._v("ApiApplicationServer")]),s._v(" "),a("td",[s._v("12345")]),s._v(" "),a("td",[s._v("提供后端通信端口")])])])]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("注意：")])]),s._v(" "),a("ul",[a("li",[s._v("MasterServer 和 WorkerServer 不需要开启网络间通信，只需本机端口不冲突即可")]),s._v(" "),a("li",[s._v("管理员可根据实际环境中 DolphinScheduler 组件部署方案，在网络侧和主机侧开放相关端口")])])]),s._v(" "),a("h3",{attrs:{id:"_4-客户端-web-浏览器要求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-客户端-web-浏览器要求"}},[s._v("#")]),s._v(" 4. 客户端 Web 浏览器要求")]),s._v(" "),a("p",[s._v("DolphinScheduler 推荐 Chrome 以及使用 Chromium 内核的较新版本浏览器访问前端可视化操作界面")]),s._v(" "),a("h2",{attrs:{id:"官网地址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#官网地址"}},[s._v("#")]),s._v(" 官网地址")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://dolphinscheduler.apache.org/zh-cn/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://dolphinscheduler.apache.org/zh-cn/"),a("OutboundLink")],1)]),s._v(" "),a("h1",{attrs:{id:"单机部署-没啥用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单机部署-没啥用"}},[s._v("#")]),s._v(" 单机部署(没啥用)")]),s._v(" "),a("p",[s._v("Standalone 仅适用于 DolphinScheduler 的快速体验.")]),s._v(" "),a("p",[s._v("如果你是新手，想要体验 DolphinScheduler 的功能，推荐使用Standalone方式体检。如果你想体验更完整的功能，或者更大的任务量，推荐使用"),a("a",{attrs:{href:"https://dolphinscheduler.apache.org/zh-cn/docs/3.1.4/guide/installation/pseudo-cluster",target:"_blank",rel:"noopener noreferrer"}},[s._v("伪集群部署"),a("OutboundLink")],1),s._v("。如果你是在生产中使用，推荐使用"),a("a",{attrs:{href:"https://dolphinscheduler.apache.org/zh-cn/docs/3.1.4/guide/installation/cluster",target:"_blank",rel:"noopener noreferrer"}},[s._v("集群部署"),a("OutboundLink")],1),s._v("或者"),a("a",{attrs:{href:"https://dolphinscheduler.apache.org/zh-cn/docs/3.1.4/guide/installation/kubernetes",target:"_blank",rel:"noopener noreferrer"}},[s._v("kubernetes"),a("OutboundLink")],1)]),s._v(" "),a("blockquote",[a("p",[s._v("*"),a("strong",[s._v("注意:*")]),s._v(" Standalone仅建议20个以下工作流使用，因为其采用内存式的H2 Database, Zookeeper Testing Server，任务过多可能导致不稳定，并且如果重启或者停止standalone-server会导致内存中数据库里的数据清空。 如果您要连接外部数据库，比如mysql或者postgresql，请看"),a("a",{attrs:{href:"https://dolphinscheduler.apache.org/zh-cn/docs/3.1.4/guide/installation/standalone#%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93",target:"_blank",rel:"noopener noreferrer"}},[s._v("配置数据库"),a("OutboundLink")],1)])]),s._v(" "),a("h2",{attrs:{id:"前置准备工作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前置准备工作"}},[s._v("#")]),s._v(" 前置准备工作")]),s._v(" "),a("ul",[a("li",[s._v("JDK：下载"),a("a",{attrs:{href:"https://www.oracle.com/technetwork/java/javase/downloads/index.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("JDK"),a("OutboundLink")],1),s._v(" (1.8+)，安装并配置 "),a("code",[s._v("JAVA_HOME")]),s._v(" 环境变量，并将其下的 "),a("code",[s._v("bin")]),s._v(" 目录追加到 "),a("code",[s._v("PATH")]),s._v(" 环境变量中。如果你的环境中已存在，可以跳过这步。")]),s._v(" "),a("li",[s._v("二进制包：在"),a("a",{attrs:{href:"https://dolphinscheduler.apache.org/zh-cn/download",target:"_blank",rel:"noopener noreferrer"}},[s._v("下载页面"),a("OutboundLink")],1),s._v("下载 DolphinScheduler 二进制包")])]),s._v(" "),a("p",[s._v("目前最新版本3.1.4，下载方法")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("wget https://dlcdn.apache.org/dolphinscheduler/3.1.4/apache-dolphinscheduler-3.1.4-bin.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"启动-dolphinscheduler-standalone-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动-dolphinscheduler-standalone-server"}},[s._v("#")]),s._v(" 启动 DolphinScheduler Standalone Server")]),s._v(" "),a("h3",{attrs:{id:"解压并启动-dolphinscheduler"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解压并启动-dolphinscheduler"}},[s._v("#")]),s._v(" 解压并启动 DolphinScheduler")]),s._v(" "),a("p",[s._v("二进制压缩包中有 standalone 启动的脚本，解压后即可快速启动。切换到有sudo权限的用户，运行脚本")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压并运行 Standalone Server")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-xvzf")]),s._v(" apache-dolphinscheduler-*-bin.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" apache-dolphinscheduler-*-bin\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" ./bin/dolphinscheduler-daemon.sh start standalone-server\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"登录-dolphinscheduler"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#登录-dolphinscheduler"}},[s._v("#")]),s._v(" 登录 DolphinScheduler")]),s._v(" "),a("p",[s._v("浏览器访问地址 http://localhost:12345/dolphinscheduler/ui 即可登录系统UI。默认的用户名和密码是 "),a("strong",[s._v("admin/dolphinscheduler123")])]),s._v(" "),a("p",[s._v("登录后新页面如下"),a("img",{attrs:{src:"https://s2.loli.net/2023/04/26/BvlKdjOXzG9WqZp.png",alt:"image-20230323100416606"}})]),s._v(" "),a("h2",{attrs:{id:"启停服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启停服务"}},[s._v("#")]),s._v(" 启停服务")]),s._v(" "),a("p",[s._v("脚本 "),a("code",[s._v("./bin/dolphinscheduler-daemon.sh")]),s._v(" 除了可以快捷启动 standalone 外，还能停止服务运行，全部命令如下")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动 Standalone Server 服务")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" ./bin/dolphinscheduler-daemon.sh start standalone-server\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止 Standalone Server 服务")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" ./bin/dolphinscheduler-daemon.sh stop standalone-server\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h2",{attrs:{id:"配置数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置数据库"}},[s._v("#")]),s._v(" 配置数据库")]),s._v(" "),a("p",[s._v("Standalone server 使用 H2 数据库作为其元数据存储数据，这是为了上手简单，用户在启动服务器之前不需要启动数据库。但是如果用户想将元数据库存储在 MySQL 或 PostgreSQL 等其他数据库中，他们必须更改一些配置。请参考 "),a("a",{attrs:{href:"https://github.com/apache/dolphinscheduler/blob/3.1.4-release/docs/docs/zh/guide/howto/datasource-setting.md",target:"_blank",rel:"noopener noreferrer"}},[s._v("数据源配置"),a("OutboundLink")],1),s._v(" "),a("code",[s._v("Standalone 切换元数据库")]),s._v(" 创建并初始化数据库")]),s._v(" "),a("h1",{attrs:{id:"集群部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集群部署"}},[s._v("#")]),s._v(" 集群部署")]),s._v(" "),a("h2",{attrs:{id:"前置准备工作-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前置准备工作-2"}},[s._v("#")]),s._v(" 前置准备工作")]),s._v(" "),a("p",[s._v("伪分布式部署 DolphinScheduler 需要有外部软件的支持")]),s._v(" "),a("ul",[a("li",[s._v("JDK：下载"),a("a",{attrs:{href:"https://www.oracle.com/technetwork/java/javase/downloads/index.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("JDK"),a("OutboundLink")],1),s._v(" (1.8+)，安装并配置 "),a("code",[s._v("JAVA_HOME")]),s._v(" 环境变量，并将其下的 "),a("code",[s._v("bin")]),s._v(" 目录追加到 "),a("code",[s._v("PATH")]),s._v(" 环境变量中。如果你的环境中已存在，可以跳过这步。")]),s._v(" "),a("li",[s._v("二进制包：在"),a("a",{attrs:{href:"https://dolphinscheduler.apache.org/zh-cn/download",target:"_blank",rel:"noopener noreferrer"}},[s._v("下载页面"),a("OutboundLink")],1),s._v("下载 DolphinScheduler 二进制包")]),s._v(" "),a("li",[s._v("数据库："),a("a",{attrs:{href:"https://www.postgresql.org/download/",target:"_blank",rel:"noopener noreferrer"}},[s._v("PostgreSQL"),a("OutboundLink")],1),s._v(" (8.2.15+) 或者 "),a("a",{attrs:{href:"https://dev.mysql.com/downloads/mysql/",target:"_blank",rel:"noopener noreferrer"}},[s._v("MySQL"),a("OutboundLink")],1),s._v(" (5.7+)，两者任选其一即可，如 MySQL 则需要 JDBC Driver 8.0.16")]),s._v(" "),a("li",[s._v("注册中心："),a("a",{attrs:{href:"https://zookeeper.apache.org/releases.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("ZooKeeper"),a("OutboundLink")],1),s._v(" (3.4.6+)，"),a("a",{attrs:{href:"https://zookeeper.apache.org/releases.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("下载地址"),a("OutboundLink")],1)]),s._v(" "),a("li",[s._v("进程树分析\n"),a("ul",[a("li",[s._v("macOS安装"),a("code",[s._v("pstree")])]),s._v(" "),a("li",[s._v("Fedora/Red/Hat/CentOS/Ubuntu/Debian安装"),a("code",[s._v("psmisc")])])])])]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("注意:")]),s._v(" DolphinScheduler 本身不依赖 Hadoop、Hive、Spark，但如果你运行的任务需要依赖他们，就需要有对应的环境支持")])]),s._v(" "),a("h2",{attrs:{id:"准备-dolphinscheduler-启动环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#准备-dolphinscheduler-启动环境"}},[s._v("#")]),s._v(" 准备 DolphinScheduler 启动环境")]),s._v(" "),a("h3",{attrs:{id:"下载安装包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载安装包"}},[s._v("#")]),s._v(" 下载安装包")]),s._v(" "),a("ul",[a("li",[s._v("二进制包：在"),a("a",{attrs:{href:"https://dolphinscheduler.apache.org/zh-cn/download",target:"_blank",rel:"noopener noreferrer"}},[s._v("下载页面"),a("OutboundLink")],1),s._v("下载 DolphinScheduler 二进制包")])]),s._v(" "),a("p",[s._v("目前最新版本3.1.4，下载方法")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("wget https://dlcdn.apache.org/dolphinscheduler/3.1.4/apache-dolphinscheduler-3.1.4-bin.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("解压")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 解压并运行 Standalone Server\ntar -xvzf apache-dolphinscheduler-*-bin.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"配置用户免密及权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置用户免密及权限"}},[s._v("#")]),s._v(" 配置用户免密及权限")]),s._v(" "),a("p",[s._v("所有机器上进行以下操作：创建部署用户，并且一定要配置 "),a("code",[s._v("sudo")]),s._v(" 免密。以创建 dolphinscheduler 用户为例")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建用户需使用 root 登录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" dolphinscheduler\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加密码")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dolphinscheduler"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--stdin")]),s._v(" dolphinscheduler\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置 sudo 免密")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'$adolphinscheduler  ALL=(ALL)  NOPASSWD: NOPASSWD: ALL'")]),s._v(" /etc/sudoers\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/Defaults    requirett/#Defaults    requirett/g'")]),s._v(" /etc/sudoers\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改目录权限，使得部署用户对二进制包解压后的 apache-dolphinscheduler-*-bin 目录有操作权限")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-R")]),s._v(" dolphinscheduler:dolphinscheduler apache-dolphinscheduler-*-bin\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h3",{attrs:{id:"配置机器ssh免密登陆"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置机器ssh免密登陆"}},[s._v("#")]),s._v(" 配置机器SSH免密登陆")]),s._v(" "),a("p",[s._v("如已配置跳过此步")]),s._v(" "),a("p",[s._v("由于安装的时候需要向不同机器发送资源，所以要求各台机器间能实现SSH免密登陆。配置免密登陆的步骤如下")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" dolphinscheduler\n\nssh-keygen "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" rsa "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-P")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" ~/.ssh/id_rsa\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" ~/.ssh/id_rsa.pub "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" ~/.ssh/authorized_keys\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("600")]),s._v(" ~/.ssh/authorized_keys\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("blockquote",[a("p",[a("strong",[s._v("注意:")]),s._v(" 配置完成后，可以通过运行命令 "),a("code",[s._v("ssh localhost")]),s._v(" 判断是否成功，如果不需要输入密码就能ssh登陆则证明成功")])]),s._v(" "),a("h3",{attrs:{id:"启动zookeeper"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动zookeeper"}},[s._v("#")]),s._v(" 启动zookeeper")]),s._v(" "),a("p",[s._v("如已配置跳过此步")]),s._v(" "),a("p",[s._v("进入 zookeeper 的安装目录，将 "),a("code",[s._v("zoo_sample.cfg")]),s._v(" 配置文件复制到 "),a("code",[s._v("conf/zoo.cfg")]),s._v("，并将 "),a("code",[s._v("conf/zoo.cfg")]),s._v(" 中 dataDir 中的值改成 "),a("code",[s._v("dataDir=./tmp/zookeeper")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动 zookeeper")]),s._v("\n./bin/zkServer.sh start\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"修改相关配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改相关配置"}},[s._v("#")]),s._v(" 修改相关配置")]),s._v(" "),a("p",[s._v("完成基础环境的准备后，需要根据你的机器环境修改配置文件。配置文件可以在目录 "),a("code",[s._v("bin/env")]),s._v(" 中找到，他们分别是 并命名为 "),a("code",[s._v("install_env.sh")]),s._v(" 和 "),a("code",[s._v("dolphinscheduler_env.sh")]),s._v("。")]),s._v(" "),a("h3",{attrs:{id:"修改-install-env-sh-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改-install-env-sh-文件"}},[s._v("#")]),s._v(" 修改 "),a("code",[s._v("install_env.sh")]),s._v(" 文件")]),s._v(" "),a("p",[s._v("文件 "),a("code",[s._v("install_env.sh")]),s._v(" 描述了哪些机器将被安装 DolphinScheduler 以及每台机器对应安装哪些服务。您可以在路径 "),a("code",[s._v("bin/env/install_env.sh")]),s._v(" 中找到此文件，可通过以下方式更改env变量,export <ENV_NAME> =，配置详情如下。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ---------------------------------------------------------")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# INSTALL MACHINE")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ---------------------------------------------------------")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# A comma separated list of machine hostname or IP would be installed DolphinScheduler,")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# including master, worker, api, alert. If you want to deploy in pseudo-distributed")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mode, just write a pseudo-distributed hostname")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# Example for hostnames: ips="ds1,ds2,ds3,ds4,ds5", Example for IPs: ips="192.168.8.1,192.168.8.2,192.168.8.3,192.168.8.4,192.168.8.5"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ips")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.16.24.194,172.16.24.195,172.16.24.196,172.16.24.197"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Port of SSH protocol, default value is 22. For now we only support same port in all `ips` machine")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# modify it if you use different ssh port")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("sshPort")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"22"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# A comma separated list of machine hostname or IP would be installed Master server, it")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# must be a subset of configuration `ips`.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# Example for hostnames: masters="ds1,ds2", Example for IPs: masters="192.168.8.1,192.168.8.2"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("masters")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.16.24.194,172.16.24.195"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# A comma separated list of machine <hostname>:<workerGroup> or <IP>:<workerGroup>.All hostname or IP must be a")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# subset of configuration `ips`, And workerGroup have default value as `default`, but we recommend you declare behind the hosts")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# Example for hostnames: workers="ds1:default,ds2:default,ds3:default", Example for IPs: workers="192.168.8.1:default,192.168.8.2:default,192.168.8.3:default"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("workers")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.16.24.196:default,172.16.24.197:default"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# A comma separated list of machine hostname or IP would be installed Alert server, it")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# must be a subset of configuration `ips`.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# Example for hostname: alertServer="ds3", Example for IP: alertServer="192.168.8.3"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("alertServer")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.16.24.196"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# A comma separated list of machine hostname or IP would be installed API server, it")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# must be a subset of configuration `ips`.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# Example for hostname: apiServers="ds1", Example for IP: apiServers="192.168.8.1"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("apiServers")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.16.24.197"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 服务安装目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("installPath")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/home/dolphinscheduler/dolphinscheduler"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用户可以为我们上面配置的所有机器部署DolphinSchedur。目前，用户必须在运行“install.sh”脚本之前自行创建。用户需要具有sudo权限和权限才能操作hdfs。如果启用了hdfs，则需要使用此方法创建根目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("deployUser")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dolphinscheduler"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br")])]),a("blockquote",[a("p",[s._v("配置说明")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ---------------------------------------------------------")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# INSTALL MACHINE")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ---------------------------------------------------------")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 需要配置master、worker、API server，所在服务器的IP均为机器IP或者localhost")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果是配置hostname的话，需要保证机器间可以通过hostname相互链接")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如下图所示，部署 DolphinScheduler 机器的 hostname 为 ds1,ds2,ds3,ds4,ds5，其中 ds1,ds2 安装 master 服务，ds3,ds4,ds5安装 worker 服务，alert server安装在ds4中，api server 安装在ds5中")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ips")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ds1,ds2,ds3,ds4,ds5"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("masters")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ds1,ds2"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("workers")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ds3:default,ds4:default,ds5:default"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("alertServer")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ds4"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("apiServers")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ds5"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])])]),s._v(" "),a("h3",{attrs:{id:"修改-dolphinscheduler-env-sh-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改-dolphinscheduler-env-sh-文件"}},[s._v("#")]),s._v(" 修改 "),a("code",[s._v("dolphinscheduler_env.sh")]),s._v(" 文件")]),s._v(" "),a("p",[s._v("文件 "),a("code",[s._v("./bin/env/dolphinscheduler_env.sh")]),s._v(" 描述了下列配置：")]),s._v(" "),a("ul",[a("li",[s._v("DolphinScheduler 的数据库配置，详细配置方法见"),a("a",{attrs:{href:"https://dolphinscheduler.apache.org/zh-cn/docs/3.1.4/guide/installation/pseudo-cluster#%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%BA%93",target:"_blank",rel:"noopener noreferrer"}},[s._v("初始化数据库"),a("OutboundLink")],1)]),s._v(" "),a("li",[s._v("一些任务类型外部依赖路径或库文件，如 "),a("code",[s._v("JAVA_HOME")]),s._v(" 和 "),a("code",[s._v("SPARK_HOME")]),s._v("都是在这里定义的")]),s._v(" "),a("li",[s._v("注册中心"),a("code",[s._v("zookeeper")])]),s._v(" "),a("li",[s._v("服务端相关配置，比如缓存，时区设置等")])]),s._v(" "),a("p",[s._v("如果您不使用某些任务类型，您可以忽略任务外部依赖项，但您必须根据您的环境更改 "),a("code",[s._v("JAVA_HOME")]),s._v("、注册中心和数据库相关配置。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# JDK")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JAVA_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${JAVA_HOME"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("opt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("jdk1.8.0_151}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据库配置")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Database related configuration, set database type, username and password")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DATABASE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DATABASE"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":-")]),s._v("mysql}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SPRING_PROFILES_ACTIVE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DATABASE}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SPRING_DATASOURCE_URL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jdbc:mysql://172.16.24.194:3306/dolphinscheduler?characterEncoding=UTF-8"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SPRING_DATASOURCE_USERNAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SPRING_DATASOURCE_PASSWORD")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Avris2222"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# DolphinScheduler server related configuration")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SPRING_CACHE_TYPE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${SPRING_CACHE_TYPE"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":-")]),s._v("none}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SPRING_JACKSON_TIME_ZONE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${SPRING_JACKSON_TIME_ZONE"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":-")]),s._v("UTC}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MASTER_FETCH_COMMAND_NUM")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${MASTER_FETCH_COMMAND_NUM"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":-")]),s._v("10}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Registry center configuration, determines the type and link of the registry center")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置Zookeeper地址")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("REGISTRY_TYPE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${REGISTRY_TYPE"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":-")]),s._v("zookeeper}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("REGISTRY_ZOOKEEPER_CONNECT_STRING")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${REGISTRY_ZOOKEEPER_CONNECT_STRING"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":-")]),s._v("172.16.24.194"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("2181}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Tasks related configurations, need to change the configuration if you use the related tasks.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("HADOOP_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${HADOOP_HOME"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("hdp"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("3.1.5.0-152"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("hadoop}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("HADOOP_CONF_DIR")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${HADOOP_CONF_DIR"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("hdp"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("3.1.5.0-152"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("hadoop"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("conf}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SPARK_HOME2")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${SPARK_HOME2"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("hdp"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("3.1.5.0-152"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("spark2}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("HIVE_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${HIVE_HOME"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("hdp"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("3.1.5.0-152"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("hive}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("FLINK_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${FLINK_HOME"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("opt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("flink}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PYTHON_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${PYTHON_HOME"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("opt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("soft"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("python}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DATAX_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DATAX_HOME"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("opt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("soft"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("datax}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SEATUNNEL_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${SEATUNNEL_HOME"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("opt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("soft"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("seatunnel}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CHUNJUN_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${CHUNJUN_HOME"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("opt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("soft"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("chunjun}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$HADOOP_HOME")]),s._v("/bin:"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$SPARK_HOME2")]),s._v("/bin:"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PYTHON_HOME")]),s._v("/bin:"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA_HOME")]),s._v("/bin:"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$HIVE_HOME")]),s._v("/bin:"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$FLINK_HOME")]),s._v("/bin:"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$DATAX_HOME")]),s._v("/bin:"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$SEATUNNEL_HOME")]),s._v("/bin:"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$CHUNJUN_HOME")]),s._v("/bin:"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br")])]),a("h2",{attrs:{id:"初始化数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#初始化数据库"}},[s._v("#")]),s._v(" 初始化数据库")]),s._v(" "),a("p",[s._v("请参考 "),a("a",{attrs:{href:"https://github.com/apache/dolphinscheduler/blob/3.1.4-release/docs/docs/zh/guide/howto/datasource-setting.md",target:"_blank",rel:"noopener noreferrer"}},[s._v("数据源配置"),a("OutboundLink")],1),s._v(" "),a("code",[s._v("伪分布式/分布式安装初始化数据库")]),s._v(" 创建并初始化数据库")]),s._v(" "),a("h3",{attrs:{id:"伪分布式-分布式安装初始化数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#伪分布式-分布式安装初始化数据库"}},[s._v("#")]),s._v(" 伪分布式/分布式安装初始化数据库")]),s._v(" "),a("p",[s._v("DolphinScheduler 元数据存储在关系型数据库中，目前支持 PostgreSQL 和 MySQL。下面分别介绍如何使用 MySQL 和 PostgresQL 初始化数据库。")]),s._v(" "),a("blockquote",[a("p",[s._v("如果使用 MySQL 需要手动下载 "),a("a",{attrs:{href:"https://downloads.mysql.com/archives/c-j/",target:"_blank",rel:"noopener noreferrer"}},[s._v("mysql-connector-java 驱动"),a("OutboundLink")],1),s._v(" (8.0.16) 并移动到 DolphinScheduler 的每个模块的 libs 目录下，其中包括 "),a("code",[s._v("api-server/libs")]),s._v(" 和 "),a("code",[s._v("alert-server/libs")]),s._v(" 和 "),a("code",[s._v("master-serowdver/libs")]),s._v(" 和 "),a("code",[s._v("worker-server/libs")]),s._v("和 "),a("code",[s._v("tools/libs")])])]),s._v(" "),a("p",[s._v("对于mysql 5.6 / 5.7：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql -uroot -p\n\nmysql> CREATE DATABASE dolphinscheduler DEFAULT CHARACTER SET utf8 DEFAULT COLLATE  utf8_general_ci;\n\n# 修改 {user} 和 {password} 为你希望的用户名和密码\nmysql> GRANT ALL PRIVILEGES ON dolphinscheduler.* TO '{user}'@'%' IDENTIFIED BY '{password}';\nmysql> GRANT ALL PRIVILEGES ON dolphinscheduler.* TO '{user}'@'localhost' IDENTIFIED BY '{password}';\n\nmysql> flush privileges;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("对于mysql 8：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql -uroot -p\n\nmysql> CREATE DATABASE dolphinscheduler DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;\n\n# 修改 {user} 和 {password} 为你希望的用户名和密码\nmysql> CREATE USER '{user}'@'%' IDENTIFIED BY '{password}';\nmysql> GRANT ALL PRIVILEGES ON dolphinscheduler.* TO '{user}'@'%';\nmysql> CREATE USER '{user}'@'localhost' IDENTIFIED BY '{password}';\nmysql> GRANT ALL PRIVILEGES ON dolphinscheduler.* TO '{user}'@'localhost';\nmysql> FLUSH PRIVILEGES;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("对于 PostgreSQL：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('# 采用命令行工具登陆 PostgreSQL\npsql\n# 创建数据库\npostgres=# CREATE DATABASE dolphinscheduler;\n# 修改 {user} 和 {password} 为你希望的用户名和密码\npostgres=# CREATE USER {user} PASSWORD {password};\npostgres=# ALTER DATABASE dolphinscheduler OWNER TO {user};\n# 退出 PostgreSQL\npostgres=#\\q\n# 在终端执行如下命令，向配置文件新增登陆权限，并重载 PostgreSQL 配置，替换 {ip} 为对应的 DS 集群服务器 IP 地址段\necho "host    dolphinscheduler   {user}    {ip}     md5" >> $PGDATA/pg_hba.conf\npg_ctl reload\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("然后修改"),a("code",[s._v("./bin/env/dolphinscheduler_env.sh")]),s._v("，将username和password改成你在上一步中设置的用户名{user}和密码{password}")]),s._v(" "),a("p",[s._v("对于 MySQL：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# for mysql")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DATABASE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DATABASE"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":-")]),s._v("mysql}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SPRING_PROFILES_ACTIVE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DATABASE}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SPRING_DATASOURCE_URL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jdbc:mysql://127.0.0.1:3306/dolphinscheduler?useUnicode=true&characterEncoding=UTF-8&useSSL=false"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SPRING_DATASOURCE_USERNAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dolphinscheduler"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SPRING_DATASOURCE_PASSWORD")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dolphinscheduler"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("对于 PostgreSQL：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# for postgresql")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DATABASE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DATABASE"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":-")]),s._v("postgresql}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SPRING_PROFILES_ACTIVE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${DATABASE}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SPRING_DATASOURCE_URL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jdbc:postgresql://127.0.0.1:5432/dolphinscheduler"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SPRING_DATASOURCE_USERNAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SPRING_DATASOURCE_PASSWORD")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("完成上述步骤后，您已经为 DolphinScheduler 创建一个新数据库，现在你可以通过快速的 Shell 脚本来初始化数据库")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" tools/bin/upgrade-schema.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"启动-dolphinscheduler"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动-dolphinscheduler"}},[s._v("#")]),s._v(" 启动 DolphinScheduler")]),s._v(" "),a("p",[s._v("使用上面创建的"),a("strong",[s._v("部署用户")]),s._v("运行以下命令完成部署，部署后的运行日志将存放在 logs 文件夹内")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" dolphinscheduler\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" ./bin/install.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("blockquote",[a("p",[s._v("*"),a("strong",[s._v("注意:*")]),s._v(" 第一次部署的话，可能出现 5 次"),a("code",[s._v("sh: bin/dolphinscheduler-daemon.sh: No such file or directory")]),s._v("相关信息，此为非重要信息直接忽略即可")])]),s._v(" "),a("h2",{attrs:{id:"登录-dolphinscheduler-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#登录-dolphinscheduler-2"}},[s._v("#")]),s._v(" 登录 DolphinScheduler")]),s._v(" "),a("p",[s._v("浏览器访问地址 http://localhost:12345/dolphinscheduler/ui 即可登录系统UI。默认的用户名和密码是 "),a("strong",[s._v("admin/dolphinscheduler123")])]),s._v(" "),a("blockquote",[a("p",[s._v("登录的IP为配置的apiServers地址")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/04/26/NUhF5jodEV9BpuY.png",alt:"image-20230323135844382"}})]),s._v(" "),a("h2",{attrs:{id:"启停服务-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启停服务-2"}},[s._v("#")]),s._v(" 启停服务")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 一键停止集群所有服务")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" ./bin/stop-all.sh\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 一键开启集群所有服务")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" ./bin/start-all.sh\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启停 Master")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" ./bin/dolphinscheduler-daemon.sh stop master-server\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" ./bin/dolphinscheduler-daemon.sh start master-server\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启停 Worker")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" ./bin/dolphinscheduler-daemon.sh start worker-server\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" ./bin/dolphinscheduler-daemon.sh stop worker-server\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启停 Api")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" ./bin/dolphinscheduler-daemon.sh start api-server\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" ./bin/dolphinscheduler-daemon.sh stop api-server\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启停 Alert")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" ./bin/dolphinscheduler-daemon.sh start alert-server\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" ./bin/dolphinscheduler-daemon.sh stop alert-server\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("blockquote",[a("p",[s._v("*"),a("strong",[s._v("注意1:*")]),s._v(": 每个服务在路径 "),a("code",[s._v("<service>/conf/dolphinscheduler_env.sh")]),s._v(" 中都有 "),a("code",[s._v("dolphinscheduler_env.sh")]),s._v(" 文件，这是可以为微 服务需求提供便利。意味着您可以基于不同的环境变量来启动各个服务，只需要在对应服务中配置 "),a("code",[s._v("<service>/conf/dolphinscheduler_env.sh")]),s._v(" 然后通过 "),a("code",[s._v("<service>/bin/start.sh")]),s._v(" 命令启动即可。但是如果您使用命令 "),a("code",[s._v("/bin/dolphinscheduler-daemon.sh start <service>")]),s._v(" 启动服务器，它将会用文件 "),a("code",[s._v("bin/env/dolphinscheduler_env.sh")]),s._v(" 覆盖 "),a("code",[s._v("<service>/conf/dolphinscheduler_env.sh")]),s._v(" 然后启动服务，目的是为了减少用户修改配置的成本.")]),s._v(" "),a("p",[s._v("*"),a("strong",[s._v("注意2:*")]),s._v("：服务用途请具体参见《系统架构设计》小节。Python gateway service 默认与 api-server 一起启动，如果您不想启动 Python gateway service 请通过更改 api-server 配置文件 "),a("code",[s._v("api-server/conf/application.yaml")]),s._v(" 中的 "),a("code",[s._v("python-gateway.enabled : false")]),s._v(" 来禁用它。")])]),s._v(" "),a("h2",{attrs:{id:"搭建集群遇到的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#搭建集群遇到的问题"}},[s._v("#")]),s._v(" 搭建集群遇到的问题")]),s._v(" "),a("h3",{attrs:{id:"_1-unimplemented-for-dolphinscheduler-nodes-master"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-unimplemented-for-dolphinscheduler-nodes-master"}},[s._v("#")]),s._v(" 1.Unimplemented for /dolphinscheduler/nodes/master")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Caused by: org.apache.dolphinscheduler.registry.api.RegistryException: Failed to put registry key: /nodes/master\n        at org.apache.dolphinscheduler.plugin.registry.zookeeper.ZookeeperRegistry.put(ZookeeperRegistry.java:186)\n        at org.apache.dolphinscheduler.service.registry.RegistryClient.initNodes(RegistryClient.java:247)\n        at org.apache.dolphinscheduler.service.registry.RegistryClient.afterConstruct(RegistryClient.java:77)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement.invoke(InitDestroyAnnotationBeanPostProcessor.java:389)\n        at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:333)\n        at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:157)\n        ... 74 more\nCaused by: org.apache.zookeeper.KeeperException$UnimplementedException: KeeperErrorCode = Unimplemented for /dolphinscheduler/nodes/master\n        at org.apache.zookeeper.KeeperException.create(KeeperException.java:106)\n        at org.apache.zookeeper.KeeperException.create(KeeperException.java:54)\n        at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:1450)\n        at org.apache.curator.framework.imps.CreateBuilderImpl$18.call(CreateBuilderImpl.java:1216)\n        at org.apache.curator.framework.imps.CreateBuilderImpl$18.call(CreateBuilderImpl.java:1193)\n        at org.apache.curator.RetryLoop.callWithRetry(RetryLoop.java:93)\n        at org.apache.curator.framework.imps.CreateBuilderImpl.pathInForeground(CreateBuilderImpl.java:1190)\n        at org.apache.curator.framework.imps.CreateBuilderImpl.protectedPathInForeground(CreateBuilderImpl.java:605)\n        at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:595)\n        at org.apache.curator.framework.imps.CreateBuilderImpl.forPath(CreateBuilderImpl.java:48)\n        at org.apache.dolphinscheduler.plugin.registry.zookeeper.ZookeeperRegistry.put(ZookeeperRegistry.java:184)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br")])]),a("p",[a("strong",[s._v("原因：")])]),s._v(" "),a("p",[s._v("Zookeeper版本不兼容，DolphinScheduler 3.1.4 版本使用的是 Zookeeper 3.8.0 版本")]),s._v(" "),a("p",[s._v("在 DolphinScheduler 安装目录下 libs 目录可以看到 Zookeeper 的 jar 包为3.8.0")]),s._v(" "),a("p",[a("strong",[s._v("解决方法：")])]),s._v(" "),a("p",[s._v("安装Zookeeper3.8.0，将"),a("code",[s._v("./bin/env/dolphinscheduler_env.sh")]),s._v("配置的Zookeeper地址替换为新的Zookeeper")]),s._v(" "),a("h2",{attrs:{id:"修改ui页面端口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改ui页面端口"}},[s._v("#")]),s._v(" 修改UI页面端口")]),s._v(" "),a("p",[s._v("进入部署apiServers的服务器的目录"),a("code",[s._v("dolphinscheduler/api-server/conf")])]),s._v(" "),a("p",[s._v("修改"),a("code",[s._v("application.yaml")]),s._v("端口为修改的端口")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15432")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("重启，再次访问：http://ip:15432/dolphinscheduler/ui/")]),s._v(" "),a("h2",{attrs:{id:"配置资源中心"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置资源中心"}},[s._v("#")]),s._v(" 配置资源中心")]),s._v(" "),a("h3",{attrs:{id:"配置hdfs存储文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置hdfs存储文件"}},[s._v("#")]),s._v(" 配置HDFS存储文件")]),s._v(" "),a("p",[s._v("在 3.0.0-alpha 版本之后，如果需要使用到资源中心的 HDFS 或 S3 上传资源，我们需要对以下路径的进行配置："),a("code",[s._v("api-server/conf/common.properties")]),s._v(" 和 "),a("code",[s._v("worker-server/conf/common.properties")]),s._v("。可参考如下：")]),s._v(" "),a("div",{staticClass:"language-properties line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用户数据本地目录路径，请确保该目录存在并且具有读写权限")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("data.basedir.path")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("/tmp/dolphinscheduler")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 资源存储类型：HDFS、S3、OSS、NONE")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("resource.storage.type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("HDFS")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 资源存储在HDFS/S3路径上，资源文件将存储到此基本路径，自行配置，请确保该目录存在于HDFS上并具有读写权限。建议使用“/dolphinscheduler”")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("resource.storage.upload.base.path")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("/dolphinscheduler")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果resource.storage.type=HDFS，则用户必须具有在HDFS根路径下创建目录的权限")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("resource.hdfs.root.user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("hdfs")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果启用了resource.storage.type=HDFS和namenode HA，则需要将core-site.xml和HDFS-site.xml复制到conf-dir")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("resource.hdfs.fs.defaultFS")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("hdfs://bigdata-24-194:8020")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# resourcemanager port, the default value is 8088 if not specified")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("resource.manager.httpaddress.port")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("8088")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果启用了resourcemanager HA，请设置HA IP；如果resourcemanager为single，则将该值保留为空")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("yarn.resourcemanager.ha.rm.ids")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("192.168.xx.xx,192.168.xx.xx")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果resourcemanager HA开启或不使用resourcemanager，请保持默认值； 如果resourcemanager是单一的，只需要将ds1替换为实际的resourcemanager hostname")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("yarn.application.status.address")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("http://ds1:%s/ws/v1/cluster/apps/%s")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 达到应用程序编号阈值时的作业历史状态url（默认值为10000，可能设置为1000）")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ds1 取 yarn-site.xml 中 yarn.log.server.url配置的ip")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("yarn.job.history.status.address")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("http://ds1:19888/ws/v1/history/mapreduce/jobs/%s")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("p",[s._v("重启HDFS")]),s._v(" "),a("p",[s._v("在"),a("code",[s._v("资源中心")]),s._v("创建目录提示"),a("code",[s._v("未指定当前登录用户的租户")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/04/26/FryACj4nQ17qHfZ.png",alt:"image-20230323170709339"}})]),s._v(" "),a("p",[a("strong",[s._v("原因：")])]),s._v(" "),a("p",[s._v("admin默认没有配置租户（即在Linux执行的用户名称）")]),s._v(" "),a("p",[a("strong",[s._v("解决方法：")])]),s._v(" "),a("p",[s._v("默认admin是没有配置租户的，我们需要再"),a("code",[s._v("安全中心")]),s._v("->"),a("code",[s._v("用户管理")]),s._v("->"),a("code",[s._v("修改")]),s._v("中为admin配置一个租户")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/04/26/4SF6Ydn8XmJ2AbB.png",alt:"image-20230323170816346"}})]),s._v(" "),a("p",[s._v("再次创建目录和上传文件，成功创建")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/04/26/Otb6Njwcl3Sao8h.png",alt:"image-20230323171116451"}})]),s._v(" "),a("p",[s._v("这些文件和目录我们可以直接在HDFS中查看,目录为我们之前配置的"),a("code",[s._v("/dolphinscheduler")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("hdfs dfs -ls /dolphinscheduler/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);
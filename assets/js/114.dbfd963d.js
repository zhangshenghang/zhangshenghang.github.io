(window.webpackJsonp=window.webpackJsonp||[]).push([[114],{477:function(s,a,r){"use strict";r.r(a);var t=r(8),e=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("[toc]")]),s._v(" "),a("h2",{attrs:{id:"rpm重新编译"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rpm重新编译"}},[s._v("#")]),s._v(" RPM重新编译")]),s._v(" "),a("h3",{attrs:{id:"安装rpmrebuild"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装rpmrebuild"}},[s._v("#")]),s._v(" 安装rpmrebuild")]),s._v(" "),a("p",[s._v("下载地址："),a("a",{attrs:{href:"https://download.csdn.net/download/zhangshenghang/88964872",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://download.csdn.net/download/zhangshenghang/88964872"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" rpmrebuild\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" rpmrebuild\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将下载的tar.gz文件上传到rpmrebuild目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-zxvf")]),s._v(" rpmrebuild-2.11.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编译")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"安装rpm-build"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装rpm-build"}},[s._v("#")]),s._v(" 安装rpm-build")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("yum install -y rpm-build\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"自定义服务同步到服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义服务同步到服务器"}},[s._v("#")]),s._v(" 自定义服务同步到服务器")]),s._v(" "),a("p",[s._v("将我们集成的服务"),a("code",[s._v("DORIS")]),s._v(",同步到下面这个目录")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("/var/lib/ambari-server/resources/stacks/HDP/3.1/services\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("同步完可以看到目录DORIS")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ ll\ntotal "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root root   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("47")]),s._v(" Jan "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":33 AMBARI_METRICS\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root root   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("47")]),s._v(" Jan "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":33 ATLAS\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("501")]),s._v(" games "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("220")]),s._v(" Mar "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(":33 DORIS\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" Jan "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":33 HBASE\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root root  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127")]),s._v(" Jan "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":33 HDFS\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("106")]),s._v(" Jan "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":33 HIVE\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" Jan "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":33 KAFKA\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" Jan "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":33 KNOX\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" Jan "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":33 PIG\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root root  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127")]),s._v(" Jan "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":33 RANGER\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" root root   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("61")]),s._v(" Jan "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":33 RANGER_KMS\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root root   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("47")]),s._v(" Jan "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":33 SPARK2\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" Jan "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":33 TEZ\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" Jan "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":33 YARN\ndrwxr-xr-x. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" Jan "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(":33 ZOOKEEPER\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("h3",{attrs:{id:"生成需要添加的配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生成需要添加的配置"}},[s._v("#")]),s._v(" 生成需要添加的配置")]),s._v(" "),a("p",[s._v("这个命令是用于添加配置到"),a("code",[s._v(".spec")]),s._v("文件，"),a("code",[s._v(".spec")]),s._v("文件一会在编译时候会自动进入")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" /var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-type")]),s._v(" f "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-printf")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%%attr(0644, root, root) \"%p\"\\n'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-type")]),s._v(" d "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-printf")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%%dir %%attr(0755, root, root) \"%p\"\\n'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" doris.txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("查看内容")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("%dir %attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0755, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS"')]),s._v("\n%attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0644, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/metrics.json"')]),s._v("\n%dir %attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0755, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/configuration"')]),s._v("\n%attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0644, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/configuration/fe.xml"')]),s._v("\n%attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0644, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/configuration/doris-env.xml"')]),s._v("\n%attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0644, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/configuration/be.xml"')]),s._v("\n%attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0644, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/alerts.json"')]),s._v("\n%attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0644, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/role_command_order.json"')]),s._v("\n%dir %attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0755, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/quicklinks"')]),s._v("\n%attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0644, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/quicklinks/quicklinks.json"')]),s._v("\n%attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0644, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/metainfo.xml"')]),s._v("\n%attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0644, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/widgets.json"')]),s._v("\n%dir %attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0755, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/themes"')]),s._v("\n%attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0644, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/themes/theme.json"')]),s._v("\n%dir %attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0755, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/package"')]),s._v("\n%dir %attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0755, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/package/alerts"')]),s._v("\n%attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0644, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/package/alerts/alert_fe_pid_exists.py"')]),s._v("\n%attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0644, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/package/alerts/alert_be_pid_exists.py"')]),s._v("\n%dir %attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0755, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/package/scripts"')]),s._v("\n%attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0644, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/package/scripts/params.py"')]),s._v("\n%attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0644, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/package/scripts/changeBEOsConf.sh"')]),s._v("\n%attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0644, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/package/scripts/changeOsConf.sh"')]),s._v("\n%attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0644, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/package/scripts/status_params.py"')]),s._v("\n%attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0644, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/package/scripts/frontend_follower.py"')]),s._v("\n%attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0644, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/package/scripts/service_check.py"')]),s._v("\n%attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0644, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/package/scripts/be.py"')]),s._v("\n%attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0644, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/package/scripts/doris_client.py"')]),s._v("\n%attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0644, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/package/scripts/frontend_observer.py"')]),s._v("\n%attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0644, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/package/scripts/fe.py"')]),s._v("\n%dir %attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0755, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/package/templates"')]),s._v("\n%attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0644, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/package/templates/fe.conf.j2"')]),s._v("\n%attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0644, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/package/templates/test-common.conf.j2"')]),s._v("\n%attr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0644, root, root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/lib/ambari-server/resources/stacks/HDP/3.1/services/DORIS/package/templates/be.conf.j2"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br")])]),a("p",[s._v("在安装Ambari Server时我们会将安装包放到httpd服务中，查看我们的ambari-server版本,可以看到"),a("code",[s._v("ambari-server-2.7.5.0-72.x86_64.rpm")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" /var/www/html/ambari/centos7/2.7.5.0-72/ambari/ambari-*\nambari-agent-2.7.5.0-72.x86_64.rpm\nambari-infra-manager-2.7.5.0-72.noarch.rpm\nambari-infra-solr-2.7.5.0-72.noarch.rpm\nambari-infra-solr-client-2.7.5.0-72.noarch.rpm\nambari-logsearch-logfeeder-2.7.5.0-72.noarch.rpm\nambari-logsearch-portal-2.7.5.0-72.noarch.rpm\nambari-metrics-collector-2.7.5.0-72.x86_64.rpm\nambari-metrics-common-2.7.5.0-72.noarch.rpm\nambari-metrics-grafana-2.7.5.0-72.x86_64.rpm\nambari-metrics-hadoop-sink-2.7.5.0-72.x86_64.rpm\nambari-metrics-monitor-2.7.5.0-72.x86_64.rpm\nambari-server-2.7.5.0-72.x86_64.rpm\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("重新"),a("code",[s._v("rebuild")]),s._v("编译"),a("code",[s._v("ambari-server")]),s._v("，"),a("code",[s._v("ambari-server-2.7.5.0-72.x86_64")]),s._v("就是上面我们看到的rpm包，去掉"),a("code",[s._v(".rpm")]),s._v("后缀")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("rpmrebuild "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" ambari-server-2.7.5.0-72.x86_64\nDo you want to "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("continue")]),s._v(" ? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("y/N"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" y\nDo you want to change release number ? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("y/N"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" n "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输入n，这时会进入编辑页面(即编辑 .spec 文件)，按i可以进入编辑,进入大概7100多行，添加上面我们生成的配置内容,:wq保存（和在vi编辑器里面编辑一样）")]),s._v("\nDo you want to "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("continue")]),s._v(" ? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("y/N"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" y\nresult: /root/rpmbuild/RPMS/x86_64/ambari-server-2.7.5.0-72.x86_64.rpm\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("编译完成之后会生成文件"),a("code",[s._v("/root/rpmbuild/RPMS/x86_64/ambari-server-2.7.5.0-72.x86_64.rpm")])]),s._v(" "),a("p",[s._v("查看编译后的是否包含DORIS")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("rpm -qpl  /root/rpmbuild/RPMS/x86_64/ambari-server-2.7.5.0-72.x86_64.rpm  |grep DORIS\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"验证rpm文件是否生效"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#验证rpm文件是否生效"}},[s._v("#")]),s._v(" 验证RPM文件是否生效")]),s._v(" "),a("ol",[a("li",[s._v("停止Ambari Server，"),a("code",[s._v("ambari-server stop")])]),s._v(" "),a("li",[s._v("卸载 ambari-server 服务："),a("code",[s._v("yum remove ambari-server")])]),s._v(" "),a("li",[s._v("安装 ambari-server 服务："),a("code",[s._v("yum install -y /root/rpmbuild/RPMS/x86_64/ambari-server-2.7.5.0-72.x86_64.rpm")])]),s._v(" "),a("li",[s._v("重新设置 ambari-server 配置："),a("code",[s._v("ambari-server setup")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(" ambari-server setup\nUsing python  /usr/bin/python\nSetup ambari-server\nChecking SELinux...\nSELinux status is 'disabled'\nCustomize user account for ambari-server daemon [y/n] (n)? n\nAdjusting ambari-server permissions and ownership...\nChecking firewall status...\nChecking JDK...\n[1] Oracle JDK 1.8 + Java Cryptography Extension (JCE) Policy Files 8\n[2] Custom JDK\n==============================================================================\nEnter choice (1): 2 # 选择2\nWARNING: JDK must be installed on all hosts and JAVA_HOME must be valid on all hosts.\nWARNING: JCE Policy files are required for configuring Kerberos security. If you plan to use Kerberos,please make sure JCE Unlimited Strength Jurisdiction Policy Files are valid on all hosts.\nPath to JAVA_HOME: /opt/jdk1.8.0_351 # 输入安装的jdk路径\nValidating JDK on Ambari Server...done.\nCheck JDK version for Ambari Server...\nJDK version found: 8\nMinimum JDK version is 8 for Ambari. Skipping to setup different JDK for Ambari Server.\nChecking GPL software agreement...\nGPL License for LZO: https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html\nEnable Ambari Server to download and install GPL Licensed LZO packages [y/n] (n)? n\nCompleting setup...\nConfiguring database...\nEnter advanced database configuration [y/n] (n)? y\nConfiguring database...\n==============================================================================\nChoose one of the following options:\n[1] - PostgreSQL (Embedded)\n[2] - Oracle\n[3] - MySQL / MariaDB\n[4] - PostgreSQL\n[5] - Microsoft SQL Server (Tech Preview)\n[6] - SQL Anywhere\n[7] - BDB\n==============================================================================\nEnter choice (1): 3\nHostname (localhost): 172.16.24.174\nPort (3306): 3306\nDatabase name (ambari): ambari\nUsername (ambari): ambari\nEnter Database Password (bigdata): \nRe-enter password: \nConfiguring ambari database...\nShould ambari use existing default jdbc /usr/share/java/mysql-connector-java.jar [y/n] (y)? y\nConfiguring remote database connection properties...\nWARNING: Before starting Ambari Server, you must run the following DDL directly from the database shell to create the schema: /var/lib/ambari-server/resources/Ambari-DDL-MySQL-CREATE.sql\nProceed with configuring remote database connection properties [y/n] (y)? y\nExtracting system views...\n....ambari-admin-2.7.5.0.72.jar\nAmbari repo file doesn't contain latest json url, skipping repoinfos modification\nAdjusting ambari-server permissions and ownership...\nAmbari Server 'setup' completed successfully.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br")])]),a("ol",{attrs:{start:"5"}},[a("li",[s._v("启动服务："),a("code",[s._v("ambari-server start")])]),s._v(" "),a("li",[s._v("登录Ambari Server Web UI，安装DORIS服务，测试功能是否正常。")])]),s._v(" "),a("h2",{attrs:{id:"如何通过yum-install-ambari-server直接安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何通过yum-install-ambari-server直接安装"}},[s._v("#")]),s._v(" 如何通过yum install ambari-server直接安装?")]),s._v(" "),a("p",[s._v("上面我可以可以通过指定文件进行安装")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" /root/rpmbuild/RPMS/x86_64/ambari-server-2.7.5.0-72.x86_64.rpm\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("如果想直接通过 "),a("code",[s._v("yum install ambari-server")]),s._v(" 安装需要对本地配置的yum仓库下的repodata进行重新生成，该目录会校验安装包是否被修改。")]),s._v(" "),a("p",[s._v("我们查看"),a("code",[s._v("ambari.repo")]),s._v("可以看到ambari的库所在目录,可以看到下载目录"),a("code",[s._v("ambari/centos7/2.7.5.0-72")]),s._v("，绝对目录为："),a("code",[s._v("/var/www/html/ambari/centos7/2.7.5.0-72")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /etc/yum.repos.d/ambari.repo ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ambari"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ambari\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("baseurl")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://bigdata-01/ambari/centos7/2.7.5.0-72\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("enabled")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgcheck")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("目录结构为")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[root@bigdata-01 2.7.5.0-72]# pwd\n/var/www/html/ambari/centos7/2.7.5.0-72\n[root@bigdata-01 2.7.5.0-72]# ll\ntotal 52\ndrwxr-xr-x 2 1001 users 4096 Mar 20 10:49 ambari\n-rw-r--r-- 1 1001 users  375 Mar 21 18:45 ambari.repo\n-rw-r--r-- 1 1001 users 1608 Dec 18  2019 artifacts.txt\n-rw-r--r-- 1 1001 users  585 Dec 18  2019 build.id\n-rw-r--r-- 1 1001 users 1667 Dec 18  2019 build_metadata.txt\n-rw-r--r-- 1 1001 users  500 Dec 18  2019 hotfix_index.html\n-rw-r--r-- 1 1001 users  505 Dec 18  2019 index.html\n-rw-r--r-- 1 1001 users  497 Dec 18  2019 private_index.html\n-rw-r--r-- 1 1001 users  496 Dec 18  2019 public_index.html\ndrwxr-xr-x 2 root root  4096 Mar 21 18:57 repodata\ndrwxr-xr-x 2 1001 users 4096 Dec 18  2019 RPM-GPG-KEY\ndrwxr-xr-x 2 1001 users 4096 Dec 18  2019 smartsense\ndrwxr-xr-x 5 1001 users 4096 Dec 18  2019 tars\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("p",[s._v("进入 ambari 目录,可以看到"),a("code",[s._v("ambari-server-2.7.5.0-72.x86_64.rpm")]),s._v("，将我们修改后的文件替换掉之前的这个")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# cd ambari\n[root@bigdata-01 ambari]# ls\nambari-agent-2.7.5.0-72.x86_64.rpm                ambari-metrics-collector-2.7.5.0-72.x86_64.rpm\nambari-infra-manager-2.7.5.0-72.noarch.rpm        ambari-metrics-common-2.7.5.0-72.noarch.rpm\nambari-infra-solr-2.7.5.0-72.noarch.rpm           ambari-metrics-grafana-2.7.5.0-72.x86_64.rpm\nambari-infra-solr-client-2.7.5.0-72.noarch.rpm    ambari-metrics-hadoop-sink-2.7.5.0-72.x86_64.rpm\nambari-logsearch-logfeeder-2.7.5.0-72.noarch.rpm  ambari-metrics-monitor-2.7.5.0-72.x86_64.rpm\nambari-logsearch-portal-2.7.5.0-72.noarch.rpm     ambari-server-2.7.5.0-72.x86_64.rpm\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("替换之后，此时我们通过"),a("code",[s._v("yum install ambari-server")]),s._v("安装会提示安装失败，这里就是校验出现了问题，下面我们讲处理方法")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2024/04/08/VMvsxLS2uJ36akY.png",alt:"image-20240322100240618"}})]),s._v(" "),a("p",[s._v("处理方法")]),s._v(" "),a("ol",[a("li",[s._v("删除"),a("code",[s._v("/var/www/html/ambari/centos7/2.7.5.0-72/repodata")]),s._v("目录")]),s._v(" "),a("li",[s._v("安装createrepo，"),a("code",[s._v("sudo yum install -y createrepo")])]),s._v(" "),a("li",[s._v("在"),a("code",[s._v("/var/www/html/ambari/centos7/2.7.5.0-72/")]),s._v("目录下运行"),a("code",[s._v("createrepo .")]),s._v("，此时如果正常会生成"),a("code",[s._v("repodata")]),s._v("目录")]),s._v(" "),a("li",[s._v("刷新yum缓存，让我们刚刚生成的repodata生效")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum clean all\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum makecache\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ol",{attrs:{start:"5"}},[a("li",[s._v("安装服务"),a("code",[s._v("yum install -y ambari-server")])]),s._v(" "),a("li",[s._v("成功安装")])])])}),[],!1,null,null,null);a.default=e.exports}}]);
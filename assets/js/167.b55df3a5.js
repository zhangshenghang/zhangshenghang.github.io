(window.webpackJsonp=window.webpackJsonp||[]).push([[167],{535:function(s,t,a){"use strict";a.r(t);var e=a(8),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("[toc]")]),s._v(" "),t("h2",{attrs:{id:"elasticsearch-集群健康状态"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch-集群健康状态"}},[s._v("#")]),s._v(" Elasticsearch 集群健康状态")]),s._v(" "),t("p",[t("code",[s._v("GET /_cluster/health")]),s._v(" 是 Elasticsearch 集群健康状态的查询 API。这个 API 提供了关于集群健康、节点、分片和索引的概览。执行这个命令，你将得到集群的健康状态，包括其总体状态、数据节点数量、活跃分片数量等关键信息。")]),s._v(" "),t("p",[t("strong",[s._v("命令参数")])]),s._v(" "),t("p",[s._v("这个命令可以接受一些参数来定制返回的信息，常见的参数包括：")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("level")]),s._v(": 定义返回信息的详细程度，可以是 "),t("code",[s._v("cluster")]),s._v("（默认，返回集群级别的信息）、"),t("code",[s._v("indices")]),s._v("（返回索引级别的信息）、"),t("code",[s._v("shards")]),s._v("（返回分片级别的信息）。shards包含indices/cluster。")]),s._v(" "),t("li",[t("code",[s._v("wait_for_status")]),s._v(": 指定等待集群达到特定状态（如 "),t("code",[s._v("green")]),s._v("、"),t("code",[s._v("yellow")]),s._v(" 或 "),t("code",[s._v("red")]),s._v("）后才返回结果。")]),s._v(" "),t("li",[t("code",[s._v("wait_for_no_relocating_shards")]),s._v(": 等待所有分片迁移完成后才返回结果。")]),s._v(" "),t("li",[t("code",[s._v("wait_for_active_shards")]),s._v(": 等待指定数量的活跃分片后返回结果。")]),s._v(" "),t("li",[t("code",[s._v("wait_for_nodes")]),s._v(": 等待指定数量的节点加入集群后返回结果。")]),s._v(" "),t("li",[t("code",[s._v("timeout")]),s._v(": 指定等待的时长，默认为 30 秒。")])]),s._v(" "),t("p",[t("strong",[s._v("返回结果")])]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"cluster_name"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dev-cluster"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"status"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"yellow"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"timed_out"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"number_of_nodes"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"number_of_data_nodes"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"active_primary_shards"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("139")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"active_shards"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("222")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"relocating_shards"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"initializing_shards"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"unassigned_shards"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"delayed_unassigned_shards"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"number_of_pending_tasks"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"number_of_in_flight_fetch"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"task_max_waiting_in_queue_millis"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"active_shards_percent_as_number"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("95.6896551724138")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[t("strong",[s._v("返回结果说明")])]),s._v(" "),t("p",[s._v("执行 "),t("code",[s._v("GET /_cluster/health")]),s._v(" 命令后，返回的结果是一个 JSON 对象，包含以下字段：")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("status")]),s._v(": 集群的整体状态，可以是 "),t("code",[s._v("green")]),s._v("、"),t("code",[s._v("yellow")]),s._v(" 或 "),t("code",[s._v("red")]),s._v("。\n"),t("ul",[t("li",[t("code",[s._v("green")]),s._v(" 表示所有功能正常。")]),s._v(" "),t("li",[t("code",[s._v("yellow")]),s._v(" 表示所有数据可用，但某些副本尚未分配。")]),s._v(" "),t("li",[t("code",[s._v("red")]),s._v(" 表示某些数据因某种原因不可用。")])])]),s._v(" "),t("li",[t("code",[s._v("timed_out")]),s._v(": 查询是否超时。")]),s._v(" "),t("li",[t("code",[s._v("number_of_nodes")]),s._v(": 集群中的节点数量。")]),s._v(" "),t("li",[t("code",[s._v("number_of_data_nodes")]),s._v(": 集群中的数据节点数量。")]),s._v(" "),t("li",[t("code",[s._v("active_primary_shards")]),s._v(": 活跃的主分片数量。")]),s._v(" "),t("li",[t("code",[s._v("active_shards")]),s._v(": 活跃的分片总数（包括副本）。")]),s._v(" "),t("li",[t("code",[s._v("relocating_shards")]),s._v(": 正在迁移的分片数量。")]),s._v(" "),t("li",[t("code",[s._v("initializing_shards")]),s._v(": 正在初始化的分片数量。")]),s._v(" "),t("li",[t("code",[s._v("unassigned_shards")]),s._v(": 未分配的分片数量。")]),s._v(" "),t("li",[t("code",[s._v("delayed_unassigned_shards")]),s._v(": 由于某些原因（如分配规则）而延迟分配的分片数量。")]),s._v(" "),t("li",[t("code",[s._v("number_of_pending_tasks")]),s._v(": 等待执行的任务数量。")]),s._v(" "),t("li",[t("code",[s._v("number_of_in_flight_fetch")]),s._v(": 正在进行的取数据操作数量。")]),s._v(" "),t("li",[t("code",[s._v("task_max_waiting_in_queue_millis")]),s._v(": 任务在队列中等待的最长时间（毫秒）。")]),s._v(" "),t("li",[t("code",[s._v("active_shards_percent_as_number")]),s._v(": 活跃分片占总分片的比例（以数值形式表示）。\n这些信息可以帮助你快速了解集群的当前状态和潜在问题。")])]),s._v(" "),t("h2",{attrs:{id:"查看未分配分片和原因"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看未分配分片和原因"}},[s._v("#")]),s._v(" 查看未分配分片和原因")]),s._v(" "),t("h3",{attrs:{id:"查看所有分片状态-get-cat-shards"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看所有分片状态-get-cat-shards"}},[s._v("#")]),s._v(" 查看所有分片状态 GET /_cat/shards")]),s._v(" "),t("ul",[t("li",[s._v("使用 "),t("code",[s._v("GET /_cat/shards")]),s._v(" 查看所有分片的状态，找到 "),t("code",[s._v("UNASSIGNED")]),s._v(" 状态的分片。")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2024/04/12/XZY5bcsu8CqfAoW.png",alt:"image-20240411133224842"}})]),s._v(" "),t("h3",{attrs:{id:"查看具体分片未分配详细原因-get-cluster-allocation-explain"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看具体分片未分配详细原因-get-cluster-allocation-explain"}},[s._v("#")]),s._v(" 查看具体分片未分配详细原因 GET /_cluster/allocation/explain")]),s._v(" "),t("p",[s._v("使用 "),t("code",[s._v("GET /_cluster/allocation/explain")]),s._v(" 获取关于分片未分配原因的详细解释。")]),s._v(" "),t("p",[t("strong",[s._v("参数")])]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("index")]),s._v(": 指定要解释的索引名称。取值范围：合法的索引名称。")]),s._v(" "),t("li",[t("strong",[s._v("shard")]),s._v(": 指定要解释的分片编号。取值范围：整型，合法的分片编号。")]),s._v(" "),t("li",[t("strong",[s._v("primary")]),s._v(": 指定是否解释主分片（"),t("code",[s._v("true")]),s._v("）或副本分片（"),t("code",[s._v("false")]),s._v("）。取值范围：布尔值。")]),s._v(" "),t("li",[t("strong",[s._v("include_yes_decisions")]),s._v(": 即使分片已经被分配，也返回解释。默认为 "),t("code",[s._v("false")]),s._v("。取值范围：布尔值。")])]),s._v(" "),t("p",[t("strong",[s._v("返回结果")])]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"index"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test-20231110-2"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"shard"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"primary"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"current_state"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"unassigned"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"unassigned_info"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"reason"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NODE_LEFT"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"at"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2024-03-16T21:02:35.220Z"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"details"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node_left [Hw6awNn-RCOgA921YGAviw]"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"last_allocation_status"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no_attempt"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"can_allocate"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"allocate_explanation"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cannot allocate because allocation is not permitted to any of the nodes"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"node_allocation_decisions"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"node_id"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hw6awNn-RCOgA921YGAviw"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"node_name"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node-3"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"transport_address"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.16.24.200:9300"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"node_attributes"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"ml.machine_memory"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"67381817344"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"ml.max_open_jobs"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"512"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"xpack.installed"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"ml.max_jvm_size"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8389328896"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"transform.node"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"node_decision"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"deciders"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"decider"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"same_shard"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"decision"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NO"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"explanation"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"a copy of this shard is already allocated to this node [[test-20231110-2][0], node[Hw6awNn-RCOgA921YGAviw], [R], s[STARTED], a[id=Q2QMaVd4TlSoh7NWkI7uNA]]"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"decider"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"disk_threshold"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"decision"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NO"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"explanation"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"the node is above the low watermark cluster setting [cluster.routing.allocation.disk.watermark.low=85%], using more disk space than the maximum allowed [85.0%], actual free: [12.00695361391614%]"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"node_id"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OJJMpbG6Qta6ch5Prcpidw"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"node_name"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node-2"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"transport_address"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.16.24.201:9300"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"node_attributes"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"ml.machine_memory"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"67381817344"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"ml.max_open_jobs"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"512"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"xpack.installed"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"ml.max_jvm_size"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8389328896"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"transform.node"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"node_decision"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"deciders"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"decider"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"same_shard"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"decision"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NO"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"explanation"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"a copy of this shard is already allocated to this node [[test-20231110-2][0], node[OJJMpbG6Qta6ch5Prcpidw], [R], s[STARTED], a[id=l4jEGwz1SDOFMJ7lzo0CYQ]]"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"node_id"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bJxIbe1TR22rEQC5hqhIYQ"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"node_name"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node-1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"transport_address"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.16.24.199:9300"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"node_attributes"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"ml.machine_memory"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"67381817344"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"ml.max_open_jobs"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"512"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"xpack.installed"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"ml.max_jvm_size"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8389328896"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"transform.node"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"node_decision"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"deciders"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"decider"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"same_shard"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"decision"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"NO"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"explanation"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"a copy of this shard is already allocated to this node [[test-20231110-2][0], node[bJxIbe1TR22rEQC5hqhIYQ], [P], s[STARTED], a[id=vEFW9hwTS2GWuYHnoyt-rw]]"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br"),t("span",{staticClass:"line-number"},[s._v("74")]),t("br"),t("span",{staticClass:"line-number"},[s._v("75")]),t("br"),t("span",{staticClass:"line-number"},[s._v("76")]),t("br"),t("span",{staticClass:"line-number"},[s._v("77")]),t("br"),t("span",{staticClass:"line-number"},[s._v("78")]),t("br"),t("span",{staticClass:"line-number"},[s._v("79")]),t("br"),t("span",{staticClass:"line-number"},[s._v("80")]),t("br"),t("span",{staticClass:"line-number"},[s._v("81")]),t("br")])]),t("p",[t("strong",[s._v("返回结果说明")])]),s._v(" "),t("ul",[t("li",[t("p",[t("strong",[s._v("index")]),s._v(": 解释的索引名称。取值范围：合法的索引名称。")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("shard")]),s._v(": 解释的分片编号。取值范围：整型，合法的分片编号。")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("primary")]),s._v(": 指示这是否是主分片。取值范围：布尔值。")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("current_state")]),s._v(": 分片的当前状态。取值范围：字符串，例如 “unassigned”。")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("unassigned_info:")]),s._v(" 分片未分配的原因信息。取值范围：对象，包含未分配的具体原因、发生时间戳、最后分配尝试状态等。")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("reason")]),s._v(": 未分配的具体原因。取值范围：字符串，例如 “NODE_LEFT”。")]),s._v(" "),t("li",[t("strong",[s._v("at")]),s._v(": 未分配发生的时间戳。取值范围：日期时间字符串。")]),s._v(" "),t("li",[t("strong",[s._v("details")]),s._v(": 详细信息，例如 “node_left [Hw6awNn-RCOgA921YGAviw]”。取值范围：字符串。")]),s._v(" "),t("li",[t("strong",[s._v("last_allocation_status")]),s._v(": 最后一次分配尝试的状态。取值范围：字符串，例如 “no_attempt”。")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("can_allocate")]),s._v(": 指示分片是否可以被分配。取值范围：字符串，例如 “no”。")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("allocate_explanation")]),s._v(": 分片分配的解释。取值范围：字符串，描述分片分配的可行性。")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("node_allocation_decisions:")]),s._v(" 包含每个节点的决策列表。取值范围：数组，包含多个对象，每个对象代表一个节点的决策。")]),s._v(" "),t("ul",[t("li",[t("p",[t("strong",[s._v("node_id")]),s._v(": 节点的唯一标识符。取值范围：字符串。")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("node_name")]),s._v(": 节点的名称。取值范围：字符串。")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("transport_address")]),s._v(": 节点的传输地址。取值范围：字符串。")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("node_attributes")]),s._v(": 节点的属性列表。取值范围：对象，包含多个键值对。")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("node_decision")]),s._v(": 节点是否可以分配分片。取值范围：字符串，例如 “no”。")])]),s._v(" "),t("li",[t("p",[s._v("deciders")]),s._v(" "),t("p",[s._v(": 决策者列表。取值范围：数组，包含多个对象，每个对象代表一个决策者及其决策结果。")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("decider")]),s._v(": 决策者的名称。取值范围：字符串。")]),s._v(" "),t("li",[t("strong",[s._v("decision")]),s._v(": 决策的结果。取值范围：字符串，例如 “NO”。")]),s._v(" "),t("li",[t("strong",[s._v("explanation")]),s._v(": 决策的解释。取值范围：字符串，描述为什么决策不允许分配。")])])])])])]),s._v(" "),t("h2",{attrs:{id:"查看节点信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看节点信息"}},[s._v("#")]),s._v(" 查看节点信息")]),s._v(" "),t("p",[t("code",[s._v("GET /_nodes/stats")]),s._v(" 和 "),t("code",[s._v("GET /_cat/nodes")]),s._v(" 是 Elasticsearch 中用于获取节点信息的两个不同 API。")]),s._v(" "),t("ol",[t("li",[t("strong",[s._v("GET /_nodes/stats")]),s._v(":\n"),t("ul",[t("li",[s._v("返回集群中一个或多个节点的统计信息。")]),s._v(" "),t("li",[s._v("提供关于节点的详细运行状况，包括内存使用、CPU 利用率、磁盘空间、索引状态等。")]),s._v(" "),t("li",[s._v("可以通过指定不同的路径参数和查询参数来自定义返回的信息，例如选择特定的指标或节点 ID。")]),s._v(" "),t("li",[s._v("响应体包含关于选定节点的详细统计信息，包括节点 ID、名称、传输地址、主机、IP 地址、角色、属性、索引统计等。")])])]),s._v(" "),t("li",[t("strong",[s._v("GET /_cat/nodes")]),s._v(":\n"),t("ul",[t("li",[s._v("返回集群中所有节点的信息。")]),s._v(" "),t("li",[s._v("设计用于人类交互，如命令行或 Kibana 控制台。")]),s._v(" "),t("li",[s._v("可以通过 "),t("code",[s._v("h")]),s._v(" 参数指定要显示的列。")]),s._v(" "),t("li",[s._v("返回的信息包括节点 IP 地址、堆大小、内存使用情况、文件描述符使用情况、节点角色、主节点状态、节点名称、节点 ID、进程 ID、端口、HTTP 地址、版本、构建哈希、Java 版本等。\n主要区别在于：")])])])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("GET /_nodes/stats")]),s._v(" 提供详细的统计信息，适合自动化和应用程序使用。")]),s._v(" "),t("li",[t("code",[s._v("GET /_cat/nodes")]),s._v(" 提供简洁的文本输出，适合人类阅读和交互。")]),s._v(" "),t("li",[t("code",[s._v("GET /_nodes/stats")]),s._v(" 支持更复杂的查询参数和路径参数，可以自定义返回的信息。")]),s._v(" "),t("li",[t("code",[s._v("GET /_cat/nodes")]),s._v(" 通过 "),t("code",[s._v("h")]),s._v(" 参数提供有限的列选择，更适合快速查看节点概览。")])]),s._v(" "),t("h3",{attrs:{id:"查看节点信息-cat-nodes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看节点信息-cat-nodes"}},[s._v("#")]),s._v(" 查看节点信息 _cat/nodes")]),s._v(" "),t("p",[t("code",[s._v("GET /_cat/nodes?v")]),s._v(" 是 Elasticsearch 中的一个命令，用于返回集群节点的信息。这个命令是专门为人类使用而设计的，通过命令行或 Kibana 控制台进行交互。它不适用于应用程序使用，而是建议使用 JSON API 来进行应用程序交互。")]),s._v(" "),t("p",[t("strong",[s._v("使用样例")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("GET /_cat/nodes?h=pid,ip,cpu,heap.max,ram.percent,load_1m,load_5m,load_15m&v\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("strong",[s._v("结果")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("pid   ip            cpu heap.max ram.percent load_1m load_5m load_15m\n32624 172.16.24.200   5    7.8gb          74    1.14    1.03     1.08\n26851 172.16.24.201  12    7.8gb          97    2.68    3.17     3.07\n32113 172.16.24.199   7    7.8gb          99    1.41    1.70     2.00\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("该命令的请求参数包括：")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("bytes")]),s._v(": (可选) 用于显示字节值的字节大小单位。")]),s._v(" "),t("li",[t("strong",[s._v("format")]),s._v(": (可选) 指定响应返回的数据格式，如 JSON、YAML 等。")]),s._v(" "),t("li",[t("strong",[s._v("full_id")]),s._v(": (可选) 如果设置为 "),t("code",[s._v("true")]),s._v("，则返回完整的节点 ID；如果设置为 "),t("code",[s._v("false")]),s._v("，则返回缩写的节点 ID。默认为 "),t("code",[s._v("false")]),s._v("。")]),s._v(" "),t("li",[t("strong",[s._v("h")]),s._v(": (可选) 逗号分隔的列名称列表，用于指定要显示的列。如果不指定列，API 将返回默认列，按照下面的顺序列出。如果明确指定一个或多个列，则只返回指定的列。\n有效的列包括：\n"),t("ul",[t("li",[t("code",[s._v("ip")]),s._v(": 节点 IP 地址。")]),s._v(" "),t("li",[t("code",[s._v("heap.percent")]),s._v(": 最大配置堆的百分比。")]),s._v(" "),t("li",[t("code",[s._v("heap.max")]),s._v(": 总堆大小。")]),s._v(" "),t("li",[t("code",[s._v("ram.percent")]),s._v(": 使用的总内存百分比。")]),s._v(" "),t("li",[t("code",[s._v("file_desc.percent")]),s._v(": 使用的文件描述符百分比。")]),s._v(" "),t("li",[t("code",[s._v("node.role")]),s._v(": 节点的角色。")]),s._v(" "),t("li",[t("code",[s._v("master")]),s._v(": 指示节点是否为选举出的主节点。")]),s._v(" "),t("li",[t("code",[s._v("name")]),s._v(": 节点名称。")]),s._v(" "),t("li",[t("code",[s._v("id")]),s._v(": 节点 ID。")]),s._v(" "),t("li",[t("code",[s._v("pid")]),s._v(": 进程 ID。")]),s._v(" "),t("li",[t("code",[s._v("port")]),s._v(": 绑定的传输端口。")]),s._v(" "),t("li",[t("code",[s._v("http_address")]),s._v(": 绑定的 HTTP 地址。")]),s._v(" "),t("li",[t("code",[s._v("version")]),s._v(": Elasticsearch 版本。")]),s._v(" "),t("li",[t("code",[s._v("build")]),s._v(": Elasticsearch 构建哈希。")]),s._v(" "),t("li",[t("code",[s._v("jdk")]),s._v(": Java 版本。")]),s._v(" "),t("li",[t("code",[s._v("disk.total")]),s._v(": 总磁盘空间。")]),s._v(" "),t("li",[t("code",[s._v("disk.used")]),s._v(": 已使用的磁盘空间。")]),s._v(" "),t("li",[t("code",[s._v("disk.avail")]),s._v(": 可用磁盘空间。")]),s._v(" "),t("li",[t("code",[s._v("disk.used_percent")]),s._v(": 已使用磁盘空间的百分比。")]),s._v(" "),t("li",[t("code",[s._v("heap.current")]),s._v(": 已使用的堆大小。")]),s._v(" "),t("li",[t("code",[s._v("ram.current")]),s._v(": 使用的总内存。")]),s._v(" "),t("li",[t("code",[s._v("ram.max")]),s._v(": 总内存。")]),s._v(" "),t("li",[t("code",[s._v("file_desc.current")]),s._v(": 使用的文件描述符数量。")]),s._v(" "),t("li",[t("code",[s._v("file_desc.max")]),s._v(": 最大文件描述符数量。")]),s._v(" "),t("li",[t("code",[s._v("cpu")]),s._v(": 最近系统 CPU 使用百分比。")]),s._v(" "),t("li",[t("code",[s._v("load_1m")]),s._v(": 最近一分钟的平均负载。")]),s._v(" "),t("li",[t("code",[s._v("load_5m")]),s._v(": 过去五分钟的平均负载。")]),s._v(" "),t("li",[t("code",[s._v("load_15m")]),s._v(": 过去十五分钟的平均负载。")]),s._v(" "),t("li",[t("code",[s._v("uptime")]),s._v(": 节点运行时间。")]),s._v(" "),t("li",[t("code",[s._v("completion.size")]),s._v(": 完成大小。")]),s._v(" "),t("li",[t("code",[s._v("dense_vector.value_count")]),s._v(": 索引的密集向量数量。")]),s._v(" "),t("li",[t("code",[s._v("fielddata.memory_size")]),s._v(": 使用的字段数据缓存内存。")]),s._v(" "),t("li",[t("code",[s._v("fielddata.evictions")]),s._v(": 字段数据缓存驱逐次数。")]),s._v(" "),t("li",[t("code",[s._v("query_cache.memory_size")]),s._v(": 使用的查询缓存内存。")]),s._v(" "),t("li",[t("code",[s._v("query_cache.evictions")]),s._v(": 查询缓存驱逐次数。")]),s._v(" "),t("li",[t("code",[s._v("query_cache.hit_count")]),s._v(": 查询缓存命中次数。")]),s._v(" "),t("li",[t("code",[s._v("query_cache.miss_count")]),s._v(": 查询缓存未命中次数。")]),s._v(" "),t("li",[t("code",[s._v("request_cache.memory_size")]),s._v(": 使用的请求缓存内存。")]),s._v(" "),t("li",[t("code",[s._v("request_cache.evictions")]),s._v(": 请求缓存驱逐次数。")]),s._v(" "),t("li",[t("code",[s._v("request_cache.hit_count")]),s._v(": 请求缓存命中次数。")]),s._v(" "),t("li",[t("code",[s._v("request_cache.miss_count")]),s._v(": 请求缓存未命中次数。")]),s._v(" "),t("li",[t("code",[s._v("flush.total")]),s._v(": 刷新次数。")]),s._v(" "),t("li",[t("code",[s._v("flush.total_time")]),s._v(": 花费在刷新上的时间。")]),s._v(" "),t("li",[t("code",[s._v("get.current")]),s._v(": 当前的获取操作次数。")]),s._v(" "),t("li",[t("code",[s._v("get.time")]),s._v(": 花费在获取上的时间。")]),s._v(" "),t("li",[t("code",[s._v("get.total")]),s._v(": 获取操作的总次数。")]),s._v(" "),t("li",[t("code",[s._v("get.exists_time")]),s._v(": 成功获取操作花费的时间。")]),s._v(" "),t("li",[t("code",[s._v("get.exists_total")]),s._v(": 成功的获取操作总次数。")]),s._v(" "),t("li",[t("code",[s._v("get.missing_time")]),s._v(": 失败获取操作花费的时间。")]),s._v(" "),t("li",[t("code",[s._v("get.missing_total")]),s._v(": 失败的获取操作总次数。")])])])]),s._v(" "),t("h3",{attrs:{id:"查看节点详细信息-nodes-stats"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看节点详细信息-nodes-stats"}},[s._v("#")]),s._v(" 查看节点详细信息 _nodes/stats")]),s._v(" "),t("p",[t("code",[s._v("GET /_nodes/stats")]),s._v(" 是 Elasticsearch 中的一个 API，用于获取集群中一个或多个节点的统计信息。这个 API 提供了关于节点的详细运行状况，包括内存使用、CPU 利用率、磁盘空间、索引状态等。")]),s._v(" "),t("p",[t("strong",[s._v("请求方式")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("GET /_nodes/stats")]),s._v(": 获取集群中所有节点的统计信息。")]),s._v(" "),t("li",[t("code",[s._v("GET /_nodes/<node_id>/stats")]),s._v(": 获取指定节点 ID 的节点的统计信息。")]),s._v(" "),t("li",[t("code",[s._v("GET /_nodes/stats/<metric>")]),s._v(": 获取指定指标的统计信息。")]),s._v(" "),t("li",[t("code",[s._v("GET /_nodes/<node_id>/stats/<metric>")]),s._v(": 获取指定节点 ID 和指标的统计信息。")]),s._v(" "),t("li",[t("code",[s._v("GET /_nodes/stats/<metric>/<index_metric>")]),s._v(": 获取指定指标和索引指标的统计信息。")])]),s._v(" "),t("p",[t("strong",[s._v("路径参数")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("<metric>")]),s._v(": (可选, string) 限制返回的信息到特定的指标。例如 "),t("code",[s._v("adaptive_selection")]),s._v(", "),t("code",[s._v("breaker")]),s._v(", "),t("code",[s._v("discovery")]),s._v(", "),t("code",[s._v("fs")]),s._v(", "),t("code",[s._v("http")]),s._v(", "),t("code",[s._v("indexing_pressure")]),s._v(", "),t("code",[s._v("indices")]),s._v(", "),t("code",[s._v("ingest")]),s._v(", "),t("code",[s._v("jvm")]),s._v(", "),t("code",[s._v("os")]),s._v(", "),t("code",[s._v("process")]),s._v(", "),t("code",[s._v("repositories")]),s._v(", "),t("code",[s._v("thread_pool")]),s._v(", "),t("code",[s._v("transport")]),s._v(" 等。")]),s._v(" "),t("li",[t("code",[s._v("<index_metric>")]),s._v(": (可选, string) 当指定 "),t("code",[s._v("indices")]),s._v(" 或 "),t("code",[s._v("all")]),s._v(" 指标时，可以进一步限制为特定索引指标。例如 "),t("code",[s._v("bulk")]),s._v(", "),t("code",[s._v("completion")]),s._v(", "),t("code",[s._v("docs")]),s._v(", "),t("code",[s._v("fielddata")]),s._v(", "),t("code",[s._v("flush")]),s._v(", "),t("code",[s._v("get")]),s._v(", "),t("code",[s._v("indexing")]),s._v(", "),t("code",[s._v("mappings")]),s._v(", "),t("code",[s._v("merge")]),s._v(", "),t("code",[s._v("query_cache")]),s._v(", "),t("code",[s._v("recovery")]),s._v(", "),t("code",[s._v("refresh")]),s._v(", "),t("code",[s._v("request_cache")]),s._v(", "),t("code",[s._v("search")]),s._v(", "),t("code",[s._v("segments")]),s._v(", "),t("code",[s._v("shard_stats")]),s._v(", "),t("code",[s._v("store")]),s._v(", "),t("code",[s._v("translog")]),s._v(", "),t("code",[s._v("warmer")]),s._v(", "),t("code",[s._v("dense_vector")]),s._v(" 等。")]),s._v(" "),t("li",[t("code",[s._v("<node_id>")]),s._v(": (可选, string) 逗号分隔的节点 ID 或名称列表，用于限制返回的信息。")])]),s._v(" "),t("p",[t("strong",[s._v("查询参数")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("completion_fields")]),s._v(", "),t("code",[s._v("fielddata_fields")]),s._v(", "),t("code",[s._v("fields")]),s._v(": (可选) 指定要包括在统计中的字段。")]),s._v(" "),t("li",[t("code",[s._v("groups")]),s._v(": (可选) 指定要包括在 "),t("code",[s._v("search")]),s._v(" 统计中的搜索组。")]),s._v(" "),t("li",[t("code",[s._v("level")]),s._v(": (可选) 指示统计是在集群、索引还是分片级别聚合。")]),s._v(" "),t("li",[t("code",[s._v("types")]),s._v(": (可选) 指定 "),t("code",[s._v("indexing")]),s._v(" 索引指标的文档类型。")]),s._v(" "),t("li",[t("code",[s._v("master_timeout")]),s._v(", "),t("code",[s._v("timeout")]),s._v(": (可选) 指定等待主节点响应或等待响应的时间。")]),s._v(" "),t("li",[t("code",[s._v("include_segment_file_sizes")]),s._v(", "),t("code",[s._v("include_unloaded_segments")]),s._v(": (可选) 控制是否包含段文件大小信息或未加载段的信息。")])]),s._v(" "),t("p",[t("strong",[s._v("返回结果说明")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("_nodes")]),s._v(": 包含根据请求选择的节点统计信息的对象。\n"),t("ul",[t("li",[t("code",[s._v("total")]),s._v(": 请求中选择的节点总数。")]),s._v(" "),t("li",[t("code",[s._v("successful")]),s._v(": 成功响应请求的节点数量。")]),s._v(" "),t("li",[t("code",[s._v("failed")]),s._v(": 拒绝请求或未能响应的节点数量。")]),s._v(" "),t("li",[t("code",[s._v("cluster_name")]),s._v(": 集群名称。")]),s._v(" "),t("li",[t("code",[s._v("nodes")]),s._v(": 包含选定节点的统计信息的对象。\n"),t("ul",[t("li",[t("code",[s._v("<node_id>")]),s._v(": 包含节点统计信息的对象。\n"),t("ul",[t("li",[t("code",[s._v("timestamp")]),s._v(": 收集节点统计信息的时间戳。")]),s._v(" "),t("li",[t("code",[s._v("name")]),s._v(": 节点的人可读标识符。")]),s._v(" "),t("li",[t("code",[s._v("transport_address")]),s._v(": 节点的传输地址。")]),s._v(" "),t("li",[t("code",[s._v("host")]),s._v(": 节点的网络主机。")]),s._v(" "),t("li",[t("code",[s._v("ip")]),s._v(": 节点的 IP 地址。")]),s._v(" "),t("li",[t("code",[s._v("roles")]),s._v(": 分配给节点的角色数组。")]),s._v(" "),t("li",[t("code",[s._v("attributes")]),s._v(": 包含节点属性的对象。")]),s._v(" "),t("li",[t("code",[s._v("indices")]),s._v(": 包含分配给节点的索引统计信息的对象。\n"),t("ul",[t("li",[t("code",[s._v("docs")]),s._v(": 包含分配给节点的所有主分片上的文档统计信息的对象。")]),s._v(" "),t("li",[t("code",[s._v("store")]),s._v(": 包含分配给节点的分片大小统计信息的对象。\n通过使用不同的参数，你可以自定义输出，以显示你感兴趣的节点统计信息。\n参考资料：")])])])])])])])])])])])}),[],!1,null,null,null);t.default=n.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{474:function(t,s,a){"use strict";a.r(s);var e=a(8),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("[toc]")]),t._v(" "),s("h2",{attrs:{id:"介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[t._v("#")]),t._v(" 介绍")]),t._v(" "),s("p",[t._v("我们都知道，ambari 中集成了很多服务，有的服务之间还存在着依赖关系，比如 HBase 依赖 zookeeper、hdfs 。如果你想成功运行 HBase ，那么就得先安装和启动 zookeeper 和 hdfs 。\n一般来说，一个服务都是由一个或多个组件组成，像 hdfs 中就有 namenode、secondNamenode、datanode 等。")]),t._v(" "),s("p",[t._v("在 ambari 里面，我们可以创建修改一个叫做 role_command_order.json 的文件，来调整各组件的执行顺序，从而可以调整多个服务之间的执行顺序。")]),t._v(" "),s("p",[t._v("简而言之，我们可以通过这个文件，告诉 ambari 先启动哪个服务。")]),t._v(" "),s("p",[t._v("下面我们对这两种场景进行介绍：")]),t._v(" "),s("ul",[s("li",[t._v("组件安装依赖设置")]),t._v(" "),s("li",[t._v("组件启动顺序设置")])]),t._v(" "),s("h2",{attrs:{id:"组件安装依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#组件安装依赖"}},[t._v("#")]),t._v(" 组件安装依赖")]),t._v(" "),s("p",[t._v("在安装服务和删除服务时会提示必须要安装另外一个服务或另外一个服务在引用无法删除。")]),t._v(" "),s("h3",{attrs:{id:"安装服务依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装服务依赖"}},[t._v("#")]),t._v(" 安装服务依赖")]),t._v(" "),s("p",[t._v("这里我设置安装DORIS服务必须安装SPARK2、ZOOKEEP、HDFS服务")]),t._v(" "),s("p",[t._v("在"),s("code",[t._v("metainfo.xml")]),t._v("的"),s("code",[t._v("<service>")]),t._v("下添加")]),t._v(" "),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[t._v("      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("requiredServices")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("service")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("ZOOKEEPER"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("service")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("service")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("HDFS"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("service")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("service")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("SPARK2"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("service")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("requiredServices")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("这里我们已经安装了ZOOKEEPER和HDFS，所以只提示需要安装SPARK2。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2024/04/08/mc61oTjLBYstkZH.png",alt:"image-20240306101617650"}})]),t._v(" "),s("p",[t._v("点击确定就会将SPARK2和DORIS一起安装")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2024/04/08/vs9nthSXTM5D7oH.png",alt:"image-20240306101930076"}})]),t._v(" "),s("h3",{attrs:{id:"删除服务依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#删除服务依赖"}},[t._v("#")]),t._v(" 删除服务依赖")]),t._v(" "),s("p",[t._v("删除SPARK2服务，会提示Doris在引用无法直接删除SPAKR2")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2024/04/08/dWpqehroOQF5J2y.png",alt:"image-20240306103042156"}})])])}),[],!1,null,null,null);s.default=n.exports}}]);
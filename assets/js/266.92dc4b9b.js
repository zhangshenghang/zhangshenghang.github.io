(window.webpackJsonp=window.webpackJsonp||[]).push([[266],{631:function(a,s,t){"use strict";t.r(s);var n=t(8),e=Object(n.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"快速源码修改指南-轻松编辑-jar-包中的代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#快速源码修改指南-轻松编辑-jar-包中的代码"}},[a._v("#")]),a._v(" 快速源码修改指南：轻松编辑 Jar 包中的代码")]),a._v(" "),s("p",[a._v("在软件开发和维护过程中，经常需要对已有的 Jar 包进行修改。这种操作可能是为了修复 Bug、增加功能或者做其他优化。在这篇文章中，我们将详细介绍如何使用 Luyten 工具对 Jar 包进行反编译、修改和重打包。通过实际示例，逐步展示整个过程。")]),a._v(" "),s("h2",{attrs:{id:"_1-下载-luyten"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-下载-luyten"}},[a._v("#")]),a._v(" 1. 下载 Luyten")]),a._v(" "),s("p",[a._v("在开始之前，您需要下载 Luyten 工具。它是一个开源的 Java 反编译器，使用起来非常方便。Luyten 可以帮助开发者轻松地查看和修改 Java 类文件，支持多种Java版本的类文件反编译，可以说是开发者的得力助手。")]),a._v(" "),s("p",[a._v("下载地址：https://github.com/deathmarine/Luyten/releases")]),a._v(" "),s("h2",{attrs:{id:"_2-使用-luyten-打开-jar-包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-使用-luyten-打开-jar-包"}},[a._v("#")]),a._v(" 2. 使用 Luyten 打开 Jar 包")]),a._v(" "),s("p",[a._v("下载并安装 Luyten 后，您可以打开该工具，直接将需要的 jar 包拖入到 Luyten 窗口中进行反编译。")]),a._v(" "),s("p",[a._v("这里使用 "),s("code",[a._v("hutool-all-4.1.0.jar")]),a._v(" 文件的 Hutool 类作为示例。通过 Luyten，您将能够查看该 Jar 包中的 Java 类源代码。")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2024/11/09/ixrzEk7oZFmNX2J.png",alt:"image-20241108152211860"}})]),a._v(" "),s("p",[a._v("接下来，点击"),s("code",[a._v("File")]),a._v(" -> "),s("code",[a._v("Save As...")]),a._v("，将所需的 "),s("code",[a._v(".java")]),a._v(" 文件保存到本地目录。")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2024/11/09/6z1dc9JiK3sQWwH.png",alt:"image-20241108152309203"}})]),a._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2024/11/09/7GRYItWFUsn8ofE.png",alt:"image-20241108152335781"}})]),a._v(" "),s("blockquote",[s("p",[s("strong",[a._v("注意")]),a._v("：保存的文件是"),s("code",[a._v(".java")]),a._v("格式，您可在后续步骤中对代码进行修改。")])]),a._v(" "),s("h2",{attrs:{id:"_3-修改-hutool-java-文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-修改-hutool-java-文件"}},[a._v("#")]),a._v(" 3. 修改 Hutool.java 文件")]),a._v(" "),s("p",[a._v("接下来，您可以对下载的 "),s("code",[a._v("Hutool.java")]),a._v(" 文件进行修改。比如，我们可以在构造方法中添加一条输出语句，用于测试修改是否成功：")]),a._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("package")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("cn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("hutool")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Hutool")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Hutool")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"你好啊"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br")])]),s("p",[a._v("在这里，我们简单的添加了一行打印语句，这样可以在实例化 "),s("code",[a._v("Hutool")]),a._v(" 类时看到输出。")]),a._v(" "),s("h2",{attrs:{id:"_4-编译修改后的代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-编译修改后的代码"}},[a._v("#")]),a._v(" 4. 编译修改后的代码")]),a._v(" "),s("p",[a._v("完成修改后，接下来要对更改后的代码进行编译。可以使用以下命令执行编译操作：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("javac Hutool.java\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("blockquote",[s("p",[s("strong",[a._v("提示")]),a._v("：由于 "),s("code",[a._v("Hutool")]),a._v(" 类没有依赖其他 Jar 包，因此可以直接编译。如果您反编译的类依赖于其他 Jar 包，则需将这些依赖添加到编译命令中。例如：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("javac "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-cp")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"a.jar:b.jar:c.jar"')]),a._v(" Hutool.java\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])])]),a._v(" "),s("p",[a._v("编译完成后，可以在相同目录下找到生成的 "),s("code",[a._v(".class")]),a._v(" 文件。")]),a._v(" "),s("h2",{attrs:{id:"_5-准备重新打包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-准备重新打包"}},[a._v("#")]),a._v(" 5. 准备重新打包")]),a._v(" "),s("p",[a._v("为了重新打包，我们需要将 "),s("code",[a._v(".class")]),a._v(" 文件和原 Jar 包放到同一个目录下。您可以运行以下命令来组织文件：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" /tmp/test\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" hutool-all-4.1.0.jar /tmp/test\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" Hutool.class /tmp/test\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("p",[a._v("接下来，解压原有的 Jar 包，以便替换掉被修改的类文件。")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" /tmp/test\njar "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-xvf")]),a._v(" hutool-all-4.1.0.jar\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h2",{attrs:{id:"_6-替换-class-文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-替换-class-文件"}},[a._v("#")]),a._v(" 6. 替换 Class 文件")]),a._v(" "),s("p",[a._v("解压完成后，我们就可以将修改后的 "),s("code",[a._v("Hutool.class")]),a._v(" 文件替换到解压后的文件夹中。首先，您需要删除原 Jar 包中旧的类文件，然后将修改后的类文件移动到适当的位置。")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 删除原有类文件")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" cn/hutool/Hutool.class\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 移动新类文件")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" Hutool.class cn/hutool\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 删除原有 jar 包")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" hutool-all-4.1.0.jar\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br")])]),s("h2",{attrs:{id:"_7-打包新的-jar-包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-打包新的-jar-包"}},[a._v("#")]),a._v(" 7. 打包新的 Jar 包")]),a._v(" "),s("p",[a._v("完成类文件的替换后，可以通过以下命令重新打包 Jar 包：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("jar "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-cvf")]),a._v(" hutool-all-4.1.0.jar "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"_8-验证修改"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-验证修改"}},[a._v("#")]),a._v(" 8. 验证修改")]),a._v(" "),s("p",[a._v("为了确保修改成功，再次使用 Luyten 打开新的 Jar 包并查看 "),s("code",[a._v("Hutool")]),a._v(" 类。")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2024/11/09/X5uUfnLrsYgTv48.png",alt:"image-20241108154430739"}})])])}),[],!1,null,null,null);s.default=e.exports}}]);
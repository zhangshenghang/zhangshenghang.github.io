(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{417:function(a,s,t){"use strict";t.r(s);var e=t(8),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"什么是-crontab"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#什么是-crontab"}},[a._v("#")]),a._v(" 什么是 crontab？")]),a._v(" "),s("p",[a._v("crontab 是一个定时执行任务的工具，在 Linux 系统中广泛使用。它可以让用户在指定的时间自动执行某个指令或脚本，例如自动备份数据、清除日志、定时运行程序等。")]),a._v(" "),s("h2",{attrs:{id:"crontab-的工作原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#crontab-的工作原理"}},[a._v("#")]),a._v(" crontab 的工作原理")]),a._v(" "),s("p",[a._v("crontab 依赖于系统 crond 守护进程（又称 cron 服务），该服务默认在后台运行，并周期性地检查用户的 crontab 配置文件是否有要执行的任务。如果有，就按照指定的时间执行对应的任务。")]),a._v(" "),s("h2",{attrs:{id:"crontab-的语法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#crontab-的语法"}},[a._v("#")]),a._v(" crontab 的语法")]),a._v(" "),s("p",[a._v("crontab 的语法非常特殊，需要按照固定的格式编写。下面是一个完整的 crontab 语句的例子：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# m h dom mon dow command")]),a._v("\n  *  *  *   *   *  "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("command")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("上面这条语句共有 6 个字段，分别代表分钟数（m）、小时数（h）、一个月的第几天（dom）、月份（mon）、星期几（dow）和要执行的命令（command）。以下是每个字段的详细说明：")]),a._v(" "),s("ul",[s("li",[a._v("Minute：分钟，取值范围为 0-59；")]),a._v(" "),s("li",[a._v("Hour：小时，取值范围为 0-23；")]),a._v(" "),s("li",[a._v("Day of Month：一个月的第几天，取值范围为 1-31；")]),a._v(" "),s("li",[a._v("Month：月份，取值范围为 1-12；")]),a._v(" "),s("li",[a._v("Day of Week：星期几，取值范围为 0-7（0 和 7 都代表周日，1 代表周一，依此类推）；")]),a._v(" "),s("li",[a._v("Command：要执行的命令。")])]),a._v(" "),s("p",[a._v("在每个字段中，你可以使用单个数字、数字范围、逗号（,）、星号（*）和斜杠（/），以构建 crontab 语句。")]),a._v(" "),s("h2",{attrs:{id:"命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#命令"}},[a._v("#")]),a._v(" 命令")]),a._v(" "),s("h3",{attrs:{id:"查看当前运行的定时任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看当前运行的定时任务"}},[a._v("#")]),a._v(" 查看当前运行的定时任务")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("crontab -l\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"删除所有的定时任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#删除所有的定时任务"}},[a._v("#")]),a._v(" 删除所有的定时任务")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("crontab -r\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"编辑定时任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编辑定时任务"}},[a._v("#")]),a._v(" 编辑定时任务")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("crontab -e\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"执行命令存储文件位置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#执行命令存储文件位置"}},[a._v("#")]),a._v(" 执行命令存储文件位置")]),a._v(" "),s("p",[s("code",[a._v("/var/spool/cron")])]),a._v(" "),s("h2",{attrs:{id:"日志所在位置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#日志所在位置"}},[a._v("#")]),a._v(" 日志所在位置")]),a._v(" "),s("p",[a._v("文件："),s("code",[a._v("/var/log/cron")])]),a._v(" "),s("h2",{attrs:{id:"使用案例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用案例"}},[a._v("#")]),a._v(" 使用案例")]),a._v(" "),s("h3",{attrs:{id:"每隔五秒执行一次"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#每隔五秒执行一次"}},[a._v("#")]),a._v(" 每隔五秒执行一次")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# crontab 最小单位是分钟，利用sleep实现每隔五秒钟执行一次")]),a._v("\n*/1 * * * * /bin/date "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v("/tmp/date.txt\n*/1 * * * * "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sleep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" /bin/date "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v("/tmp/date.txt\n*/1 * * * * "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sleep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" /bin/date "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v("/tmp/date.txt\n*/1 * * * * "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sleep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("15")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" /bin/date "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v("/tmp/date.txt\n*/1 * * * * "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sleep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("20")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" /bin/date "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v("/tmp/date.txt\n*/1 * * * * "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sleep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("25")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" /bin/date "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v("/tmp/date.txt\n*/1 * * * * "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sleep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("30")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" /bin/date "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v("/tmp/date.txt\n*/1 * * * * "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sleep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("35")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" /bin/date "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v("/tmp/date.txt\n*/1 * * * * "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sleep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("40")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" /bin/date "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v("/tmp/date.txt\n*/1 * * * * "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sleep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("45")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" /bin/date "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v("/tmp/date.txt\n*/1 * * * * "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sleep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("50")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" /bin/date "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v("/tmp/date.txt\n*/1 * * * * "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sleep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("55")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" /bin/date "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v("/tmp/date.txt\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br")])]),s("h3",{attrs:{id:"每天00-05执行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#每天00-05执行"}},[a._v("#")]),a._v(" 每天00:05执行")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" * * * \n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"每月1号14-15"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#每月1号14-15"}},[a._v("#")]),a._v(" 每月1号14:15")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[a._v("15")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("14")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" * *\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"每周从周一到周五-22-00"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#每周从周一到周五-22-00"}},[a._v("#")]),a._v(" 每周从周一到周五 22:00")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("22")]),a._v(" * * "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("-5\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"在线验证工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在线验证工具"}},[a._v("#")]),a._v(" 在线验证工具")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://crontab.guru/",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://crontab.guru/"),s("OutboundLink")],1)]),a._v(" "),s("p",[a._v("点击"),s("code",[a._v("next")]),a._v("可以看到下几次执行时间。")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2023/10/08/hwV9v316u2WqGgz.png",alt:"image-20230508112312538"}})])])}),[],!1,null,null,null);s.default=r.exports}}]);
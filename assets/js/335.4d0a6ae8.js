(window.webpackJsonp=window.webpackJsonp||[]).push([[335],{700:function(t,a,s){"use strict";s.r(a);var e=s(8),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("[toc]")]),t._v(" "),a("h3",{attrs:{id:"介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[t._v("#")]),t._v(" 介绍")]),t._v(" "),a("p",[a("code",[t._v("zookeeper")]),t._v("支持某些特定的四字命令与其的交互。它们大多数是查询命令，用来获取"),a("code",[t._v("zookeeper")]),t._v("服务的当前状态及相关信息。用户在客户端可以通过"),a("code",[t._v("telnet")]),t._v("或"),a("code",[t._v("nc")]),t._v("向"),a("code",[t._v("zookeeper")]),t._v("提交相应的命令。")]),t._v(" "),a("h3",{attrs:{id:"常用四字命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用四字命令"}},[t._v("#")]),t._v(" 常用四字命令")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("四字命令")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("echo conf | nc 192.168.74.128 2181")]),t._v(" "),a("td",[t._v("conf输出zookeeper相关服务的详细配置信息，如客户端端口、数据存储路径、最大连接数、日志路径、数据同步端口、主节点推举端口、session超时时间等")])]),t._v(" "),a("tr",[a("td",[t._v("echo cons | nc 192.168.74.128 2181")]),t._v(" "),a("td",[t._v("cons命令会用于输出当前这台服务器上所有客户端连接的详细信息，包括队列、数据接收量、数据发送量、sessionID、操作延时、最后的操作信息等")])]),t._v(" "),a("tr",[a("td",[t._v("echo crst | nc 192.168.74.128 2181")]),t._v(" "),a("td",[t._v("crst命令是一个功能性命令，用于重置所有的客户端连接统计信息。")])]),t._v(" "),a("tr",[a("td",[t._v("echo dump | nc 192.168.74.128 2181")]),t._v(" "),a("td",[t._v("dump命令用于输出当前集群的所有会话信息，包括会话的sessionID，以及每个会话创建的临时节点等信息。如果在Leader服务器上执行该命令的话，我们还能够看到每个会话的超时时间。")])]),t._v(" "),a("tr",[a("td",[t._v("echo envi | nc 192.168.74.128 2181")]),t._v(" "),a("td",[t._v("envi命令用于输出Zookeeper所在服务器运行时的环境信息。包括os.version, java.version, user.home等。")])]),t._v(" "),a("tr",[a("td",[t._v("echo ruok | nc 192.168.74.128 2181")]),t._v(" "),a("td",[t._v("ruok命令用于输出当前Zookeeper服务器是否在运行如果在运行返回imok，否则返回空")])]),t._v(" "),a("tr",[a("td",[t._v("echo stat | nc 192.168.74.128 2181")]),t._v(" "),a("td",[t._v("stat命令用于获取Zookeeper服务器的运行时状态信息，包括基本的Zookeeper版本，打包信息，运行时角色，集群数据节点个数等信息，另外还会将当前服务器的客户端连接信息打出来。另外，stat命令还会输出一些服务器的统计信息，包括延迟情况，收到的请求数和返回的响应数等。这些信息可以通过srst命令进行重置。")])]),t._v(" "),a("tr",[a("td",[t._v("echo srvr | nc 192.168.74.128 2181")]),t._v(" "),a("td",[t._v("srvr命令和stat命令的功能一致，唯一的区别是srvr不会将客户端的链接情况输出，仅仅输出服务器端的自身信息。")])]),t._v(" "),a("tr",[a("td",[t._v("echo srst | nc 192.168.74.128 2181")]),t._v(" "),a("td",[t._v("srst命令是一个功能性命令，用于重置所有服务器的统计信息。")])]),t._v(" "),a("tr",[a("td",[t._v("echo wchs | nc 192.168.74.128 2181")]),t._v(" "),a("td",[t._v("wchs命令用于输出当前服务器上管理的watcher的概要信息。")])]),t._v(" "),a("tr",[a("td",[t._v("echo wchc | nc 192.168.74.128 2181")]),t._v(" "),a("td",[t._v("wchc命令用于输出当前服务器上管理的watcher的详细信息，以会话为单位进行归组，同时列出被该会话信息注册了watcher的节点路径。")])]),t._v(" "),a("tr",[a("td",[t._v("echo wchp | nc 192.168.74.128 2181")]),t._v(" "),a("td",[t._v("wchp命令和wchc命令非常类似，也是用于输出当前服务器上管理的watcher的详细信息，不同点在于wchp命令的输出信息是以节点路径为单位进行归组。")])]),t._v(" "),a("tr",[a("td",[t._v("echo mntr | nc 192.168.74.128 2181")]),t._v(" "),a("td",[t._v("mntr命令用于输出比stat命令更为详尽的服务器统计信息，列出集群的关键性能数据，包括zk的版本、最大/平均/最小延迟数、数据包接收/发送量、连接数、zk角色（Leader/Follower）、node数量、watch数量、临时节点数。在输出结果中，每一行都是一个key-value键值对。")])])])]),t._v(" "),a("h3",{attrs:{id:"开启四字命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开启四字命令"}},[t._v("#")]),t._v(" 开启四字命令")]),t._v(" "),a("p",[t._v("在zoo.cfg中添加如下一行代码并保存退出")]),t._v(" "),a("div",{staticClass:"language-properties line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 开启四字命令")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("4lw.commands.whitelist")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("*")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("重启zookeeper")]),t._v(" "),a("h3",{attrs:{id:"linux安装nc命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux安装nc命令"}},[t._v("#")]),t._v(" Linux安装nc命令")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-y")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("nc")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"命令详解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令详解"}},[t._v("#")]),t._v(" 命令详解")]),t._v(" "),a("h4",{attrs:{id:"conf命令-相关服务配置的详细信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#conf命令-相关服务配置的详细信息"}},[t._v("#")]),t._v(" conf命令 相关服务配置的详细信息")]),t._v(" "),a("p",[t._v("命令："),a("code",[t._v("echo conf | nc 172.16.24.195 2181")])]),t._v(" "),a("p",[t._v("返回结果：")]),t._v(" "),a("div",{staticClass:"language-properties line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("clientPort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("2181")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("secureClientPort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("-1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("dataDir")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("/data/zookeeper/data/version-2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("dataDirSize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("270064305")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("dataLogDir")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("/data/zookeeper/data/version-2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("dataLogSize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("270064305")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("tickTime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("6000")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("maxClientCnxns")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("5000")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("minSessionTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("12000")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("maxSessionTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("120000")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("clientPortListenBacklog")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("-1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("serverId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("653691")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("initLimit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("100")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("syncLimit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("50")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("electionAlg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("3")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("electionPort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("2183")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("quorumPort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("2182")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("peerType")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("membership")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server.653691")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("10.16.0.16:2182:2183:participant")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server.653693")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("10.16.0.11:2182:2183:participant")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server.653692")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("10.16.0.14:2182:2183:participant")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br")])]),a("p",[t._v("返回结果说明：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("属性")]),t._v(" "),a("th",[t._v("含义")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("clientPort")]),t._v(" "),a("td",[t._v("客户端端口号")])]),t._v(" "),a("tr",[a("td",[t._v("dataDir")]),t._v(" "),a("td",[t._v("数据快照文件目录，默认情况下10w次事务操作生成一次快照")])]),t._v(" "),a("tr",[a("td",[t._v("dataLogDir")]),t._v(" "),a("td",[t._v("事务日志文件目录，生产环节中放再独立的磁盘上")])]),t._v(" "),a("tr",[a("td",[t._v("tickTime")]),t._v(" "),a("td",[t._v("服务器之间或客户端与服务器之间维持心跳的时间间隔(以毫秒为单位)")])]),t._v(" "),a("tr",[a("td",[t._v("maxClientCnxns")]),t._v(" "),a("td",[t._v("最大连接数")])]),t._v(" "),a("tr",[a("td",[t._v("minSessionTimeout")]),t._v(" "),a("td",[t._v("最小session超时minSessionTimeout=tickTime*2 ，即使客户端连接设置了会话超时，也不能打破这个限制")])]),t._v(" "),a("tr",[a("td",[t._v("maxSessionTimeout")]),t._v(" "),a("td",[t._v("最大session超时maxSessionTimeout=tickTime*20，即使客户端连接设置了会话超时，也不能打破这个限制")])]),t._v(" "),a("tr",[a("td",[t._v("serverId")]),t._v(" "),a("td",[t._v("服务器编号")])]),t._v(" "),a("tr",[a("td",[t._v("initLimit")]),t._v(" "),a("td",[t._v("集群中follower服务器(F)与leader服务器(L)之间初始连接时能容忍的最多心跳数，实际上以tickTime为单位，换算为毫秒数")])]),t._v(" "),a("tr",[a("td",[t._v("syncLimit")]),t._v(" "),a("td",[t._v("集群中follower服务器(F)与leader服务器(L)之间请求和应答之间能容忍的最大心跳数，实际上以tickTime为单位，换算为毫秒数")])]),t._v(" "),a("tr",[a("td",[t._v("electionAlg")]),t._v(" "),a("td",[t._v("0：基于UDP的LeaderElection；1：基于UDP的FastLeaderElection；2：基于UDP和认证的FastLeaderElection；3：基于TCP的FastLeaderElection。在3.4.10版本中，默认值为3，另外三种算法以及被弃用，并且有计划在之后的版本中将它们彻底删除且不再支持")])]),t._v(" "),a("tr",[a("td",[t._v("electionPort")]),t._v(" "),a("td",[t._v("选举端口")])]),t._v(" "),a("tr",[a("td",[t._v("quorumPort")]),t._v(" "),a("td",[t._v("数据通信端口")])]),t._v(" "),a("tr",[a("td",[t._v("peerType")]),t._v(" "),a("td",[t._v("是否为观察者 （1为观察者）")])])])]),t._v(" "),a("h4",{attrs:{id:"cons命令-客户端连接-会话的详细信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cons命令-客户端连接-会话的详细信息"}},[t._v("#")]),t._v(" cons命令 客户端连接/会话的详细信息")]),t._v(" "),a("p",[t._v("命令："),a("code",[t._v("echo cons | nc 172.16.24.195 2181")])]),t._v(" "),a("p",[t._v("返回结果：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v(" /172.16.24.190:10712[1](queued=0,recved=345000,sent=345000,sid=0x2860204cdc40053,lop=GETC,est=1676251467641,to=30000,lcxid=0x4fa5c,lzxid=0x500213600,lresp=1676439102013,llat=0,minlat=0,avglat=0,maxlat=32)\n /172.16.24.194:35604[1](queued=0,recved=77361,sent=77361,sid=0x2860204cdc40021,lop=PING,est=1675665041173,to=30000,lcxid=0x10,lzxid=0xffffffffffffffff,lresp=1676439094031,llat=1,minlat=0,avglat=0,maxlat=606)\n /172.16.24.194:35602[1](queued=0,recved=77361,sent=77361,sid=0x2860204cdc40020,lop=PING,est=1675665041090,to=30000,lcxid=0x10,lzxid=0xffffffffffffffff,lresp=1676439094885,llat=0,minlat=0,avglat=0,maxlat=690)\n /172.16.24.196:2361[0](queued=0,recved=1,sent=0)\n /172.16.24.195:2803[1](queued=0,recved=95783,sent=95783,sid=0x3859fb197540021,lop=PING,est=1675071115180,to=60000,lcxid=0xe7e2,lzxid=0xffffffffffffffff,lresp=1676439098069,llat=0,minlat=0,avglat=0,maxlat=556)\n /172.16.24.194:35626[1](queued=0,recved=77346,sent=77346,sid=0x2860204cdc40023,lop=PING,est=1675665041329,to=30000,lcxid=0x0,lzxid=0xffffffffffffffff,lresp=1676439098729,llat=1,minlat=0,avglat=0,maxlat=865)\n /172.16.24.195:2801[1](queued=0,recved=68354,sent=68354,sid=0x3859fb197540020,lop=PING,est=1675071115073,to=60000,lcxid=0x11,lzxid=0xffffffffffffffff,lresp=1676439096237,llat=1,minlat=0,avglat=0,maxlat=657)\n /172.16.24.194:35628[1](queued=0,recved=77346,sent=77346,sid=0x2860204cdc40024,lop=PING,est=1675665041340,to=30000,lcxid=0x0,lzxid=0xffffffffffffffff,lresp=1676439099120,llat=1,minlat=0,avglat=0,maxlat=799)\n /172.16.24.194:35608[1](queued=0,recved=77351,sent=77351,sid=0x2860204cdc40022,lop=PING,est=1675665041208,to=30000,lcxid=0x5,lzxid=0xffffffffffffffff,lresp=1676439098239,llat=1,minlat=0,avglat=0,maxlat=904)\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("p",[t._v("返回结果说明：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("属性")]),t._v(" "),a("th",[t._v("含义")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("ip")]),t._v(" "),a("td",[t._v("IP地址")])]),t._v(" "),a("tr",[a("td",[t._v("port")]),t._v(" "),a("td",[t._v("端口号")])]),t._v(" "),a("tr",[a("td",[t._v("queued")]),t._v(" "),a("td",[t._v("等待被处理的请求数，请求缓存在队列中")])]),t._v(" "),a("tr",[a("td",[t._v("received")]),t._v(" "),a("td",[t._v("收到的包数")])]),t._v(" "),a("tr",[a("td",[t._v("sent")]),t._v(" "),a("td",[t._v("发送的包数")])]),t._v(" "),a("tr",[a("td",[t._v("sid")]),t._v(" "),a("td",[t._v("会话id")])]),t._v(" "),a("tr",[a("td",[t._v("lop")]),t._v(" "),a("td",[t._v("最后的操作 GETD-读取数据 DELE-删除数据 CREA-创建数据")])]),t._v(" "),a("tr",[a("td",[t._v("est")]),t._v(" "),a("td",[t._v("连接时间戳")])]),t._v(" "),a("tr",[a("td",[t._v("to")]),t._v(" "),a("td",[t._v("超时时间")])]),t._v(" "),a("tr",[a("td",[t._v("lcxid")]),t._v(" "),a("td",[t._v("当前会话的操作id")])]),t._v(" "),a("tr",[a("td",[t._v("lzxid")]),t._v(" "),a("td",[t._v("最大事务id")])]),t._v(" "),a("tr",[a("td",[t._v("lresp")]),t._v(" "),a("td",[t._v("最后响应时间戳")])]),t._v(" "),a("tr",[a("td",[t._v("llat")]),t._v(" "),a("td",[t._v("最后/最新 延迟")])]),t._v(" "),a("tr",[a("td",[t._v("minlat")]),t._v(" "),a("td",[t._v("最小延时")])]),t._v(" "),a("tr",[a("td",[t._v("maxlat")]),t._v(" "),a("td",[t._v("最大延时")])]),t._v(" "),a("tr",[a("td",[t._v("avglat")]),t._v(" "),a("td",[t._v("平均延时")])])])]),t._v(" "),a("h4",{attrs:{id:"crst命令-重置当前这台服务器所有连接-会话的统计信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#crst命令-重置当前这台服务器所有连接-会话的统计信息"}},[t._v("#")]),t._v(" crst命令 重置当前这台服务器所有连接/会话的统计信息")]),t._v(" "),a("p",[t._v("命令："),a("code",[t._v("echo crst | nc 172.16.24.195 2181")])]),t._v(" "),a("h4",{attrs:{id:"dump命令-列出未经处理的会话和临时节点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dump命令-列出未经处理的会话和临时节点"}},[t._v("#")]),t._v(" dump命令 列出未经处理的会话和临时节点")]),t._v(" "),a("p",[t._v("命令："),a("code",[t._v("echo dump | nc 172.16.24.195 2181")])]),t._v(" "),a("p",[t._v("返回结果：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("SessionTracker dump:\nSession Sets (19):\n0 expire at Wed Feb 15 13:38:03 CST 2023:\n0 expire at Wed Feb 15 13:38:06 CST 2023:\n0 expire at Wed Feb 15 13:38:09 CST 2023:\n1 expire at Wed Feb 15 13:38:12 CST 2023:\n        0x3860204cdd70018\n0 expire at Wed Feb 15 13:38:15 CST 2023:\n1 expire at Wed Feb 15 13:38:18 CST 2023:\n        0x1860204cdc1036b\n0 expire at Wed Feb 15 13:38:21 CST 2023:\n1 expire at Wed Feb 15 13:38:24 CST 2023:\n        0x1860204cdc10068\n4 expire at Wed Feb 15 13:38:27 CST 2023:\n        0x2860204cdc40020\n        0x2860204cdc40021\n        0x3860204cdd70015\n        0x1860204cdc1000f\n9 expire at Wed Feb 15 13:38:30 CST 2023:\n        0x2860204cdc40024\n        0x1860204cdc10010\n        0x3860204cdd70030\n        0x1860204cdc10067\n        0x2860204cdc40022\n        0x3860204cdd70061\n        0x1860204cdc10069\n        0x2860204cdc40023\n        0x3860204cdd70031\n8 expire at Wed Feb 15 13:38:33 CST 2023:\n        0x1860204cdc10066\n        0x1860204cdc10064\n        0x3860204cdd70062\n        0x3860204cdd70033\n        0x1860204cdc10065\n        0x3860204cdd70034\n        0x2860204cdc40053\n        0x3860204cdd70032\n0 expire at Wed Feb 15 13:38:36 CST 2023:\n0 expire at Wed Feb 15 13:38:39 CST 2023:\n0 expire at Wed Feb 15 13:38:42 CST 2023:\n2 expire at Wed Feb 15 13:38:45 CST 2023:\n        0x3860204cdd70019\n        0x3859fb197540021\n2 expire at Wed Feb 15 13:38:48 CST 2023:\n        0x1859fb197570015\n        0x1859fb197570017\n2 expire at Wed Feb 15 13:38:57 CST 2023:\n        0x3859fb19754001f\n        0x3859fb197540020\n1 expire at Wed Feb 15 13:39:00 CST 2023:\n        0x1859fb197570018\n1 expire at Wed Feb 15 13:39:03 CST 2023:\n        0x1859fb197570016\nephemeral nodes dump:\nSessions with Ephemerals (12):\n0x3859fb197540020:\n        /hiveserver2-leader/privilege_synchonizer/_c_64eb1667-7c13-4d27-adf2-f4abaf8c8a4e-latch-0000000002\n0x3860204cdd70015:\n        /controller\n        /brokers/ids/1002\n0x3859fb197540021:\n        /hbase-unsecure/master\n0x1860204cdc1000f:\n        /brokers/ids/1001\n0x1860204cdc10010:\n        /brokers/ids/1003\n0x1859fb197570017:\n        /hbase-unsecure/rs/bigdata-24-196,16020,1673486638880\n0x3860204cdd70061:\n        /clickhouse/tables/ads_user_profile/01/leader_election/leader_election-0000000002\n        /clickhouse/tables/ads_user_profile/01/replicas/rep_1/is_active\n0x1859fb197570016:\n        /hbase-unsecure/rs/bigdata-24-195,16020,1673486403861\n0x2860204cdc40053:\n        /clickhouse/tables/ads_user_profile/03/replicas/rep_3/is_active\n        /clickhouse/tables/ads_user_profile/03/leader_election/leader_election-0000000002\n0x3860204cdd70062:\n        /clickhouse/tables/ads_user_profile/02/leader_election/leader_election-0000000002\n        /clickhouse/tables/ads_user_profile/02/replicas/rep_2/is_active\n0x1859fb197570018:\n        /hbase-unsecure/rs/bigdata-24-197,16020,1673486647419\n0x3859fb19754001f:\n        /hiveserver2/serverUri=bigdata-24-195:10000;version=3.1.0.3.1.5.0-152;sequence=0000000000\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br"),a("span",{staticClass:"line-number"},[t._v("37")]),a("br"),a("span",{staticClass:"line-number"},[t._v("38")]),a("br"),a("span",{staticClass:"line-number"},[t._v("39")]),a("br"),a("span",{staticClass:"line-number"},[t._v("40")]),a("br"),a("span",{staticClass:"line-number"},[t._v("41")]),a("br"),a("span",{staticClass:"line-number"},[t._v("42")]),a("br"),a("span",{staticClass:"line-number"},[t._v("43")]),a("br"),a("span",{staticClass:"line-number"},[t._v("44")]),a("br"),a("span",{staticClass:"line-number"},[t._v("45")]),a("br"),a("span",{staticClass:"line-number"},[t._v("46")]),a("br"),a("span",{staticClass:"line-number"},[t._v("47")]),a("br"),a("span",{staticClass:"line-number"},[t._v("48")]),a("br"),a("span",{staticClass:"line-number"},[t._v("49")]),a("br"),a("span",{staticClass:"line-number"},[t._v("50")]),a("br"),a("span",{staticClass:"line-number"},[t._v("51")]),a("br"),a("span",{staticClass:"line-number"},[t._v("52")]),a("br"),a("span",{staticClass:"line-number"},[t._v("53")]),a("br"),a("span",{staticClass:"line-number"},[t._v("54")]),a("br"),a("span",{staticClass:"line-number"},[t._v("55")]),a("br"),a("span",{staticClass:"line-number"},[t._v("56")]),a("br"),a("span",{staticClass:"line-number"},[t._v("57")]),a("br"),a("span",{staticClass:"line-number"},[t._v("58")]),a("br"),a("span",{staticClass:"line-number"},[t._v("59")]),a("br"),a("span",{staticClass:"line-number"},[t._v("60")]),a("br"),a("span",{staticClass:"line-number"},[t._v("61")]),a("br"),a("span",{staticClass:"line-number"},[t._v("62")]),a("br"),a("span",{staticClass:"line-number"},[t._v("63")]),a("br"),a("span",{staticClass:"line-number"},[t._v("64")]),a("br"),a("span",{staticClass:"line-number"},[t._v("65")]),a("br"),a("span",{staticClass:"line-number"},[t._v("66")]),a("br"),a("span",{staticClass:"line-number"},[t._v("67")]),a("br"),a("span",{staticClass:"line-number"},[t._v("68")]),a("br"),a("span",{staticClass:"line-number"},[t._v("69")]),a("br"),a("span",{staticClass:"line-number"},[t._v("70")]),a("br"),a("span",{staticClass:"line-number"},[t._v("71")]),a("br"),a("span",{staticClass:"line-number"},[t._v("72")]),a("br"),a("span",{staticClass:"line-number"},[t._v("73")]),a("br"),a("span",{staticClass:"line-number"},[t._v("74")]),a("br"),a("span",{staticClass:"line-number"},[t._v("75")]),a("br"),a("span",{staticClass:"line-number"},[t._v("76")]),a("br"),a("span",{staticClass:"line-number"},[t._v("77")]),a("br"),a("span",{staticClass:"line-number"},[t._v("78")]),a("br"),a("span",{staticClass:"line-number"},[t._v("79")]),a("br"),a("span",{staticClass:"line-number"},[t._v("80")]),a("br"),a("span",{staticClass:"line-number"},[t._v("81")]),a("br"),a("span",{staticClass:"line-number"},[t._v("82")]),a("br"),a("span",{staticClass:"line-number"},[t._v("83")]),a("br")])]),a("p",[t._v("返回结果说明：")]),t._v(" "),a("p",[t._v("Sessions with Ephemerals (12): 临时节点")]),t._v(" "),a("h4",{attrs:{id:"envi命令-输出关于服务器的环境详细信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#envi命令-输出关于服务器的环境详细信息"}},[t._v("#")]),t._v(" envi命令 输出关于服务器的环境详细信息")]),t._v(" "),a("p",[t._v("使用命令："),a("code",[t._v("echo envi | nc 172.16.24.196 2181")])]),t._v(" "),a("p",[t._v("返回结果：")]),t._v(" "),a("div",{staticClass:"language-properties line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("Environment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("zookeeper.version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("3.4.6-152--1, built on 12/12/2019 19:36 GMT")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("host.name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("bigdata-24-196")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("java.version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("1.8.0_151")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("java.vendor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("Oracle Corporation")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("java.home")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("/opt/jdk1.8.0_151/jre")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("java.class.path")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("/usr/hdp/current/zookeeper-server/bin/../build/classes:/usr/hdp/current/zookeeper-server/bin/../build/lib/*.jar:/usr/hdp/current/zookeeper-server/bin/../lib/slf4j-log4j12-1.6.1.jar:/usr/hdp/current/zookeeper-server/bin/../lib/slf4j-api-1.6.1.jar:/usr/hdp/current/zookeeper-server/bin/../lib/netty-3.10.5.Final.jar:/usr/hdp/current/zookeeper-server/bin/../lib/log4j-1.2.16.jar:/usr/hdp/current/zookeeper-server/bin/../lib/jline-0.9.94.jar:/usr/hdp/current/zookeeper-server/bin/../zookeeper-3.4.6.3.1.5.0-152.jar:/usr/hdp/current/zookeeper-server/bin/../src/java/lib/*.jar:/usr/hdp/current/zookeeper-server/conf::/usr/share/zookeeper/*:/usr/share/zookeeper/*")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("java.library.path")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("java.io.tmpdir")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("/tmp")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("java.compiler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("<NA>")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("os.name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("Linux")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("os.arch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("amd64")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("os.version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("3.10.0-1160.81.1.el7.x86_64")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("user.name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("zookeeper")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("user.home")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("/home/zookeeper")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("user.dir")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("/home/zookeeper")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br")])]),a("p",[t._v("返回结果说明：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("属性")]),t._v(" "),a("th",[t._v("含义")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("zookeeper.version")]),t._v(" "),a("td",[t._v("版本")])]),t._v(" "),a("tr",[a("td",[t._v("host.name")]),t._v(" "),a("td",[t._v("host信息")])]),t._v(" "),a("tr",[a("td",[t._v("java.version")]),t._v(" "),a("td",[t._v("java版本")])]),t._v(" "),a("tr",[a("td",[t._v("java.vendor")]),t._v(" "),a("td",[t._v("供应商")])]),t._v(" "),a("tr",[a("td",[t._v("java.home")]),t._v(" "),a("td",[t._v("运行环境所在目录")])]),t._v(" "),a("tr",[a("td",[t._v("java.class.path")]),t._v(" "),a("td",[t._v("classpath")])]),t._v(" "),a("tr",[a("td",[t._v("java.library.path")]),t._v(" "),a("td",[t._v("第三方库指定非Java类包的为止(如：dll，so)")])]),t._v(" "),a("tr",[a("td",[t._v("java.io.tmpdir")]),t._v(" "),a("td",[t._v("默认的临时文件路径")])]),t._v(" "),a("tr",[a("td",[t._v("java.compiler")]),t._v(" "),a("td",[t._v("JIT编辑器的名称")])]),t._v(" "),a("tr",[a("td",[t._v("os.name")]),t._v(" "),a("td",[t._v("Linux")])]),t._v(" "),a("tr",[a("td",[t._v("os.arch")]),t._v(" "),a("td",[t._v("amd64")])]),t._v(" "),a("tr",[a("td",[t._v("os.version")]),t._v(" "),a("td",[t._v("3.10.0-1062.el7.x86_64")])]),t._v(" "),a("tr",[a("td",[t._v("user.name")]),t._v(" "),a("td",[t._v("zookeeper")])]),t._v(" "),a("tr",[a("td",[t._v("user.home")]),t._v(" "),a("td",[t._v("/opt/zookeeper")])]),t._v(" "),a("tr",[a("td",[t._v("user.dir")]),t._v(" "),a("td",[t._v("/opt/zookeeper/zookeeper2181/bin")])])])]),t._v(" "),a("h4",{attrs:{id:"ruok命令-测试服务是否处于正确运行状态"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ruok命令-测试服务是否处于正确运行状态"}},[t._v("#")]),t._v(" ruok命令 测试服务是否处于正确运行状态")]),t._v(" "),a("p",[t._v("测试服务是否处于正确运行状态，如果目标正确运行会返回imok.（are you ok | I’m ok）")]),t._v(" "),a("p",[t._v("使用命令： "),a("code",[t._v("echo ruok | nc 172.16.24.196 2181")])]),t._v(" "),a("p",[t._v("返回结果：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("imok\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"stat命令-输出服务器的详细信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#stat命令-输出服务器的详细信息"}},[t._v("#")]),t._v(" stat命令 输出服务器的详细信息")]),t._v(" "),a("p",[t._v("使用命令："),a("code",[t._v("echo stat | nc 172.16.24.196 2181")])]),t._v(" "),a("p",[t._v("返回结果：")]),t._v(" "),a("div",{staticClass:"language-properties line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("Zookeeper")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("version: 3.4.6-152--1, built on 12/12/2019 19:36 GMT")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("Clients")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v(" /172.16.24.194")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("62109[1](queued=0,recved=77431,sent=77431)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v(" /172.16.24.194")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("62119[1](queued=0,recved=77431,sent=77431)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v(" /172.16.24.194")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("62095[1](queued=0,recved=77439,sent=77439)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v(" /172.16.24.195")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("44558[1](queued=0,recved=73005,sent=73005)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v(" /172.16.24.194")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("62117[1](queued=0,recved=77430,sent=77430)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v(" /172.16.24.189")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("21228[1](queued=0,recved=3862468,sent=4002626)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v(" /172.16.24.194")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("28637[1](queued=0,recved=60085,sent=60085)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v(" /172.16.24.194")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("23991[1](queued=0,recved=361331,sent=361331)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v(" /172.16.24.188")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("5384[1](queued=0,recved=362727,sent=362729)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v(" /172.16.24.196")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("31543[0](queued=0,recved=1,sent=0)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v(" /172.16.24.194")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("62101[1](queued=0,recved=77431,sent=77431)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v(" /172.16.24.195")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("32835[1](queued=0,recved=120894,sent=120901)")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("Latency")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("min/avg/max: 0/2/1628")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("Received")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("7053942")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("Sent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("7194140")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("Connections")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("12")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("Outstanding")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("Zxid")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("0x50021360f")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("Mode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("leader")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("Node")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("count: 917")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br")])]),a("p",[t._v("返回结果说明：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("属性")]),t._v(" "),a("th",[t._v("含义")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("zookeeper version")]),t._v(" "),a("td",[t._v("版本")])]),t._v(" "),a("tr",[a("td",[t._v("Latency min/avg/max")]),t._v(" "),a("td",[t._v("延时")])]),t._v(" "),a("tr",[a("td",[t._v("Received")]),t._v(" "),a("td",[t._v("收包")])]),t._v(" "),a("tr",[a("td",[t._v("Sent")]),t._v(" "),a("td",[t._v("发包")])]),t._v(" "),a("tr",[a("td",[t._v("Connections")]),t._v(" "),a("td",[t._v("当前服务器连接数")])]),t._v(" "),a("tr",[a("td",[t._v("Outstanding")]),t._v(" "),a("td",[t._v("服务器堆积的未处理请求数")])]),t._v(" "),a("tr",[a("td",[t._v("Zxid")]),t._v(" "),a("td",[t._v("最大事务id")])]),t._v(" "),a("tr",[a("td",[t._v("Mode")]),t._v(" "),a("td",[t._v("服务器角色")])]),t._v(" "),a("tr",[a("td",[t._v("Node count")]),t._v(" "),a("td",[t._v("节点数")])])])]),t._v(" "),a("h4",{attrs:{id:"srst命令-重置server状态"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#srst命令-重置server状态"}},[t._v("#")]),t._v(" srst命令 重置server状态")]),t._v(" "),a("p",[t._v("重置"),a("code",[t._v("server")]),t._v("状态")]),t._v(" "),a("p",[t._v("命令："),a("code",[t._v("echo srst | nc 192.168.74.138 2181")])]),t._v(" "),a("h4",{attrs:{id:"wchs命令-列出服务器watches的简洁信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#wchs命令-列出服务器watches的简洁信息"}},[t._v("#")]),t._v(" wchs命令 列出服务器watches的简洁信息")]),t._v(" "),a("p",[t._v("使用命令："),a("code",[t._v("echo wchs | nc 172.16.24.196 2181")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("2 connections watching 2 paths\nTotal watches:2\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h4",{attrs:{id:"wchc命令-列出watch详细信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#wchc命令-列出watch详细信息"}},[t._v("#")]),t._v(" wchc命令 列出watch详细信息")]),t._v(" "),a("p",[t._v("通过"),a("code",[t._v("session")]),t._v("分组，列出"),a("code",[t._v("watch")]),t._v("的所有节点，它的输出是一个与"),a("code",[t._v("watch")]),t._v("相关的会话的节点列表")]),t._v(" "),a("p",[t._v("命令："),a("code",[t._v("echo wchc | nc 10.16.0.16 2181")])]),t._v(" "),a("p",[t._v("返回结果：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("0x7b0000052401f65b\n        /hiveserver2/leader/_c_9976606a-f614-48af-9ac7-0ccd52cbf9f0-latch-0000000061\n0x7b0000052401f03c\n        /hadoop-ha/HDFS8000154/ActiveStandbyElectorLock\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h4",{attrs:{id:"wchp命令-列出watch详细信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#wchp命令-列出watch详细信息"}},[t._v("#")]),t._v(" wchp命令 列出watch详细信息")]),t._v(" "),a("p",[t._v("通过路径分组，列出所有的"),a("code",[t._v("watch")]),t._v("的"),a("code",[t._v("session id")]),t._v(" 信息")]),t._v(" "),a("p",[t._v("命令："),a("code",[t._v("echo wchp | nc 10.16.0.16 2181")])]),t._v(" "),a("p",[t._v("返回结果：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("/hiveserver2/leader/_c_9976606a-f614-48af-9ac7-0ccd52cbf9f0-latch-0000000061\n        0x7b0000052401f65b\n/hadoop-ha/HDFS8000154/ActiveStandbyElectorLock\n        0x7b0000052401f03c\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("blockquote",[a("p",[t._v("wchp 与 wchc 统计维度不同")])]),t._v(" "),a("h4",{attrs:{id:"mntr命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mntr命令"}},[t._v("#")]),t._v(" mntr命令")]),t._v(" "),a("p",[t._v("列出服务器的健康状态")]),t._v(" "),a("p",[t._v("命令："),a("code",[t._v("echo mntr | nc 172.16.24.196 2181")])]),t._v(" "),a("p",[t._v("返回结果：")]),t._v(" "),a("div",{staticClass:"language-properties line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("zk_version")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("     3.4.6-152--1, built on 12/12/2019 19:36 GMT")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("zk_avg_latency")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v(" 2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("zk_max_latency")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v(" 1628")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("zk_min_latency")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v(" 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("zk_packets_received")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("    7056217")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("zk_packets_sent")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("7196415")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("zk_num_alive_connections")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("       12")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("zk_outstanding_requests")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("zk_server_state")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("leader")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("zk_znode_count")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v(" 917")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("zk_watch_count")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v(" 28")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("zk_ephemerals_count")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("    16")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("zk_approximate_data_size")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("       393028")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("zk_open_file_descriptor_count")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("  44")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("zk_max_file_descriptor_count")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("   65535")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("zk_fsync_threshold_exceed_count")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("35")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("zk_followers")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("   2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("zk_synced_followers")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("    2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("zk_pending_syncs")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("       0")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br")])]),a("p",[t._v("返回结果说明：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("属性")]),t._v(" "),a("th",[t._v("含义")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("zk_version")]),t._v(" "),a("td",[t._v("版本")])]),t._v(" "),a("tr",[a("td",[t._v("zk_avg_latency")]),t._v(" "),a("td",[t._v("平均延时")])]),t._v(" "),a("tr",[a("td",[t._v("zk_max_latency")]),t._v(" "),a("td",[t._v("最大延时")])]),t._v(" "),a("tr",[a("td",[t._v("zk_min_latency")]),t._v(" "),a("td",[t._v("最小延时")])]),t._v(" "),a("tr",[a("td",[t._v("zk_packets_received")]),t._v(" "),a("td",[t._v("收包数")])]),t._v(" "),a("tr",[a("td",[t._v("zk_packets_sent")]),t._v(" "),a("td",[t._v("发包数")])]),t._v(" "),a("tr",[a("td",[t._v("zk_num_alive_connections")]),t._v(" "),a("td",[t._v("连接数")])]),t._v(" "),a("tr",[a("td",[t._v("zk_outstanding_requests")]),t._v(" "),a("td",[t._v("堆积请求数")])]),t._v(" "),a("tr",[a("td",[t._v("zk_server_state")]),t._v(" "),a("td",[t._v("leader/follower状态")])]),t._v(" "),a("tr",[a("td",[t._v("zk_znode_count")]),t._v(" "),a("td",[t._v("znode数量")])]),t._v(" "),a("tr",[a("td",[t._v("zk_watch_count")]),t._v(" "),a("td",[t._v("watch数量")])]),t._v(" "),a("tr",[a("td",[t._v("zk_ephemerals_count")]),t._v(" "),a("td",[t._v("l临时节点(znode)")])]),t._v(" "),a("tr",[a("td",[t._v("zk_approximate_data_size")]),t._v(" "),a("td",[t._v("数据大小")])]),t._v(" "),a("tr",[a("td",[t._v("zk_open_file_descriptor_count")]),t._v(" "),a("td",[t._v("打开的文件描述符数量")])]),t._v(" "),a("tr",[a("td",[t._v("zk_max_file_descriptor_count")]),t._v(" "),a("td",[t._v("最大文件描述符数量")])])])]),t._v(" "),a("h3",{attrs:{id:"参考文章"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[t._v("#")]),t._v(" 参考文章")]),t._v(" "),a("p",[t._v("https://blog.csdn.net/qq_39280718/article/details/126836894")])])}),[],!1,null,null,null);a.default=n.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[174],{539:function(s,a,t){"use strict";t.r(a);var n=t(8),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("[toc]")]),s._v(" "),a("h2",{attrs:{id:"报错内容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#报错内容"}},[s._v("#")]),s._v(" 报错内容")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Too many dynamic script compilations within, max: [75/5m]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("这个错误是由于ElasticSearch在一段时间内编译的脚本数量超过了限制。默认情况下，ElasticSearch每5分钟只允许编译75个唯一的脚本。这个限制是为了防止脚本编译过多导致的性能问题。")])]),s._v(" "),a("h2",{attrs:{id:"解决方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决方法"}},[s._v("#")]),s._v(" 解决方法")]),s._v(" "),a("h3",{attrs:{id:"方法一-增加脚本编译的限制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方法一-增加脚本编译的限制"}},[s._v("#")]),s._v(" 方法一：增加脚本编译的限制")]),s._v(" "),a("p",[s._v("你可以通过修改ElasticSearch的设置来增加这个限制。例如，你可以将限制提高到每5分钟200个脚本。你可以通过以下命令来修改这个设置：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("PUT /_cluster/settings\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"persistent"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"script.max_compilations_rate"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"200/5m"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("这个命令将会把限制提高到每5分钟200个脚本。请注意，这可能会增加ElasticSearch的CPU使用率，因此请根据你的实际情况来设置这个值。")]),s._v(" "),a("h3",{attrs:{id:"方法二-重用脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方法二-重用脚本"}},[s._v("#")]),s._v(" 方法二：重用脚本")]),s._v(" "),a("p",[s._v("如果你的脚本有很多重复的部分，你可以考虑将这些部分提取出来，作为一个单独的脚本来使用。这样，ElasticSearch就只需要编译一次这个脚本，而不是每次都编译。这可以通过使用ElasticSearch的脚本库来实现。")])])}),[],!1,null,null,null);a.default=e.exports}}]);
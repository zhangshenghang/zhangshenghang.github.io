(window.webpackJsonp=window.webpackJsonp||[]).push([[247],{613:function(e,t,a){"use strict";a.r(t);var r=a(8),s=Object(r.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v("[toc]")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://www.hadoop.wiki/pages/d3710b",target:"_blank",rel:"noopener noreferrer"}},[e._v("数据湖Iceberg-简介(1)"),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://www.hadoop.wiki/pages/ded150/",target:"_blank",rel:"noopener noreferrer"}},[e._v("数据湖Iceberg-存储结构(2)"),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://www.hadoop.wiki/pages/9a96a6/",target:"_blank",rel:"noopener noreferrer"}},[e._v("数据湖Iceberg-Hive集成Iceberg(3)"),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://www.hadoop.wiki/pages/592494/",target:"_blank",rel:"noopener noreferrer"}},[e._v("数据湖Iceberg-SparkSQL集成(4)"),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://www.hadoop.wiki/pages/12fe6d/",target:"_blank",rel:"noopener noreferrer"}},[e._v("数据湖Iceberg-FlinkSQL集成(5)"),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://www.hadoop.wiki/pages/edf0ba/",target:"_blank",rel:"noopener noreferrer"}},[e._v("数据湖Iceberg-FlinkSQL-kafka类型表数据无法成功写入(6)"),t("OutboundLink")],1),e._v(" "),t("a",{attrs:{href:"https://www.hadoop.wiki/pages/571843/",target:"_blank",rel:"noopener noreferrer"}},[e._v("数据湖Iceberg-Flink DataFrame集成(7)"),t("OutboundLink")],1)]),e._v(" "),t("h1",{attrs:{id:"存储结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#存储结构"}},[e._v("#")]),e._v(" 存储结构")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2023/04/24/aT2yfkjmqOlGh16.png",alt:"image-20230412133339202"}})]),e._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2023/04/24/xqyrHcob769KNSu.png",alt:"image-20230412133437814"}})]),e._v(" "),t("h2",{attrs:{id:"数据文件-data-files"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数据文件-data-files"}},[e._v("#")]),e._v(" 数据文件 data files")]),e._v(" "),t("p",[e._v("数据文件是Apache Iceberg表真实存储数据的文件，一般是在表的数据存储目录的data目录下，如果我们的文件格式选择的是parquet,那么文件是以“.parquet”结尾。")]),e._v(" "),t("p",[e._v("例如：00000-0-atguigu_20230203160458_22ee74c9-643f-4b27-8fc1-9cbd5f64dad4-job_1675409881387_0007-00001.parquet 就是一个数据文件。")]),e._v(" "),t("p",[e._v("Iceberg每次更新会产生多个数据文件（data files）。")]),e._v(" "),t("h2",{attrs:{id:"表快照-snapshot"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#表快照-snapshot"}},[e._v("#")]),e._v(" 表快照 Snapshot")]),e._v(" "),t("p",[e._v("​\t快照代表一张表在某个时刻的状态。每个快照里面会列出表在某个时刻的所有 data files 列表。data files是存储在不同的manifest files里面，manifest files是存储在一个Manifest list文件里面，而一个Manifest list文件代表一个快照。")]),e._v(" "),t("h2",{attrs:{id:"清单列表-manifest-list"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#清单列表-manifest-list"}},[e._v("#")]),e._v(" 清单列表 Manifest list")]),e._v(" "),t("p",[e._v("​\tmanifest list是一个元数据文件，它列出构建表快照（Snapshot）的清单（Manifest file）。这个元数据文件中存储的是Manifest file列表，每个Manifest file占据一行。每行中存储了Manifest file的路径、其存储的数据文件（data files）的分区范围，增加了几个数文件、删除了几个数据文件等信息，这些信息可以用来在查询时提供过滤，加快速度。")]),e._v(" "),t("p",[e._v("​\t例如：snap-6746266566064388720-1-52f2f477-2585-4e69-be42-bbad9a46ed17.avro就是一个Manifest List文件。")]),e._v(" "),t("h2",{attrs:{id:"清单文件-manifest-file"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#清单文件-manifest-file"}},[e._v("#")]),e._v(" 清单文件 Manifest file")]),e._v(" "),t("p",[e._v("​\tManifest file也是一个元数据文件，它列出组成快照（snapshot）的数据文件（data files）的列表信息。每行都是每个数据文件的详细描述，包括数据文件的状态、文件路径、分区信息、列级别的统计信息（比如每列的最大最小值、空值数等）、文件的大小以及文件里面数据行数等信息。其中列级别的统计信息可以在扫描表数据时过滤掉不必要的文件。")]),e._v(" "),t("p",[e._v("​\tManifest file是以avro格式进行存储的，以“.avro”后缀结尾，例如：52f2f477-2585-4e69-be42-bbad9a46ed17-m0.avro。")])])}),[],!1,null,null,null);t.default=s.exports}}]);
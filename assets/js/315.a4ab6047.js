(window.webpackJsonp=window.webpackJsonp||[]).push([[315],{681:function(a,t,s){"use strict";s.r(t);var n=s(8),e=Object(n.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("p",[a._v("[toc]")]),a._v(" "),t("h3",{attrs:{id:"场景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#场景"}},[a._v("#")]),a._v(" 场景")]),a._v(" "),t("p",[a._v("集群：Ambari Hadoop")]),a._v(" "),t("p",[a._v("Spark：单独安装 3.2.1")]),a._v(" "),t("h3",{attrs:{id:"异常"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#异常"}},[a._v("#")]),a._v(" 异常")]),a._v(" "),t("p",[a._v("提交 Spark 任务报错")]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("Exception "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" thread "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"main"')]),a._v(" java.lang.NoClassDefFoundError: com/sun/jersey/api/client/config/ClientConfig\n        at org.apache.hadoop.yarn.client.api.TimelineClient.createTimelineClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("TimelineClient.java:55"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.hadoop.yarn.client.api.impl.YarnClientImpl.createTimelineClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("YarnClientImpl.java:181"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.hadoop.yarn.client.api.impl.YarnClientImpl.serviceInit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("YarnClientImpl.java:168"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.hadoop.service.AbstractService.init"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("AbstractService.java:163"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.deploy.yarn.Client.submitApplication"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Client.scala:175"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.scheduler.cluster.YarnClientSchedulerBackend.start"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("YarnClientSchedulerBackend.scala:62"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.scheduler.TaskSchedulerImpl.start"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("TaskSchedulerImpl.scala:220"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.SparkContext."),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("init"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SparkContext.scala:581"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.SparkContext$.getOrCreate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SparkContext.scala:2690"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.sql.SparkSession"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$Builder")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$anonfun")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$getOrCreate")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SparkSession.scala:949"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at scala.Option.getOrElse"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Option.scala:189"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.sql.SparkSession"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$Builder")]),a._v(".getOrCreate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SparkSession.scala:943"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at com.avris.util.SparkContextHelper$.getContext"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SparkContextHelper.scala:59"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at com.avris.application.AttributesCreateLabelsApplication$.main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("AttributesCreateLabelsApplication.scala:41"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at com.avris.application.AttributesCreateLabelsApplication.main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("AttributesCreateLabelsApplication.scala"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at sun.reflect.NativeMethodAccessorImpl.invoke0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Native Method"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at sun.reflect.NativeMethodAccessorImpl.invoke"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("NativeMethodAccessorImpl.java:62"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("DelegatingMethodAccessorImpl.java:43"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at java.lang.reflect.Method.invoke"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Method.java:498"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.deploy.JavaMainApplication.start"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SparkApplication.scala:52"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.deploy.SparkSubmit.org"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$apache")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$spark")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$deploy")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$SparkSubmit")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$$")]),a._v("runMain"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SparkSubmit.scala:955"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.deploy.SparkSubmit.doRunMain"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SparkSubmit.scala:180"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.deploy.SparkSubmit.submit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SparkSubmit.scala:203"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.deploy.SparkSubmit.doSubmit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SparkSubmit.scala:90"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.deploy.SparkSubmit"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$$")]),a._v("anon"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$2")]),a._v(".doSubmit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SparkSubmit.scala:1043"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.deploy.SparkSubmit$.main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SparkSubmit.scala:1052"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.spark.deploy.SparkSubmit.main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("SparkSubmit.scala"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nCaused by: java.lang.ClassNotFoundException: com.sun.jersey.api.client.config.ClientConfig\n        at java.net.URLClassLoader.findClass"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("URLClassLoader.java:381"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at java.lang.ClassLoader.loadClass"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ClassLoader.java:424"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at sun.misc.Launcher"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$AppClassLoader")]),a._v(".loadClass"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Launcher.java:335"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at java.lang.ClassLoader.loadClass"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ClassLoader.java:357"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(". "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("27")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("more")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br"),t("span",{staticClass:"line-number"},[a._v("22")]),t("br"),t("span",{staticClass:"line-number"},[a._v("23")]),t("br"),t("span",{staticClass:"line-number"},[a._v("24")]),t("br"),t("span",{staticClass:"line-number"},[a._v("25")]),t("br"),t("span",{staticClass:"line-number"},[a._v("26")]),t("br"),t("span",{staticClass:"line-number"},[a._v("27")]),t("br"),t("span",{staticClass:"line-number"},[a._v("28")]),t("br"),t("span",{staticClass:"line-number"},[a._v("29")]),t("br"),t("span",{staticClass:"line-number"},[a._v("30")]),t("br"),t("span",{staticClass:"line-number"},[a._v("31")]),t("br"),t("span",{staticClass:"line-number"},[a._v("32")]),t("br"),t("span",{staticClass:"line-number"},[a._v("33")]),t("br"),t("span",{staticClass:"line-number"},[a._v("34")]),t("br")])]),t("h3",{attrs:{id:"解决方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解决方法"}},[a._v("#")]),a._v(" 解决方法")]),a._v(" "),t("p",[a._v("在 yarn 配置中添加")]),a._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("property")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n\t    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("yarn.timeline-service.enabled"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("false"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("property")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\t\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);